{"split":"2-0","session.current":["/www/js/controllers.js","/www/templates/menu.html"],"session.open":{"/www/js/controllers.js":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":1184,"column":0}},"lastUse":1473466309542,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":265,"column":43},"end":{"row":266,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":266,"column":0},"end":{"row":266,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":4},"end":{"row":266,"column":54}},"text":"var name = localStorage.getItem(stemcfg.username);"},{"action":"insertText","range":{"start":{"row":266,"column":54},"end":{"row":267,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":266,"column":4},"end":{"row":266,"column":12}},"text":"var name"},{"action":"insertText","range":{"start":{"row":266,"column":4},"end":{"row":266,"column":5}},"text":"$"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":5},"end":{"row":266,"column":6}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":6},"end":{"row":266,"column":7}},"text":"c"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":7},"end":{"row":266,"column":8}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":8},"end":{"row":266,"column":9}},"text":"p"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":9},"end":{"row":266,"column":10}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":10},"end":{"row":266,"column":11}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":11},"end":{"row":266,"column":12}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":12},"end":{"row":266,"column":13}},"text":"m"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":13},"end":{"row":266,"column":14}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":14},"end":{"row":266,"column":15}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":15},"end":{"row":266,"column":16}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":266,"column":55},"end":{"row":266,"column":56}},"text":"e"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":266,"column":54},"end":{"row":266,"column":55}},"text":"m"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":266,"column":53},"end":{"row":266,"column":54}},"text":"a"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":266,"column":52},"end":{"row":266,"column":53}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":266,"column":4},"end":{"row":266,"column":10}},"text":"$scope"},{"action":"insertText","range":{"start":{"row":266,"column":4},"end":{"row":266,"column":5}},"text":"c"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":5},"end":{"row":266,"column":6}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":6},"end":{"row":266,"column":7}},"text":"m"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":7},"end":{"row":266,"column":8}},"text":"p"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":8},"end":{"row":266,"column":9}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":9},"end":{"row":266,"column":10}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":10},"end":{"row":266,"column":11}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":11},"end":{"row":266,"column":12}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":266,"column":12},"end":{"row":266,"column":13}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":266,"column":0},"end":{"row":267,"column":0}},"nl":"\r\n","lines":["    component.email = localStorage.getItem(stemcfg.user);"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":0},"end":{"row":499,"column":53}},"text":"component.email = localStorage.getItem(stemcfg.user);"},{"action":"insertText","range":{"start":{"row":499,"column":53},"end":{"row":500,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":0},"end":{"row":499,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":498,"column":25},"end":{"row":499,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":499,"column":0},"end":{"row":499,"column":4}},"text":"    "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":4},"end":{"row":499,"column":5}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":5},"end":{"row":499,"column":6}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":6},"end":{"row":499,"column":7}},"text":"b"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":7},"end":{"row":499,"column":8}},"text":"u"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":8},"end":{"row":499,"column":9}},"text":"g"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":9},"end":{"row":499,"column":10}},"text":"g"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":10},"end":{"row":499,"column":11}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":11},"end":{"row":499,"column":12}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":499,"column":4},"end":{"row":499,"column":7}},"text":"// "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":7,"column":0},"end":{"row":18,"column":0}},"nl":"\r\n","lines":["select count(*) as usersthreads,0 as threads,0 as flags,0 as messages,0 as users,0 as powerups from usersthreads","union","select 0,count(*),0,0,0,0 from threads","union","select 0,0,count(*),0,0,0 from flags","union","select 0,0,0,count(*),0,0 from messages","union","select 0,0,0,0,count(*),0 from users","union","select 0,0,0,0,0,count(*) from powerups"]},{"action":"insertText","range":{"start":{"row":7,"column":0},"end":{"row":7,"column":112}},"text":"select sum(a.quests), sum(a.powerups), sum(a.usersthreads), sum(a.threads), sum(a.flags), sum(a.messages) from ("},{"action":"insertText","range":{"start":{"row":7,"column":112},"end":{"row":8,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":8,"column":0},"end":{"row":22,"column":0}},"lines":["select count(*) as usersthreads,0 as threads,0 as flags,0 as messages,0 as users,0 as quests, 0 as powerups from usersthreads","union","select 0,count(*),0,0,0,0,0 from threads","union","select 0,0,count(*),0,0,0,0 from flags","union","select 0,0,0,count(*),0,0,0 from messages","union","select 0,0,0,0,count(*),0,0 from users","union","select 0,0,0,0,0,count(*),0 from quests","union","select 0,0,0,0,0,0,count(*) from powerups",") a"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":0},"end":{"row":33,"column":19}},"text":"GET /Questspowerups"},{"action":"insertText","range":{"start":{"row":33,"column":19},"end":{"row":34,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":34,"column":0},"end":{"row":36,"column":0}},"lines":["{\"where\": {\"questsid\": 1}}","{\"where\": {\"powerupsid\": 1}}"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":49,"column":0},"end":{"row":50,"column":0}},"nl":"\r\n","lines":["angular.module('app.controllers', [])"]},{"action":"insertText","range":{"start":{"row":49,"column":0},"end":{"row":49,"column":78}},"text":"angular.module('app.controllers', ['controller.quests','controller.powerups'])"},{"action":"insertText","range":{"start":{"row":49,"column":78},"end":{"row":50,"column":0}},"text":"\r\n"}]}]],"redo":[[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":240,"column":0},"end":{"row":241,"column":0}},"nl":"\r\n","lines":["<<<<<<< HEAD"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":270,"column":0},"end":{"row":273,"column":0}},"nl":"\r\n","lines":["=======",".controller('loginCtrl', function($ionicPopup, $location, $scope,$state,$stateParams,StemFactory,$ionicLoading,StemService,stemcfg, capi) {",">>>>>>> origin/quests"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":13}},"text":"'use strict';"},{"action":"insertText","range":{"start":{"row":0,"column":13},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":1185,"column":0}},"lines":["","var gitems;   //just for test","","/**","Usesful SQLs:","","select sum(a.quests), sum(a.powerups), sum(a.usersthreads), sum(a.threads), sum(a.flags), sum(a.messages) from (","select count(*) as usersthreads,0 as threads,0 as flags,0 as messages,0 as users,0 as quests, 0 as powerups from usersthreads","union","select 0,count(*),0,0,0,0,0 from threads","union","select 0,0,count(*),0,0,0,0 from flags","union","select 0,0,0,count(*),0,0,0 from messages","union","select 0,0,0,0,count(*),0,0 from users","union","select 0,0,0,0,0,count(*),0 from quests","union","select 0,0,0,0,0,0,count(*) from powerups",") a","","Note: a space after -- is required!","-- delete from usersthreads;","-- delete from threads;","-- delete from flags;","-- delete from messages;","-- delete from users;","-- delete from powerups;","","Useful Explorer filter:","","GET /Questspowerups","{\"where\": {\"questsid\": 1}}","{\"where\": {\"powerupsid\": 1}}","GET /Users","{\"where\": {\"name\": \"user1@gmail.com\"}}","GET /Quests","{\"include\": \"powerups\"}","GET /Powerups","{\"where\": {\"point\": 11}}","GET /Flags","{\"where\": {\"messages\": 45, \"owner\": 28}}","","References:","","https://github.com/urish/angular-moment","*/","angular.module('app.controllers', ['controller.quests','controller.powerups'])","",".controller('newMessageCtrl', function($location, $ionicFilterBar, Users, $scope, stemcfg, StemFactory, StemService, $state, $stateParams, capi) {","    StemFactory.store('newMessagesCtrl', $scope);","    var component = this;","    var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","","    //=== retrieve id selected by toMessage (i.e. private message recipient!)","    component.recipientId = $stateParams.id;","    component.recipientName = $stateParams.name;","    component.recipientEmail = $stateParams.email;","","    component.sendMessage = function(id, name, email) {","        var fromwhoId = localStorage.getItem(stemcfg.userid);","        var fromwhoName = localStorage.getItem(stemcfg.username);","        var fromwhoEmail = localStorage.getItem(stemcfg.user);","        var towhoId = component.recipientId;","        var towhoName = name;","        var towhoEmail = email;","        var json = {","            id: 0,","            fromwhoId: fromwhoId,","            fromwhoName: fromwhoName,","            fromwhoEmail: fromwhoEmail,","            towhoId: towhoId,","            towhoName: towhoName,","            towhoEmail: towhoEmail,","            text: component.text","        };","        component.createMessage(json);","    };","","    component.createMessage = function(json) {","        function afterPrivateMessageCreate(data) {","            // debugger","            // if(StemService.hasError(data)) {","                console.log(JSON.stringify(data));","                // StemService.alert(JSON.stringify(data));","            // } else {","                StemService.alert('Message sent to ' + component.recipientName + '!');","            // }","            // console.log('/api/UsersThreads sent!');","        }","        console.log('json = ' + json);","        capi(webHost, '/api/UsersThreads/sendmessage', 'POST', 'model', 'method', json, afterPrivateMessageCreate, null);","    }","","","})","",".controller('myMessagesThreadsCtrl', function($ionicFilterBar, Usersthreads, Users, Threads, $scope, StemFactory, StemService, $state, stemcfg, $ionicLoading) {","    StemFactory.store('myMessagesThreadsCtrl', $scope);","    var component = this;","    // console.log($stateParams.id);","    // console.log($stateParams.towho);","    console.log($state.params.id);","    console.log($state.params.towho);","    component.id = $state.params.towho;","","    $scope.$on('$ionicView.enter', function(){","        $ionicLoading.show({template: `Retrieving all the private messages sent to ${component.id}...`});","        getInbox();","    });","","    function populateInbox(results) {","        // console.log(results);","        component.items = [];","        var loadItemsLimit = results.inbox.length;","        // debugger","        for (var i = 0; i < loadItemsLimit; i++) {","            component.items.push(results.inbox[i]);","            // console.log(component.items[i]);","        }","        $ionicLoading.hide();","    }","","    function getInbox() {","        Usersthreads","        .inbox({id: 0})","        .$promise","        .then(function(results) {","            populateInbox(results);","        });","    }","","    component.loadMoreItems = function() {","        //TODO","    } //end of component.loadMoreItems","","","})","",".controller('myMessagesCtrl', function($ionicPopup, $ionicFilterBar, Usersthreads, Users, Threads, $scope, StemFactory, $stateParams, StemService, $state, stemcfg, $ionicLoading) {","    StemFactory.store('myMessagesCtrl', $scope);","    StemService.handleInvalidSession($state, $scope, localStorage.getItem(stemcfg.userid), $ionicPopup, $stateParams.m);","    var component = this;","    // console.log($stateParams.towho);","    // console.log($state.params);","","    $scope.$on('$ionicView.enter', function(){","        $ionicLoading.show({template: `Retrieving all the private messages sent to ${component.id}...`});","        getItems();","    });","","    function populateItems(results) {","        console.log(results);","        var loadItemsLimit = results.messages.length;","        // debugger","        for (var i = 0; i < loadItemsLimit; i++) {","            var item = results.messages[i];","            // if(item.subject.indexOf('Message from ' + item.towho) > -1) {","            //     item.source = 'Received from: ' + item.towho;","            //     // item.source = 'Received from: ' + item.fromwho + ' to ' + item.towho;","            // }","            // else","            if(item.subject.indexOf('to ' + item.towho) > -1) {","                if(item.towho === localStorage.getItem(stemcfg.username)) {","                    // item.source = 'Sent to: ' + item.fromwho + ' to ' + item.towho;","                    item.source = 'Received from: ' + item.fromwho;","                } else {","                    item.source = 'Sent to: ' + item.towho;","                }","            }","            component.items.push(item);","            // console.log(item);","        }","        $ionicLoading.hide();","    }","    function getItems() {","        var ownerId;","        try {","            ownerId = localStorage.getItem(stemcfg.username);","        } catch(e) {","            throw e;","        }","        // debugger","        $ionicLoading.show({template: 'Retrieving all my messages ...'});","        component.items = [];","        Usersthreads","        .mymessages({fromwho: ownerId, towho: null, text: null})","        .$promise","        .then(function(results) {","            populateItems(results);","        });","    }","","    component.loadMoreItems = function() {","        //TODO","    } //end of component.loadMoreItems","","","})","",".controller('toMessageCtrl', function($location, $ionicFilterBar, Users, $scope, StemFactory, StemService, $state) {","","    StemFactory.store('toMessagesCtrl', $scope);","    var component = this,","        items = [],","        filterBarInstance;","","    function getUsers() {","      Users","        .find()","        .$promise","        .then(function(results) {","            var scope = StemFactory.get('toMessagesCtrl');","            items = results;","            // console.log(items);","            component.items = items;","        });","    }","    getUsers();","","    component.showFilterBar = function () {","      filterBarInstance = $ionicFilterBar.show({","        items: component.items,","        update: function (filteredItems) {","          component.items = filteredItems;","        },","        filterProperties: 'name'","      });","    };","","    component.selectToMessage = function (item) {","        // debugger","        // StemService.alert('You picked ' + item.name + '!');","        $state.go('menu.newMessage', {id: item.id, name: item.name, email: item.email});","    };","","})","","<<<<<<< HEAD",".controller('questCtrl', function($ionicPopup, $state, $stateParams, $location, $scope,StemService,stemcfg, $resource, Quests) {","    StemService.handleInvalidSession($state, $scope, localStorage.getItem(stemcfg.userid), $ionicPopup, $stateParams.m);","    console.log('questCtrl called!');","","    var component = this;","    // component.items = Quests;","    $scope.items = [];","    function getQuests() {","console.log('questCtrl 1');","      Quests","        .find()","        .$promise","        .then(function(results) {","          component.items = results;","console.log('questCtrl 3 size ' + component.items.length);","        });","    }","    $scope.$on('$ionicView.enter', function(){","console.log('questCtrl 2');","        getQuests();","    });","","})","",".controller('questActivityCtrl', function($location, $scope,StemService,stemcfg) {","","})","",".controller('loginCtrl', function($ionicPopup, $location, $scope,$state,$stateParams,StemFactory,$ionicLoading,StemService,stemcfg, $ionicHistory, capi) {","=======",".controller('loginCtrl', function($ionicPopup, $location, $scope,$state,$stateParams,StemFactory,$ionicLoading,StemService,stemcfg, capi) {",">>>>>>> origin/quests","    // console.log($stateParams.m);","    // alert($stateParams.m);","","    StemFactory.store('loginCtrl', $scope);","    // StemService.handleInvalidSession($state, $scope, localStorage.getItem(stemcfg.userid), $ionicPopup, $stateParams.m);","    // debugger","    var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","// debugger","    // console.log('inside loginCtrl');","    // StemService.handleStateParams($stateParams, stemcfg);","    function purgeUsersData() {","        localStorage.removeItem(stemcfg.jwt);","        localStorage.removeItem(stemcfg.user);","        localStorage.removeItem(stemcfg.userid);","        localStorage.removeItem(stemcfg.username);","        localStorage.removeItem(stemcfg.useravatar);","        localStorage.removeItem(stemcfg.dfuser);","","        $ionicHistory.clearCache();","        $ionicHistory.clearHistory();","    }","    $scope.$on('$ionicView.enter', function(){","        purgeUsersData();","    });","    var that = this;","    var component = this;","","    component.createLocalUser = function(name, userEmail, cb) {","        function createNow(data) {","            function afterCreateNow(data) {","                console.log('handleResuls():');","                console.log(data);","                // debugger;","                //TODO need to upcate the localstorage user with the local user id for ionic!!!","                localStorage.setItem(stemcfg.userid, data.id);","                cb(data);  //proceed as usual (to landing page aka wall)","            }","            //TODO metadata is hardcodeded!","// id is 0!!!!","//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!","            var jsonData = {","                             \"id\": 0,","                             \"name\": name,","                             \"email\": userEmail,","                             \"studyid\": \"string\",","                             \"interests\": \"string\",","                             \"transplantdate\": StemService.getCurrentDate(),","                             \"startdate\": StemService.getCurrentDate(),","                             \"avatar\": \"string\",","                             \"state\": 0","                           };","            capi(webHost, '/api/Users', 'POST', 'model', 'method', jsonData, afterCreateNow, null);","            // capi(webHost, '/api/Users', 'POST', 'model', 'method', jsonData, afterCreateNow, null, 'swagger');","        }","        function handleExistingUser(data) {","            console.log('handleExistingUser data: ');","            console.log(data);","            // debugger","            if(typeof data.email !== 'undefined' && data.email === userEmail) {","                //TODO need to upcate the localstorage user with the local user id for ionic!!!","                localStorage.setItem(stemcfg.userid, data.id);  //TODO data.id is invalid if the duplicate exsist!??????","                //NOTES: we will never reach here as the fetch throws error if the user is not found!","                //do npthing!","                console.log(userEmail + ' exists locally!');","                component.afterCreateLocalUser(data);","            } else {","                createNow(data);","            }","        }","        var json = {\"where\": {\"email\": userEmail}};","        try {","            capi(webHost, '/api/Users/findOne?filter=' + StemService.toExplorerFilter(json), 'GET', 'model', 'method', {}, handleExistingUser, null);","        } catch(e) {","            //debugger","            throw e;","        }","    }","","    component.isAuthenticated = function() {","        console.log('controllers.js:isAuthenticated webHost [' + webHost + ']');","        // webHost = 'http://50.28.56.122:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3064'; //TODO - just for test - comment this out in production!!!","","        // console.log('loginCtrl:isAuthenticated called');","        // debugger","        var u = that.userId;","        var p = that.password;","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        var targetUrl = webHost + \"/explorer/swagger.json\";","        var msg = \"loginCtrl: connecting to openAPI [\" + targetUrl + \"] ...\";","        // document.getElementById(\"mydata\").innerHTML = msg;","        console.log(msg);","        $ionicLoading.show({template: 'Logging in ...'});","","        function authenticated(data) {","            var dfJSONResponse = data;","            // debugger","","            if(typeof data !== 'undefined' && data.data === '{\"status\":\"\"}') {","                var scope = StemFactory.get('loginCtrl');","                scope.$apply(function() {","                    //Tnvalid login","                    document.getElementById(\"mydata\").innerHTML = \"Invalid credentials.\";","                    $ionicLoading.hide();","                });","                return;","            }","","            var jsonStr;","            try {","                var d = JSON.parse(JSON.stringify(StemService.handleFetchResponse(dfJSONResponse)));","                if (StemService.isSwaggerClientResponse(data)) {","                    jsonStr = d.obj.status; //must be through Swagger-Client!","                } else {","                    jsonStr = d.status; //must be via HTTP Fetch","                }","            } catch (e) {","                StemService.alert('Serious system failure or communication error! Is the network up and running correctly?');","                return e;","            }","            var json = JSON.parse(JSON.stringify(jsonStr)); //ya, I know, JSON.stringify() is not needed in reality :(","            //TODO this is not the way   to do it! Is the JSON valid????","            // var start = \"token: \";","            // var start_user = \"user: \";","            if (typeof json === 'string') {","                json = JSON.parse(json); //this is more like a hack to make the mockup and the real response work together","            }","            var user_str = JSON.stringify(json.user); //json.substring(json.indexOf(start_user) + start_user.length+1, json.length-2);","            var user_avatar = '';","            // console.log('json.user = ');","            // console.log(JSON.parse(user_str));","            // debugger","            //=== save local user id (Accounts Synchronization)","            localStorage.setItem(stemcfg.dfuser, user_str);","            // localStorage.setItem(stemcfg.username, json.user.name);","            localStorage.setItem(stemcfg.username, json.user.first_name + json.user.last_name);","console.log('localStorage.getItem(stemcfg.username set to ' + localStorage.getItem(stemcfg.username));","            // debugger;","            localStorage.setItem(stemcfg.useravatar, user_avatar);","            // console.log(user_avatar);","","            //need to query the user id for the app!!!","            function printLocalUserId(data) {","                // debugger","                // localStorage.setItem(stemcfg.userid, data.id);  //TODO data.id is invalid if the duplicate exsist!","            }","            //TODO this probably should be moved to StemService","            component.getOwnerId = function(userEmail, cb) {","                var ret = -1;","                var json = {","                    \"where\": {","                        \"name\": userEmail","                    }","                };","","                function printOwnerId(data) {","                    console.log('/api/Users = ');","                    console.log(data);","                    console.log('owner id = ' + data[0].id);","                }","                //=== retrieve the logged in user's id","                // capi(webHost, '/api/Users?filter=' + encodeURIComponent(r), 'GET', 'model', 'method', {}, printOwnerId, null);","                capi(webHost, '/api/Users?filter=' + StemService.toExplorerFilter(json), 'GET', 'model', 'method', {}, cb, null);","","                return ret;","            }","            component.getOwnerId(localStorage.getItem(stemcfg.user), printLocalUserId);","            // document.getElementById(\"mydata\").innerHTML = \"\";","","            var token = json.jwtToken; //json.user.session_token;  //json.substring(json.indexOf(start) + start.length+1, json.length-2);","            // console.log('json token = [' + token + ']')","            if (typeof token !== 'undefined' && token.length > 5) {","                //   document.getElementById(\"mydata\").innerHTML = \"\";","                localStorage.setItem(stemcfg.jwt, token);","                // localStorage.setItem(stemcfg.username, json.user.name);","localStorage.setItem(stemcfg.username, json.user.first_name + json.user.last_name);","                localStorage.setItem(stemcfg.user, u);","            }","","            component.afterCreateLocalUser = function(data) {","                console.log(\"if authenticated, dfJSONResponse.obj.status should not be empty: dfJSONResponse.obj.status = \");","                console.log(StemService.handleFetchResponse(dfJSONResponse).status);","                // debugger","                if (StemService.handleFetchResponse(dfJSONResponse).status !== '') {","","                    if (jsonStr !== '') {","","                        $ionicLoading.hide();","                        $ionicHistory.clearCache();","                        $ionicHistory.clearHistory();","                        $state.go('menu.wall', {","                            id: u,","                            cache: false","                        });","                    }","                    // else {","                    //     document.getElementById(\"mydata\").innerHTML = \"Invalid credentials.\";","                    //     $ionicLoading.hide();","                    // } //StemService.handleFetchResponse(dfJSONResponse).status end","                } else {","                    scope.$apply(function() {","                        //Tnvalid login","                        document.getElementById(\"mydata\").innerHTML = \"Invalid credentials.\";","                        $ionicLoading.hide();","                    });","                }","            } //afterCreateLocalUser end","","            // debugger","            // if(StemService.handleFetchResponse(data).status !== \"\") {","            if (StemService.handleFetchResponse(dfJSONResponse).status !== \"\") {","                var name = localStorage.getItem(stemcfg.username);","                var email = u;","                // debugger","                component.createLocalUser(name, email, component.afterCreateLocalUser);","            } else {","                var scope = StemFactory.get('loginCtrl');","                scope.$apply(function() {","                    //Tnvalid login","                    document.getElementById(\"mydata\").innerHTML = \"Invalid credentials.\";","                    $ionicLoading.hide();","                });","            }","        } //authenticated end","","        capi(webHost, '/api/Users/login', 'POST', 'model', 'method', {userId: u, password: p}, authenticated, null, 'swagger');","        // capi(webHost, '/api/Users/login', 'POST', 'model', 'method', {userId: u, password: p}, authenticated, null);","    } //component.isAuthenticated end","})","","",".controller('wallCtrl', function($location, $scope, $ionicPopover, $ionicPopup, $ionicModal, $ionicLoading, StemFactory,StemService,stemcfg, $state, $stateParams, capi) {","    StemService.handleInvalidSession($state, $scope, localStorage.getItem(stemcfg.userid), $ionicPopup, $stateParams.m);","    StemFactory.store('wallCtrl', $scope);","    var component = this;","    component.postlabel = \"What's Happening?\";","","//TODO need to query the real db!","// component.activeavatar = localStorage.getItem(stemcfg.useravatar);","component.getOwnerAvatar = function(ownerName) {","    // debugger","    if(typeof ownerName !== 'undefined') {","        String.prototype.replaceAll = function(search, replacement) {","            var target = this;","            return target.replace(new RegExp(search, 'g'), replacement);","        };","        var ret = 'http://tipstech.org/sites/all/themes/savita/images/unknown-avatar.png';","        if(typeof ownerName !== 'undefined') {","            if(ownerName.toLowerCase().replaceAll(' ','') === 'ShiaLaBeouf'.toLowerCase()) {","                ret = 'http://avatarfiles.alphacoders.com/451/45172.jpg';","            } else","            if(ownerName.toLowerCase().replaceAll(' ','') === 'EmmaWatson'.toLowerCase()) {","                ret = 'http://avatarfiles.alphacoders.com/296/2961.jpg';","            } else","            if(ownerName.toLowerCase().replaceAll(' ','') === 'MrT'.toLowerCase()) {","                ret = 'http://avatarfiles.alphacoders.com/422/42208.png';","            }","        }","    }","","    // console.log('wall: component.getOwnerAvatar = ' + ret);","    return ret;","}","","    // console.log(StemService.getCurrentTime());","","    //just a test","    var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","    function putCount(data) {","        var currentTotalMessageCount = data.obj.count;","        console.log('capi: current message count is ' + currentTotalMessageCount);","    }","    capi(webHost, '/api/Messages/count', 'GET', 'model', 'method', {}, putCount, null, 'swagger');","","    component.getOwnerId = function(userEmail, cb) {","        var ret = -1;","        var json = {\"where\": {\"name\": userEmail}};","        function printOwnerId(data) {","            console.log('/api/Users = ');","            console.log(data);","            console.log('owner id = ' + data[0].id);","        }","        //=== retrieve the logged in user's id","        // capi(webHost, '/api/Users?filter=' + encodeURIComponent(r), 'GET', 'model', 'method', {}, printOwnerId, null);","        capi(webHost, '/api/Users?filter=' + StemService.toExplorerFilter(json), 'GET', 'model', 'method', {}, cb, null);","","        return ret;","    }","","    component.handleLikeCount = function(that) {","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        var targetUrl = webHost + \"/api/Flags\";","        var request = new Request(targetUrl, {","            headers: new Headers({","                'Accept': 'application/json'","            })","        });","        // var msg = \"wallCtrl:handleLikeCount() connecting to openAPI [\" + targetUrl + \"] ...\";","        // console.log(msg);","        fetch(request, {","            method: 'get'","        }).then(function(response) {","            response.json().then(function(data) {","              console.log(data);","            });","        }).catch(function(err) {","            // Error :(","            console.log('wallCtrl:handleLikeCount() ' + err);","        });","    }","","    component.getFlagByMessageId = function(data, msgId) {","        var ret;","        // debugger","        // console.log(\"12b =====================> component.getFlagByMessageId: searching in data [\");","        // console.log(data);","        // console.log('] by msgId [' + msgId + ']');","        for(var i=0; i<data.length; i++) {","            if(data[i].messages == msgId) {","                ret = data[i];","                // console.log(\"component.getFlagByMessageId() found: ret.messages [\" + ret.messages + ']');","                break;","            }","        }","        // console.log(\"component.getFlagByMessageId(): ret [\" + ret + ']');","        return ret;","    }","","    component.getOwner = function(text) {","        var ret;","        if(text.indexOf('by') > -1) {","            var s1 = text.indexOf('by');","            ret = text.substring(s1, text.length);","        }","        // console.log(\"component.getOwner() ret [\" + ret + ']');","        return ret;","    }","","    component.getFlagByMessageIdAndOwner = function(data, msgId, ownerId) {","        var ret;","        // debugger","        console.log(\"13 =====================> component.getFlagByMessageId: searching in data [\");","        console.log(data);","        console.log(']  by msgId [' + msgId + '] ownerId [' + ownerId + ']');","        var f1, f2;","        for(var i=0; i<data.length; i++) {  //TODO why is data.length is null here????","            if(data[i].messages == msgId) f1 = true;","            if(data[i].subject.indexOf(ownerId) > -1) f2 = true;  //TODO this has to be owner's id!","            // debugger","            if(f1 && f2) {","                ret = data[i];","                // console.log(\"component.getFlagByMessageIdAndOwner() found: ret.messages [\" + ret.messages + ']');","                break;","            }","            f1 = f2 = false;","        }","        // console.log(\"component.getFlagByMessageIdAndOwner(): ret [\" + ret + ']');","        return ret;","    }","","    component.saveLike = function(that, itemIndex) {","","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        var targetUrl = webHost + \"/explorer/swagger.json\";","        // var msg = \"wallCtrl:saveLike() connecting to openAPI [\" + targetUrl + \"] ...\";","        // console.log(msg);","","        function saveIt(data) {","            // console.log('saveIt(): data = ');","            // console.log(data);","            // console.log('saveIt(): owner id = ' + data[0].id);","            //swagger find existing flag based on a message/user begin","            //TODO the owner type need to be updated!","            var messageId = that.item.id;","            var ownerId;","            try {","                ownerId = localStorage.getItem(stemcfg.userid); //data[0].id;","            } catch(e) {","                console.log(data);","                throw e;","            }","            var json3 = {","                data: {","                    \"subject\": \"Like by \" + StemService.getUserName(stemcfg),","                    \"description\": \"favourite of a message\",","                    \"messages\": messageId,","                    \"owner\": ownerId","                }","            };","            // console.log('saveIt(): json3.data = ');","            // console.log(json3.data);","            // debugger","            var oldFlag;","            function updateUserFlags(data) {","                data.obj = data;  //support fetch","                // document.getElementById(\"mydata\").innerHTML = JSON.stringify(data.obj);","                var ownerName = StemService.getUserName(stemcfg);","                oldFlag = component.getFlagByMessageIdAndOwner(data.obj, that.item.id, ownerName);  //TODO for now, only the first one!","                if(typeof oldFlag !== 'undefined' && typeof oldFlag.id !== 'undefined') {","                    if(json3.data.messages == oldFlag.messages) {","                        json3.data = oldFlag;","                    }","                    else {","                        json3.data.id = 0;","                        //=== musy be a new flag!","                    }","                } else {","                    json3.data.id = 0;","                    //=== musy be a new flag!","                }","                json3.data.state = !json3.data.state;","json3 = json3.data;  //support fetch","","                function updateLikeUI(data) {","                    var scope = StemFactory.get('wallCtrl');","                    var oldFlag;","                    function updateMessageLikeCount(data) {","                        // console.log(\"capi: 12c =====================> after Messages.Messages_find: data.obj.messages\");","                        // document.getElementById(\"mydata\").innerHTML = JSON.stringify(data.obj);","                        // console.log(data.obj);","                        var json4 = { data: '' };","// var currentFlag = json3.data.state;","var currentFlag = json3.state;  //support http fetch","","// var oldMessage = data.obj;","var oldMessage = data;  //support http fetch","                        oldMessage.liked = currentFlag?\"true\":\"false\";","                        json4.data = oldMessage;","                        if(currentFlag) {","                            json4.data.likecount = json4.data.likecount + 1;","                        } else {","                            json4.data.likecount = json4.data.likecount - 1;","                        }","json4 = json4.data;  //support fetch","                        // msg = \"wallCtrl:saveLike() Messages_findById state\";","                        // console.log(msg);","                        // console.log(json4.data.state);","                        function updateItem(data) {","                            // msg = \"capi: wallCtrl:saveLike() after Messages_upsert\";","                            // console.log(msg);","                            // console.log(data);","                            var scope = StemFactory.get('wallCtrl');","                            scope.$apply(function () {","// debugger","                                //copy all values into data and update only the like count","                                var temp = data.likecount;","                                data = component.items[itemIndex];","                                data.likecount = temp;","                                if(currentFlag) {","                                    data.loggedinuserliked = 1;","                                } else {","                                    data.loggedinuserliked = 0;","                                }","                                // component.items.splice(itemIndex, 1, data.obj);","                                component.items.splice(itemIndex, 1, data);  //support fetch","                            });","                        }","                        capi(webHost, '/api/Messages', 'PUT', 'model', 'method', json4, updateItem, null);","                    }","                    capi(webHost, `/api/Messages/${messageId}`, 'GET', 'model', 'method', {\"id\": messageId}, updateMessageLikeCount, null);","                }","                capi(webHost, '/api/Flags', 'PUT', 'model', 'method', json3, updateLikeUI, null);","            } //updateFlags end","            // capi(webHost, '/api/Flags', 'GET', 'model', 'method', json3, updateUserFlags, null, 'swagger');","            capi(webHost, '/api/Flags', 'GET', 'model', 'method', json3, updateUserFlags, null);","        } //saveIt end","","        component.getOwnerId(localStorage.getItem(stemcfg.user), saveIt);","    } //component.saveLike end","","    // component.processingMessage = \"Retrieving the messages ...\";","    $ionicLoading.show({template: 'Retrieving the messages ...'});","    var currentStart = 0;","    var loadItemsLimit = 20;","    component.items = [];","","","    $scope.showPopup = function() {","      $scope.data = {}","","    var myPopup = $ionicPopup.show({","      template: '<textarea></textarea>',","      title: 'Post Comment',","      subTitle: 'Please use normal things',","      scope: $scope,","      buttons: [","        { text: 'Cancel' },","        {","          text: '<b>Reply</b>',","          type: 'button-energized',","          onTap: function(e) {","            if (!$scope.data.wifi) {","              //don't allow the user to close unless he enters wifi password","              e.preventDefault();","            } else {","              return $scope.data.wifi;","            }","          }","        }","      ]","    });","","}","","","    // .fromTemplate() method","    var template = `","    <ion-popover-view>","    <ion-header-bar>","        <h1 class=\"title\">My Popover Title</h1>","    </ion-header-bar>","    <ion-content>","        Hello!","    </ion-content>","    </ion-popover-view>`;","","// === Topic Modal","","//   $ionicModal.fromTemplateUrl('templates/newTopic.html', {","//   scope: $scope,","//   animation: 'slide-in-up'","// }).then(function(modal) {","//   $scope.modal = modal;","// });","// $scope.openModal = function() {","//   $scope.modal.show();","// };","// $scope.closeModal = function() {","// //   debugger","//   $scope.modal.hide();","// };","// Cleanup the modal when we're done with it!","// $scope.$on('$destroy', function() {","//   $scope.modal.remove();","// });","// // Execute action on hide modal","// $scope.$on('modal.hidden', function() {","//   // Execute action","// });","// // Execute action on remove modal","// $scope.$on('modal.removed', function() {","//   // Execute action","// });","","","","    //=== popover textarea field","    // component.item1 = '';","    // console.log('wallCtrl: component.item1 reset to [' + component.item1 + '] component.item1:');","    // console.log(component.item1);","    $scope.popover = $ionicPopover.fromTemplate(template, {","        scope: $scope","    });","","    // .fromTemplateUrl() method","    $ionicPopover.fromTemplateUrl('templates/wallModalComment.html', {","        scope: $scope","    }).then(function(popover) {","        $scope.popover = popover;","    });","","    $scope.openPostSettings = function($event) {","      //  $scope.messageowner = localStorage.getItem(stemcfg.user);","        // $scope.messagetype = stemcfg.messagetype1 + id;  //TODO need to concatenate owner + timestamp","        // console.log('message type set to [' + $scope.messagetype + ']');","        $scope.openPopover($event);","    }","","    $scope.openPostComment = function($event) {","        $scope.messageowner = localStorage.getItem(stemcfg.user);","        // $scope.messagetype = stemcfg.messagetype1 + id;  //TODO need to concatenate owner + timestamp","        // console.log('message type set to [' + $scope.messagetype + ']');","        $scope.openPopover($event);","        // debugger","    }","","    $ionicModal.fromTemplateUrl('templates/wallModalPost.html', function(modal) {","            $scope.modal = modal;","    }, {","        // Use our scope for the scope of the modal to keep it simple","        scope: $scope,","        // The animation we want to use for the modal entrance","        animation: 'slide-in-up'","    });","    $scope.openModal = function(item) {","        component.item1 = ''; //clear the textarea","        // debugger","        if(typeof item !== 'undefined') {","            component.postlabel = stemcfg.replytopiclabel;","            $scope.messageowner = item.owner;","            $scope.messagetype = stemcfg.messagetype1 + component.getTopicId(item);  //TODO need to get the type of the (thread) topic over here","            console.log('REPLY: message type set to [' + $scope.messagetype + '] $scope.messageowner [' + $scope.messageowner + ']');","        } else {","            component.postlabel = stemcfg.newtopiclabel;","            $scope.messageowner = localStorage.getItem(stemcfg.userid);","            $scope.messagetype = undefined;   //has to be undefined to be treated as a POST!!!","            console.log('POST: message type set to [' + $scope.messagetype + '] $scope.messageowner [' + $scope.messageowner + ']');","        }","        $scope.modal.show();","    };","    $scope.closeModal = function() {","        // debugger","        $scope.modal.hide();","    };","","    $scope.openReplyTo = function($event, item) {","        $scope.messageowner = item.owner;","        $scope.messagetype = stemcfg.messagetype1 + component.getTopicId(item);  //TODO need to get the type of the (thread) topic over here","        console.log('message type set to [' + $scope.messagetype + ']');","        $scope.openPopover($event, $scope.messagetype);","    }","","    $scope.openPopover = function($event, id) {","        $scope.popover.show($event);","            console.log('controller.js $scope.openPopover id = ' + id);","        };","        $scope.closePopover = function() {","            $scope.popover.hide();","        };","        //Cleanup the popover when we're done with it!","        $scope.$on('$destroy', function() {","        $scope.popover.remove();","    });","    // Execute action on hide popover","    $scope.$on('popover.hidden', function() {","        // component.popover.hide();  //Warning: do not need to call this again! It will throw \"app.js angular exception: Maximum call stack size exceeded (caused by undefined) after hiding the popover\"!!!","        // Do only any cleanup if needed in here","    });","    // Execute action on remove popover","    $scope.$on('popover.removed', function() {","        // Execute action","    });","","    component.getTopicId = function(item) {","        var ret = item.threadid;","","        return ret;","    };","","    component.getStyle = function(item) {","        var ret = {height: '300px'};","","        if(component.isTopicOwner(item)) {","            ret = {height: '300px'};","        }","","        // console.log('controllers.js:component.getItemCSSClass [' + ret + '] item.type [' + item.type + \"]\");","    //   return ret;  //Notes: @mayowa uncomment this to see the gap","    };","","    component.isTopicOwner = function(item) {","        var ret = false;","        if(typeof item !== 'undefined' && item.type.indexOf('topic') > -1 && item.type.indexOf('owner') > -1) {","            ret = true;","        }","","        // console.log('controllers.js:component.isTopicOwner [' + ret + '] item.type [' + item.type + \"]\");","        return ret;","    };","","    //***Notes: This function is not for \"pull to refresh\" as it does not reload the items, it just add a new item to it!","    //*** It is designed for \"infinite scrolling\"!","    component.loadMoreItems = function() {","        $scope.hasMoreData = false;","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        // console.log('controllers.js:loadMoreItems webHost [' + webHost + ']');","        // var webHost = stemcfg.webhost;","        // webHost = 'http://50.28.56.122:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3064'; //TODO - just for test - comment this out in production!!!","","        var targetUrl = webHost + \"/explorer/swagger.json\";","        var msg = \"wallCtrl:loadMoreItems() connecting to openAPI [\" + targetUrl + \"] ...\";","        // document.getElementById(\"mydata\").innerHTML = msg;","        // console.log(msg);","","        function wallLoaded(data) {","            //   console.log(data);","            //   document.getElementById(\"mydata\").innerHTML = JSON.stringify(data.obj.wall);","            data.obj = data.obj && data.obj.wall || data.wall; //support fetch","            var scope = StemFactory.get('wallCtrl');","            // debugger","            if (typeof scope !== 'undefined') {","            scope.$apply(function () {","              component.addItems = function () {","                if (currentStart < loadItemsLimit && currentStart < data.obj.length) {","                  for (var i = currentStart; i < loadItemsLimit; i++) {","","                    var w = 100 + Math.floor(Math.random() * 200);","                    w -= w % 5;","","                    var h = 100 + Math.floor(Math.random() * 200);","                    h -= h % 5;","","","                    if (i < data.obj.length) {","                        component.items.push(","","                          // {height: h},","","                          data.obj[i]);","                        currentStart += 1;","                      // console.log('wallCtrl pushed item ' + i);","                    }","                  }","                }","","                // $scope.$broadcast('scroll.infiniteScrollComplete');   //NB: this is required!!!","                // console.log('wallCtrl scroll.infiniteScrollComplete: list size [' + component.items.length + '] currentStart [' + currentStart + ']');","              }","","              component.addItems();","              // component.items = data.obj;","              //console.log('wallCtrl Messages_ size ' + component.items.length);","              // gitems = component.items;","              // component.processingMessage = \"\";   //done!","              $ionicLoading.hide();","              $scope.$broadcast('scroll.infiniteScrollComplete');","              $scope.hasMoreData = true;","            });","            }","        }","        //=== retrieve all wall messages","        var loggedinuser = localStorage.getItem(stemcfg.userid);","        // capi(webHost, '/api/Threads/wall', 'GET', 'model', 'method', {}, wallLoaded, null, 'swagger');","        capi(webHost, `/api/Threads/wall?loggedinuser=${loggedinuser}`, 'GET', 'model', 'method', {}, wallLoaded, null);","    } //end of component.loadMoreItems","","    component.loadMoreItems();","","    //=== TODO currently not used","    component.postMessage = function() {","        component.createMessage();","    };","","    component.replyMessage = function(item) {","        component.createMessage(item);","    };","    //=== TODO currently not used","","","    // component.testload = function() {","    //     $scope.messagetype = undefined;","    //     currentStart = 0;","    //     loadItemsLimit = 1;","    //     component.items1 = [];","    //     // for (var i = 0; i < 1; i++) {","    //     var i = 0;","    //         component.items1.push(component.items[i]);","    //     // }","    //     console.log(component.items1);","    //     component.items = [];","    //     component.items = component.items1;","    //     // component.loadMoreItems();","    //     $scope.$broadcast('scroll.refreshComplete');","    // };","","    component.reload = function() {","        $scope.messagetype = undefined;","        currentStart = 0;","        loadItemsLimit = 20;","        component.items = [];","        component.loadMoreItems();","        $scope.$broadcast('scroll.refreshComplete');","    };","","    component.createMessage = function(item) {","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        // webHost = 'http://50.28.56.122:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3064'; //TODO - just for test - comment this out in production!!!","        var targetUrl = webHost + \"/explorer/swagger.json\";","        // var values = component;","        console.log('wallCtrl controller createMessage() item [' + JSON.stringify(item) + ']');","// console.log('1.1 <----------------------------------------------');","","        //swagge2 begin","        // console.log('controllers.js createMessage(): message type is [' + $scope.messagetype + ']');","        //TODO 2-23 owner has to be mapped to the user's name","        //TODO create date has to be the current date!","        var json2 = {","            data: {","              \"id\": 0,","              \"subject\": \"Message by \" + StemService.getUserName(stemcfg),","              \"text\": item,","              \"liked\": \"false\",","              \"state\": \"Public\",","              \"type\": $scope.messagetype||\"NA\",","              \"owner\": localStorage.getItem(stemcfg.userid),","              \"likecount\": 0","            }","        };","","        function afterMessageCreate(data) {","// console.log('1.2 <---------------------------------------------- data:');","// console.log(data);","// console.log('1.3 <---------------------------------------------- item:');","// console.log(item);","            if(data.obj.text == item) {  //TODO need a proper status code to indicate it's a success!!!?","                var oldMessage = data.obj;","// console.log('1.4 <---------------------------------------------- data.obj.id:');","// console.log(data.obj.id);","                var msgId = data.obj.id;","                var json1 = {","                    data: {","                      \"id\": 0,","                      \"messages\": data.obj.id","                    }","                };","                function afterThreadCreate(data) {","// console.log(\"2.1 =====================> after Messages.Messages_create: data.obj.messages\");","// console.log('2.2 <---------------------------------------------- data:');","// console.log(data);","// console.log('2.3 <---------------------------------------------- msgId:');","// console.log(msgId);","                    if(data.obj.messages == msgId) {  //TODO need a proper status code to indicate it's a success!!!?","                        var newType;","                        var threadId = data.obj.id;","                        if(typeof $scope.messagetype === 'undefined') {","                            newType = 'topic' + threadId + '-owner';","                            oldMessage.type = newType;","                        } else {","                            newType = $scope.messagetype;","                            oldMessage.type = newType;","                        }","","                        // console.log(\"2 =====================> before Messages.Messages_upsert: oldMessage\");","                        // console.log(oldMessage);","// json2.data = oldMessage;","json2 = oldMessage;","                        function updateChangedMessage(data) {","                            // document.getElementById(\"mydata\").innerHTML = JSON.stringify(data.obj);","// console.log(\"3.1 =====================> after Messages.Messages_upsert: data.obj.text\");","// console.log(data.obj.text);","// console.log('3.2 <---------------------------------------------- item:');","// console.log(item);","// debugger","                            // if(data.obj.text == item) {  //TODO need a proper status code to indicate it's a success!!!?","                            if(data.text == item) {  //TODO need a proper status code to indicate it's a success!!!?","                            // console.log(\"4 =====================> after Threads.Threads_create: Thread\");","                            // console.log(data.obj);","                            // return","                            // console.log('controllers.js: closing popover ...');","                            // component.item1 = '';","                            // console.log('wallCtrl: 2 component.item1 reset to [' + component.item1 + '] component.item1:');","                            // console.log(component.item1);","                            //$scope.$broadcast('popover.hidden');","                            // $scope.closePopover();","                            $scope.closeModal();","                            // console.log('popover should be closed!');","                            component.reload();  //TODO do we really need to reload????","                            // component.loadMoreItems();  //TODO buggy","                            } //end of data.obj.text == item","                        }","                        capi(webHost, '/api/Messages', 'PUT', 'model', 'method', json2, updateChangedMessage, null);","                    } //end of data.obj.messages == msgId","                } //afterThreadCreate end","                capi(webHost, '/api/Threads', 'POST', 'model', 'method', json1, afterThreadCreate, null, 'swagger');","            } //data.obj.text == item end","        } //afterMessageCreate end","        capi(webHost, '/api/Messages', 'POST', 'model', 'method', json2, afterMessageCreate, null, 'swagger');","    } //component.createMessage end","","    //Notes: @mayowa","    component.getStyleByFlagState = function(item, index) {","        var ret;","        // console.log('controller.js likeStyleByFlagState: item (Message)');","        // console.log(item);","        // debugger","        // if(item.likecount > 0) {","        if(item.loggedinuserliked == 1) {","            console.log('item.loggedinuserliked = ' + item.loggedinuserliked);","            ret = 'button button-icon icon ion-ios-heart energized icon-left';","            // console.log('controllers.js component.likeStyleByFlagState state 1');","        } else {","            ret = 'button button-icon icon energized ion-ios-heart-outline icon-left';","            // console.log('controllers.js component.likeStyleByFlagState state 0');","        }","        return ret;","    };","","","    component.messageStyleByMessageType = function(item) {","        var ret;","        // debugger","        // console.log(item);","        if(typeof item !== 'undefined' && typeof item.type !== 'undefined' && item.type.indexOf('owner') > -1) {","            ret = 'wall-new-message';","            // console.log('controllers.js component.messageStyleByMessageType type topic');","        } else {","            ret = 'wall-replied-message';","            // console.log('controllers.js component.messageStyleByMessageType type comment');","        }","        return ret;","    };","","    component.buttonStyleByMessageType = function(item) {","        var ret;","        // debugger","        // console.log(item);","        if(item.type === 'comment') {","            ret = 'wall-reply-to-button';","            // console.log('controllers.js component.buttonStyleByMessageType type comment');","        } else {","            ret = '';","            // console.log('controllers.js component.buttonStyleByMessageType type topic');","        }","        return ret;","    };","","})"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":1184,"column":0}},"nl":"\r\n","lines":["'use strict';","","var gitems;   //just for test","","/**","Usesful SQLs:","","select sum(a.quests), sum(a.powerups), sum(a.usersthreads), sum(a.threads), sum(a.flags), sum(a.messages) from (","select count(*) as usersthreads,0 as threads,0 as flags,0 as messages,0 as users,0 as quests, 0 as powerups from usersthreads","union","select 0,count(*),0,0,0,0,0 from threads","union","select 0,0,count(*),0,0,0,0 from flags","union","select 0,0,0,count(*),0,0,0 from messages","union","select 0,0,0,0,count(*),0,0 from users","union","select 0,0,0,0,0,count(*),0 from quests","union","select 0,0,0,0,0,0,count(*) from powerups",") a","","Note: a space after -- is required!","-- delete from usersthreads;","-- delete from threads;","-- delete from flags;","-- delete from messages;","-- delete from users;","-- delete from powerups;","","Useful Explorer filter:","","GET /Questspowerups","{\"where\": {\"questsid\": 1}}","{\"where\": {\"powerupsid\": 1}}","GET /Users","{\"where\": {\"name\": \"user1@gmail.com\"}}","GET /Quests","{\"include\": \"powerups\"}","GET /Powerups","{\"where\": {\"point\": 11}}","GET /Flags","{\"where\": {\"messages\": 45, \"owner\": 28}}","","References:","","https://github.com/urish/angular-moment","*/","angular.module('app.controllers', ['controller.quests','controller.powerups'])","",".controller('newMessageCtrl', function($location, $ionicFilterBar, Users, $scope, stemcfg, StemFactory, StemService, $state, $stateParams, capi) {","    StemFactory.store('newMessagesCtrl', $scope);","    var component = this;","    var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","","    //=== retrieve id selected by toMessage (i.e. private message recipient!)","    component.recipientId = $stateParams.id;","    component.recipientName = $stateParams.name;","    component.recipientEmail = $stateParams.email;","","    component.sendMessage = function(id, name, email) {","        var fromwhoId = localStorage.getItem(stemcfg.userid);","        var fromwhoName = localStorage.getItem(stemcfg.username);","        var fromwhoEmail = localStorage.getItem(stemcfg.user);","        var towhoId = component.recipientId;","        var towhoName = name;","        var towhoEmail = email;","        var json = {","            id: 0,","            fromwhoId: fromwhoId,","            fromwhoName: fromwhoName,","            fromwhoEmail: fromwhoEmail,","            towhoId: towhoId,","            towhoName: towhoName,","            towhoEmail: towhoEmail,","            text: component.text","        };","        component.createMessage(json);","    };","","    component.createMessage = function(json) {","        function afterPrivateMessageCreate(data) {","            // debugger","            // if(StemService.hasError(data)) {","                console.log(JSON.stringify(data));","                // StemService.alert(JSON.stringify(data));","            // } else {","                StemService.alert('Message sent to ' + component.recipientName + '!');","            // }","            // console.log('/api/UsersThreads sent!');","        }","        console.log('json = ' + json);","        capi(webHost, '/api/UsersThreads/sendmessage', 'POST', 'model', 'method', json, afterPrivateMessageCreate, null);","    }","","","})","",".controller('myMessagesThreadsCtrl', function($ionicFilterBar, Usersthreads, Users, Threads, $scope, StemFactory, StemService, $state, stemcfg, $ionicLoading) {","    StemFactory.store('myMessagesThreadsCtrl', $scope);","    var component = this;","    // console.log($stateParams.id);","    // console.log($stateParams.towho);","    console.log($state.params.id);","    console.log($state.params.towho);","    component.id = $state.params.towho;","","    $scope.$on('$ionicView.enter', function(){","        $ionicLoading.show({template: `Retrieving all the private messages sent to ${component.id}...`});","        getInbox();","    });","","    function populateInbox(results) {","        // console.log(results);","        component.items = [];","        var loadItemsLimit = results.inbox.length;","        // debugger","        for (var i = 0; i < loadItemsLimit; i++) {","            component.items.push(results.inbox[i]);","            // console.log(component.items[i]);","        }","        $ionicLoading.hide();","    }","","    function getInbox() {","        Usersthreads","        .inbox({id: 0})","        .$promise","        .then(function(results) {","            populateInbox(results);","        });","    }","","    component.loadMoreItems = function() {","        //TODO","    } //end of component.loadMoreItems","","","})","",".controller('myMessagesCtrl', function($ionicPopup, $ionicFilterBar, Usersthreads, Users, Threads, $scope, StemFactory, $stateParams, StemService, $state, stemcfg, $ionicLoading) {","    StemFactory.store('myMessagesCtrl', $scope);","    StemService.handleInvalidSession($state, $scope, localStorage.getItem(stemcfg.userid), $ionicPopup, $stateParams.m);","    var component = this;","    // console.log($stateParams.towho);","    // console.log($state.params);","","    $scope.$on('$ionicView.enter', function(){","        $ionicLoading.show({template: `Retrieving all the private messages sent to ${component.id}...`});","        getItems();","    });","","    function populateItems(results) {","        console.log(results);","        var loadItemsLimit = results.messages.length;","        // debugger","        for (var i = 0; i < loadItemsLimit; i++) {","            var item = results.messages[i];","            // if(item.subject.indexOf('Message from ' + item.towho) > -1) {","            //     item.source = 'Received from: ' + item.towho;","            //     // item.source = 'Received from: ' + item.fromwho + ' to ' + item.towho;","            // }","            // else","            if(item.subject.indexOf('to ' + item.towho) > -1) {","                if(item.towho === localStorage.getItem(stemcfg.username)) {","                    // item.source = 'Sent to: ' + item.fromwho + ' to ' + item.towho;","                    item.source = 'Received from: ' + item.fromwho;","                } else {","                    item.source = 'Sent to: ' + item.towho;","                }","            }","            component.items.push(item);","            // console.log(item);","        }","        $ionicLoading.hide();","    }","    function getItems() {","        var ownerId;","        try {","            ownerId = localStorage.getItem(stemcfg.username);","        } catch(e) {","            throw e;","        }","        // debugger","        $ionicLoading.show({template: 'Retrieving all my messages ...'});","        component.items = [];","        Usersthreads","        .mymessages({fromwho: ownerId, towho: null, text: null})","        .$promise","        .then(function(results) {","            populateItems(results);","        });","    }","","    component.loadMoreItems = function() {","        //TODO","    } //end of component.loadMoreItems","","","})","",".controller('toMessageCtrl', function($location, $ionicFilterBar, Users, $scope, StemFactory, StemService, $state) {","","    StemFactory.store('toMessagesCtrl', $scope);","    var component = this,","        items = [],","        filterBarInstance;","","    function getUsers() {","      Users","        .find()","        .$promise","        .then(function(results) {","            var scope = StemFactory.get('toMessagesCtrl');","            items = results;","            // console.log(items);","            component.items = items;","        });","    }","    getUsers();","","    component.showFilterBar = function () {","      filterBarInstance = $ionicFilterBar.show({","        items: component.items,","        update: function (filteredItems) {","          component.items = filteredItems;","        },","        filterProperties: 'name'","      });","    };","","    component.selectToMessage = function (item) {","        // debugger","        // StemService.alert('You picked ' + item.name + '!');","        $state.go('menu.newMessage', {id: item.id, name: item.name, email: item.email});","    };","","})","",".controller('questCtrl', function($ionicPopup, $state, $stateParams, $location, $scope,StemService,stemcfg, $resource, Quests) {","    StemService.handleInvalidSession($state, $scope, localStorage.getItem(stemcfg.userid), $ionicPopup, $stateParams.m);","    console.log('questCtrl called!');","","    var component = this;","    // component.items = Quests;","    $scope.items = [];","    function getQuests() {","console.log('questCtrl 1');","      Quests","        .find()","        .$promise","        .then(function(results) {","          component.items = results;","console.log('questCtrl 3 size ' + component.items.length);","        });","    }","    $scope.$on('$ionicView.enter', function(){","console.log('questCtrl 2');","        getQuests();","    });","","})","",".controller('questActivityCtrl', function($location, $scope,StemService,stemcfg) {","","})","",".controller('loginCtrl', function($ionicPopup, $location, $scope,$state,$stateParams,StemFactory,$ionicLoading,StemService,stemcfg, $ionicHistory, capi) {","    // console.log($stateParams.m);","    // alert($stateParams.m);","","    StemFactory.store('loginCtrl', $scope);","","    // StemService.handleInvalidSession($state, $scope, localStorage.getItem(stemcfg.userid), $ionicPopup, $stateParams.m);","    // debugger","    var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","// debugger","    // console.log('inside loginCtrl');","    // StemService.handleStateParams($stateParams, stemcfg);","    function purgeUsersData() {","        localStorage.removeItem(stemcfg.jwt);","        localStorage.removeItem(stemcfg.user);","        localStorage.removeItem(stemcfg.userid);","        localStorage.removeItem(stemcfg.username);","        localStorage.removeItem(stemcfg.useravatar);","        localStorage.removeItem(stemcfg.dfuser);","","        $ionicHistory.clearCache();","        $ionicHistory.clearHistory();","    }","    $scope.$on('$ionicView.enter', function(){","        purgeUsersData();","    });","    var that = this;","    var component = this;","","    component.createLocalUser = function(name, userEmail, cb) {","        function createNow(data) {","            function afterCreateNow(data) {","                console.log('handleResuls():');","                console.log(data);","                // debugger;","                //TODO need to upcate the localstorage user with the local user id for ionic!!!","                localStorage.setItem(stemcfg.userid, data.id);","                cb(data);  //proceed as usual (to landing page aka wall)","            }","            //TODO metadata is hardcodeded!","// id is 0!!!!","//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!","            var jsonData = {","                             \"id\": 0,","                             \"name\": name,","                             \"email\": userEmail,","                             \"studyid\": \"string\",","                             \"interests\": \"string\",","                             \"transplantdate\": StemService.getCurrentDate(),","                             \"startdate\": StemService.getCurrentDate(),","                             \"avatar\": \"string\",","                             \"state\": 0","                           };","            capi(webHost, '/api/Users', 'POST', 'model', 'method', jsonData, afterCreateNow, null);","            // capi(webHost, '/api/Users', 'POST', 'model', 'method', jsonData, afterCreateNow, null, 'swagger');","        }","        function handleExistingUser(data) {","            console.log('handleExistingUser data: ');","            console.log(data);","            // debugger","            if(typeof data.email !== 'undefined' && data.email === userEmail) {","                //TODO need to upcate the localstorage user with the local user id for ionic!!!","                localStorage.setItem(stemcfg.userid, data.id);  //TODO data.id is invalid if the duplicate exsist!??????","                //NOTES: we will never reach here as the fetch throws error if the user is not found!","                //do npthing!","                console.log(userEmail + ' exists locally!');","                component.afterCreateLocalUser(data);","            } else {","                createNow(data);","            }","        }","        var json = {\"where\": {\"email\": userEmail}};","        try {","            capi(webHost, '/api/Users/findOne?filter=' + StemService.toExplorerFilter(json), 'GET', 'model', 'method', {}, handleExistingUser, null);","        } catch(e) {","            //debugger","            throw e;","        }","    }","","    component.isAuthenticated = function() {","        console.log('controllers.js:isAuthenticated webHost [' + webHost + ']');","        // webHost = 'http://50.28.56.122:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3064'; //TODO - just for test - comment this out in production!!!","","        // console.log('loginCtrl:isAuthenticated called');","        // debugger","        var u = that.userId;","        var p = that.password;","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        var targetUrl = webHost + \"/explorer/swagger.json\";","        var msg = \"loginCtrl: connecting to openAPI [\" + targetUrl + \"] ...\";","        // document.getElementById(\"mydata\").innerHTML = msg;","        console.log(msg);","        $ionicLoading.show({template: 'Logging in ...'});","","        function authenticated(data) {","            var dfJSONResponse = data;","            // debugger","","            if(typeof data !== 'undefined' && data.data === '{\"status\":\"\"}') {","                var scope = StemFactory.get('loginCtrl');","                scope.$apply(function() {","                    //Tnvalid login","                    document.getElementById(\"mydata\").innerHTML = \"Invalid credentials.\";","                    $ionicLoading.hide();","                });","                return;","            }","","            var jsonStr;","            try {","                var d = JSON.parse(JSON.stringify(StemService.handleFetchResponse(dfJSONResponse)));","                if (StemService.isSwaggerClientResponse(data)) {","                    jsonStr = d.obj.status; //must be through Swagger-Client!","                } else {","                    jsonStr = d.status; //must be via HTTP Fetch","                }","            } catch (e) {","                StemService.alert('Serious system failure or communication error! Is the network up and running correctly?');","                return e;","            }","            var json = JSON.parse(JSON.stringify(jsonStr)); //ya, I know, JSON.stringify() is not needed in reality :(","            //TODO this is not the way   to do it! Is the JSON valid????","            // var start = \"token: \";","            // var start_user = \"user: \";","            if (typeof json === 'string') {","                json = JSON.parse(json); //this is more like a hack to make the mockup and the real response work together","            }","            var user_str = JSON.stringify(json.user); //json.substring(json.indexOf(start_user) + start_user.length+1, json.length-2);","            var user_avatar = '';","            // console.log('json.user = ');","            // console.log(JSON.parse(user_str));","            // debugger","            //=== save local user id (Accounts Synchronization)","            localStorage.setItem(stemcfg.dfuser, user_str);","            // localStorage.setItem(stemcfg.username, json.user.name);","            localStorage.setItem(stemcfg.username, json.user.first_name + json.user.last_name);","console.log('localStorage.getItem(stemcfg.username set to ' + localStorage.getItem(stemcfg.username));","            // debugger;","            localStorage.setItem(stemcfg.useravatar, user_avatar);","            // console.log(user_avatar);","","            //need to query the user id for the app!!!","            function printLocalUserId(data) {","                // debugger","                // localStorage.setItem(stemcfg.userid, data.id);  //TODO data.id is invalid if the duplicate exsist!","            }","            //TODO this probably should be moved to StemService","            component.getOwnerId = function(userEmail, cb) {","                var ret = -1;","                var json = {","                    \"where\": {","                        \"name\": userEmail","                    }","                };","","                function printOwnerId(data) {","                    console.log('/api/Users = ');","                    console.log(data);","                    console.log('owner id = ' + data[0].id);","                }","                //=== retrieve the logged in user's id","                // capi(webHost, '/api/Users?filter=' + encodeURIComponent(r), 'GET', 'model', 'method', {}, printOwnerId, null);","                capi(webHost, '/api/Users?filter=' + StemService.toExplorerFilter(json), 'GET', 'model', 'method', {}, cb, null);","","                return ret;","            }","            component.getOwnerId(localStorage.getItem(stemcfg.user), printLocalUserId);","            // document.getElementById(\"mydata\").innerHTML = \"\";","","            var token = json.jwtToken; //json.user.session_token;  //json.substring(json.indexOf(start) + start.length+1, json.length-2);","            // console.log('json token = [' + token + ']')","            if (typeof token !== 'undefined' && token.length > 5) {","                //   document.getElementById(\"mydata\").innerHTML = \"\";","                localStorage.setItem(stemcfg.jwt, token);","                // localStorage.setItem(stemcfg.username, json.user.name);","localStorage.setItem(stemcfg.username, json.user.first_name + json.user.last_name);","                localStorage.setItem(stemcfg.user, u);","            }","","            component.afterCreateLocalUser = function(data) {","                console.log(\"if authenticated, dfJSONResponse.obj.status should not be empty: dfJSONResponse.obj.status = \");","                console.log(StemService.handleFetchResponse(dfJSONResponse).status);","                // debugger","                if (StemService.handleFetchResponse(dfJSONResponse).status !== '') {","","                    if (jsonStr !== '') {","","                        $ionicLoading.hide();","                        $ionicHistory.clearCache();","                        $ionicHistory.clearHistory();","                        $state.go('menu.wall', {","                            id: u,","                            cache: false","                        });","                    }","                    // else {","                    //     document.getElementById(\"mydata\").innerHTML = \"Invalid credentials.\";","                    //     $ionicLoading.hide();","                    // } //StemService.handleFetchResponse(dfJSONResponse).status end","                } else {","                    scope.$apply(function() {","                        //Tnvalid login","                        document.getElementById(\"mydata\").innerHTML = \"Invalid credentials.\";","                        $ionicLoading.hide();","                    });","                }","            } //afterCreateLocalUser end","","            // debugger","            // if(StemService.handleFetchResponse(data).status !== \"\") {","            if (StemService.handleFetchResponse(dfJSONResponse).status !== \"\") {","                var name = localStorage.getItem(stemcfg.username);","                var email = u;","                // debugger","                component.createLocalUser(name, email, component.afterCreateLocalUser);","            } else {","                var scope = StemFactory.get('loginCtrl');","                scope.$apply(function() {","                    //Tnvalid login","                    document.getElementById(\"mydata\").innerHTML = \"Invalid credentials.\";","                    $ionicLoading.hide();","                });","            }","        } //authenticated end","","        capi(webHost, '/api/Users/login', 'POST', 'model', 'method', {userId: u, password: p}, authenticated, null, 'swagger');","        // capi(webHost, '/api/Users/login', 'POST', 'model', 'method', {userId: u, password: p}, authenticated, null);","    } //component.isAuthenticated end","})","","",".controller('wallCtrl', function($location, $scope, $ionicPopover, $ionicPopup, $ionicModal, $ionicLoading, StemFactory,StemService,stemcfg, $state, $stateParams, capi) {","    StemService.handleInvalidSession($state, $scope, localStorage.getItem(stemcfg.userid), $ionicPopup, $stateParams.m);","    StemFactory.store('wallCtrl', $scope);","    var component = this;","    // debugger","    component.email = localStorage.getItem(stemcfg.user);","    component.postlabel = \"What's Happening?\";","","//TODO need to query the real db!","// component.activeavatar = localStorage.getItem(stemcfg.useravatar);","component.getOwnerAvatar = function(ownerName) {","    // debugger","    if(typeof ownerName !== 'undefined') {","        String.prototype.replaceAll = function(search, replacement) {","            var target = this;","            return target.replace(new RegExp(search, 'g'), replacement);","        };","        var ret = 'http://tipstech.org/sites/all/themes/savita/images/unknown-avatar.png';","        if(typeof ownerName !== 'undefined') {","            if(ownerName.toLowerCase().replaceAll(' ','') === 'ShiaLaBeouf'.toLowerCase()) {","                ret = 'http://avatarfiles.alphacoders.com/451/45172.jpg';","            } else","            if(ownerName.toLowerCase().replaceAll(' ','') === 'EmmaWatson'.toLowerCase()) {","                ret = 'http://avatarfiles.alphacoders.com/296/2961.jpg';","            } else","            if(ownerName.toLowerCase().replaceAll(' ','') === 'MrT'.toLowerCase()) {","                ret = 'http://avatarfiles.alphacoders.com/422/42208.png';","            }","        }","    }","","    // console.log('wall: component.getOwnerAvatar = ' + ret);","    return ret;","}","","    // console.log(StemService.getCurrentTime());","","    //just a test","    var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","    function putCount(data) {","        var currentTotalMessageCount = data.obj.count;","        console.log('capi: current message count is ' + currentTotalMessageCount);","    }","    capi(webHost, '/api/Messages/count', 'GET', 'model', 'method', {}, putCount, null, 'swagger');","","    component.getOwnerId = function(userEmail, cb) {","        var ret = -1;","        var json = {\"where\": {\"name\": userEmail}};","        function printOwnerId(data) {","            console.log('/api/Users = ');","            console.log(data);","            console.log('owner id = ' + data[0].id);","        }","        //=== retrieve the logged in user's id","        // capi(webHost, '/api/Users?filter=' + encodeURIComponent(r), 'GET', 'model', 'method', {}, printOwnerId, null);","        capi(webHost, '/api/Users?filter=' + StemService.toExplorerFilter(json), 'GET', 'model', 'method', {}, cb, null);","","        return ret;","    }","","    component.handleLikeCount = function(that) {","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        var targetUrl = webHost + \"/api/Flags\";","        var request = new Request(targetUrl, {","            headers: new Headers({","                'Accept': 'application/json'","            })","        });","        // var msg = \"wallCtrl:handleLikeCount() connecting to openAPI [\" + targetUrl + \"] ...\";","        // console.log(msg);","        fetch(request, {","            method: 'get'","        }).then(function(response) {","            response.json().then(function(data) {","              console.log(data);","            });","        }).catch(function(err) {","            // Error :(","            console.log('wallCtrl:handleLikeCount() ' + err);","        });","    }","","    component.getFlagByMessageId = function(data, msgId) {","        var ret;","        // debugger","        // console.log(\"12b =====================> component.getFlagByMessageId: searching in data [\");","        // console.log(data);","        // console.log('] by msgId [' + msgId + ']');","        for(var i=0; i<data.length; i++) {","            if(data[i].messages == msgId) {","                ret = data[i];","                // console.log(\"component.getFlagByMessageId() found: ret.messages [\" + ret.messages + ']');","                break;","            }","        }","        // console.log(\"component.getFlagByMessageId(): ret [\" + ret + ']');","        return ret;","    }","","    component.getOwner = function(text) {","        var ret;","        if(text.indexOf('by') > -1) {","            var s1 = text.indexOf('by');","            ret = text.substring(s1, text.length);","        }","        // console.log(\"component.getOwner() ret [\" + ret + ']');","        return ret;","    }","","    component.getFlagByMessageIdAndOwner = function(data, msgId, ownerId) {","        var ret;","        // debugger","        console.log(\"13 =====================> component.getFlagByMessageId: searching in data [\");","        console.log(data);","        console.log(']  by msgId [' + msgId + '] ownerId [' + ownerId + ']');","        var f1, f2;","        for(var i=0; i<data.length; i++) {  //TODO why is data.length is null here????","            if(data[i].messages == msgId) f1 = true;","            if(data[i].subject.indexOf(ownerId) > -1) f2 = true;  //TODO this has to be owner's id!","            // debugger","            if(f1 && f2) {","                ret = data[i];","                // console.log(\"component.getFlagByMessageIdAndOwner() found: ret.messages [\" + ret.messages + ']');","                break;","            }","            f1 = f2 = false;","        }","        // console.log(\"component.getFlagByMessageIdAndOwner(): ret [\" + ret + ']');","        return ret;","    }","","    component.saveLike = function(that, itemIndex) {","","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        var targetUrl = webHost + \"/explorer/swagger.json\";","        // var msg = \"wallCtrl:saveLike() connecting to openAPI [\" + targetUrl + \"] ...\";","        // console.log(msg);","","        function saveIt(data) {","            // console.log('saveIt(): data = ');","            // console.log(data);","            // console.log('saveIt(): owner id = ' + data[0].id);","            //swagger find existing flag based on a message/user begin","            //TODO the owner type need to be updated!","            var messageId = that.item.id;","            var ownerId;","            try {","                ownerId = localStorage.getItem(stemcfg.userid); //data[0].id;","            } catch(e) {","                console.log(data);","                throw e;","            }","            var json3 = {","                data: {","                    \"subject\": \"Like by \" + StemService.getUserName(stemcfg),","                    \"description\": \"favourite of a message\",","                    \"messages\": messageId,","                    \"owner\": ownerId","                }","            };","            // console.log('saveIt(): json3.data = ');","            // console.log(json3.data);","            // debugger","            var oldFlag;","            function updateUserFlags(data) {","                data.obj = data;  //support fetch","                // document.getElementById(\"mydata\").innerHTML = JSON.stringify(data.obj);","                var ownerName = StemService.getUserName(stemcfg);","                oldFlag = component.getFlagByMessageIdAndOwner(data.obj, that.item.id, ownerName);  //TODO for now, only the first one!","                if(typeof oldFlag !== 'undefined' && typeof oldFlag.id !== 'undefined') {","                    if(json3.data.messages == oldFlag.messages) {","                        json3.data = oldFlag;","                    }","                    else {","                        json3.data.id = 0;","                        //=== musy be a new flag!","                    }","                } else {","                    json3.data.id = 0;","                    //=== musy be a new flag!","                }","                json3.data.state = !json3.data.state;","json3 = json3.data;  //support fetch","","                function updateLikeUI(data) {","                    var scope = StemFactory.get('wallCtrl');","                    var oldFlag;","                    function updateMessageLikeCount(data) {","                        // console.log(\"capi: 12c =====================> after Messages.Messages_find: data.obj.messages\");","                        // document.getElementById(\"mydata\").innerHTML = JSON.stringify(data.obj);","                        // console.log(data.obj);","                        var json4 = { data: '' };","// var currentFlag = json3.data.state;","var currentFlag = json3.state;  //support http fetch","","// var oldMessage = data.obj;","var oldMessage = data;  //support http fetch","                        oldMessage.liked = currentFlag?\"true\":\"false\";","                        json4.data = oldMessage;","                        if(currentFlag) {","                            json4.data.likecount = json4.data.likecount + 1;","                        } else {","                            json4.data.likecount = json4.data.likecount - 1;","                        }","json4 = json4.data;  //support fetch","                        // msg = \"wallCtrl:saveLike() Messages_findById state\";","                        // console.log(msg);","                        // console.log(json4.data.state);","                        function updateItem(data) {","                            // msg = \"capi: wallCtrl:saveLike() after Messages_upsert\";","                            // console.log(msg);","                            // console.log(data);","                            var scope = StemFactory.get('wallCtrl');","                            scope.$apply(function () {","// debugger","                                //copy all values into data and update only the like count","                                var temp = data.likecount;","                                data = component.items[itemIndex];","                                data.likecount = temp;","                                if(currentFlag) {","                                    data.loggedinuserliked = 1;","                                } else {","                                    data.loggedinuserliked = 0;","                                }","                                // component.items.splice(itemIndex, 1, data.obj);","                                component.items.splice(itemIndex, 1, data);  //support fetch","                            });","                        }","                        capi(webHost, '/api/Messages', 'PUT', 'model', 'method', json4, updateItem, null);","                    }","                    capi(webHost, `/api/Messages/${messageId}`, 'GET', 'model', 'method', {\"id\": messageId}, updateMessageLikeCount, null);","                }","                capi(webHost, '/api/Flags', 'PUT', 'model', 'method', json3, updateLikeUI, null);","            } //updateFlags end","            // capi(webHost, '/api/Flags', 'GET', 'model', 'method', json3, updateUserFlags, null, 'swagger');","            capi(webHost, '/api/Flags', 'GET', 'model', 'method', json3, updateUserFlags, null);","        } //saveIt end","","        component.getOwnerId(localStorage.getItem(stemcfg.user), saveIt);","    } //component.saveLike end","","    // component.processingMessage = \"Retrieving the messages ...\";","    $ionicLoading.show({template: 'Retrieving the messages ...'});","    var currentStart = 0;","    var loadItemsLimit = 20;","    component.items = [];","","","    $scope.showPopup = function() {","      $scope.data = {}","","    var myPopup = $ionicPopup.show({","      template: '<textarea></textarea>',","      title: 'Post Comment',","      subTitle: 'Please use normal things',","      scope: $scope,","      buttons: [","        { text: 'Cancel' },","        {","          text: '<b>Reply</b>',","          type: 'button-energized',","          onTap: function(e) {","            if (!$scope.data.wifi) {","              //don't allow the user to close unless he enters wifi password","              e.preventDefault();","            } else {","              return $scope.data.wifi;","            }","          }","        }","      ]","    });","","}","","","    // .fromTemplate() method","    var template = `","    <ion-popover-view>","    <ion-header-bar>","        <h1 class=\"title\">My Popover Title</h1>","    </ion-header-bar>","    <ion-content>","        Hello!","    </ion-content>","    </ion-popover-view>`;","","// === Topic Modal","","//   $ionicModal.fromTemplateUrl('templates/newTopic.html', {","//   scope: $scope,","//   animation: 'slide-in-up'","// }).then(function(modal) {","//   $scope.modal = modal;","// });","// $scope.openModal = function() {","//   $scope.modal.show();","// };","// $scope.closeModal = function() {","// //   debugger","//   $scope.modal.hide();","// };","// Cleanup the modal when we're done with it!","// $scope.$on('$destroy', function() {","//   $scope.modal.remove();","// });","// // Execute action on hide modal","// $scope.$on('modal.hidden', function() {","//   // Execute action","// });","// // Execute action on remove modal","// $scope.$on('modal.removed', function() {","//   // Execute action","// });","","","","    //=== popover textarea field","    // component.item1 = '';","    // console.log('wallCtrl: component.item1 reset to [' + component.item1 + '] component.item1:');","    // console.log(component.item1);","    $scope.popover = $ionicPopover.fromTemplate(template, {","        scope: $scope","    });","","    // .fromTemplateUrl() method","    $ionicPopover.fromTemplateUrl('templates/wallModalComment.html', {","        scope: $scope","    }).then(function(popover) {","        $scope.popover = popover;","    });","","    $scope.openPostSettings = function($event) {","      //  $scope.messageowner = localStorage.getItem(stemcfg.user);","        // $scope.messagetype = stemcfg.messagetype1 + id;  //TODO need to concatenate owner + timestamp","        // console.log('message type set to [' + $scope.messagetype + ']');","        $scope.openPopover($event);","    }","","    $scope.openPostComment = function($event) {","        $scope.messageowner = localStorage.getItem(stemcfg.user);","        // $scope.messagetype = stemcfg.messagetype1 + id;  //TODO need to concatenate owner + timestamp","        // console.log('message type set to [' + $scope.messagetype + ']');","        $scope.openPopover($event);","        // debugger","    }","","    $ionicModal.fromTemplateUrl('templates/wallModalPost.html', function(modal) {","            $scope.modal = modal;","    }, {","        // Use our scope for the scope of the modal to keep it simple","        scope: $scope,","        // The animation we want to use for the modal entrance","        animation: 'slide-in-up'","    });","    $scope.openModal = function(item) {","        component.item1 = ''; //clear the textarea","        // debugger","        if(typeof item !== 'undefined') {","            component.postlabel = stemcfg.replytopiclabel;","            $scope.messageowner = item.owner;","            $scope.messagetype = stemcfg.messagetype1 + component.getTopicId(item);  //TODO need to get the type of the (thread) topic over here","            console.log('REPLY: message type set to [' + $scope.messagetype + '] $scope.messageowner [' + $scope.messageowner + ']');","        } else {","            component.postlabel = stemcfg.newtopiclabel;","            $scope.messageowner = localStorage.getItem(stemcfg.userid);","            $scope.messagetype = undefined;   //has to be undefined to be treated as a POST!!!","            console.log('POST: message type set to [' + $scope.messagetype + '] $scope.messageowner [' + $scope.messageowner + ']');","        }","        $scope.modal.show();","    };","    $scope.closeModal = function() {","        // debugger","        $scope.modal.hide();","    };","","    $scope.openReplyTo = function($event, item) {","        $scope.messageowner = item.owner;","        $scope.messagetype = stemcfg.messagetype1 + component.getTopicId(item);  //TODO need to get the type of the (thread) topic over here","        console.log('message type set to [' + $scope.messagetype + ']');","        $scope.openPopover($event, $scope.messagetype);","    }","","    $scope.openPopover = function($event, id) {","        $scope.popover.show($event);","            console.log('controller.js $scope.openPopover id = ' + id);","        };","        $scope.closePopover = function() {","            $scope.popover.hide();","        };","        //Cleanup the popover when we're done with it!","        $scope.$on('$destroy', function() {","        $scope.popover.remove();","    });","    // Execute action on hide popover","    $scope.$on('popover.hidden', function() {","        // component.popover.hide();  //Warning: do not need to call this again! It will throw \"app.js angular exception: Maximum call stack size exceeded (caused by undefined) after hiding the popover\"!!!","        // Do only any cleanup if needed in here","    });","    // Execute action on remove popover","    $scope.$on('popover.removed', function() {","        // Execute action","    });","","    component.getTopicId = function(item) {","        var ret = item.threadid;","","        return ret;","    };","","    component.getStyle = function(item) {","        var ret = {height: '300px'};","","        if(component.isTopicOwner(item)) {","            ret = {height: '300px'};","        }","","        // console.log('controllers.js:component.getItemCSSClass [' + ret + '] item.type [' + item.type + \"]\");","    //   return ret;  //Notes: @mayowa uncomment this to see the gap","    };","","    component.isTopicOwner = function(item) {","        var ret = false;","        if(typeof item !== 'undefined' && item.type.indexOf('topic') > -1 && item.type.indexOf('owner') > -1) {","            ret = true;","        }","","        // console.log('controllers.js:component.isTopicOwner [' + ret + '] item.type [' + item.type + \"]\");","        return ret;","    };","","    //***Notes: This function is not for \"pull to refresh\" as it does not reload the items, it just add a new item to it!","    //*** It is designed for \"infinite scrolling\"!","    component.loadMoreItems = function() {","        $scope.hasMoreData = false;","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        // console.log('controllers.js:loadMoreItems webHost [' + webHost + ']');","        // var webHost = stemcfg.webhost;","        // webHost = 'http://50.28.56.122:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3064'; //TODO - just for test - comment this out in production!!!","","        var targetUrl = webHost + \"/explorer/swagger.json\";","        var msg = \"wallCtrl:loadMoreItems() connecting to openAPI [\" + targetUrl + \"] ...\";","        // document.getElementById(\"mydata\").innerHTML = msg;","        // console.log(msg);","","        function wallLoaded(data) {","            //   console.log(data);","            //   document.getElementById(\"mydata\").innerHTML = JSON.stringify(data.obj.wall);","            data.obj = data.obj && data.obj.wall || data.wall; //support fetch","            var scope = StemFactory.get('wallCtrl');","            // debugger","            if (typeof scope !== 'undefined') {","            scope.$apply(function () {","              component.addItems = function () {","                if (currentStart < loadItemsLimit && currentStart < data.obj.length) {","                  for (var i = currentStart; i < loadItemsLimit; i++) {","","                    var w = 100 + Math.floor(Math.random() * 200);","                    w -= w % 5;","","                    var h = 100 + Math.floor(Math.random() * 200);","                    h -= h % 5;","","","                    if (i < data.obj.length) {","                        component.items.push(","","                          // {height: h},","","                          data.obj[i]);","                        currentStart += 1;","                      // console.log('wallCtrl pushed item ' + i);","                    }","                  }","                }","","                // $scope.$broadcast('scroll.infiniteScrollComplete');   //NB: this is required!!!","                // console.log('wallCtrl scroll.infiniteScrollComplete: list size [' + component.items.length + '] currentStart [' + currentStart + ']');","              }","","              component.addItems();","              // component.items = data.obj;","              //console.log('wallCtrl Messages_ size ' + component.items.length);","              // gitems = component.items;","              // component.processingMessage = \"\";   //done!","              $ionicLoading.hide();","              $scope.$broadcast('scroll.infiniteScrollComplete');","              $scope.hasMoreData = true;","            });","            }","        }","        //=== retrieve all wall messages","        var loggedinuser = localStorage.getItem(stemcfg.userid);","        // capi(webHost, '/api/Threads/wall', 'GET', 'model', 'method', {}, wallLoaded, null, 'swagger');","        capi(webHost, `/api/Threads/wall?loggedinuser=${loggedinuser}`, 'GET', 'model', 'method', {}, wallLoaded, null);","    } //end of component.loadMoreItems","","    component.loadMoreItems();","","    //=== TODO currently not used","    component.postMessage = function() {","        component.createMessage();","    };","","    component.replyMessage = function(item) {","        component.createMessage(item);","    };","    //=== TODO currently not used","","","    // component.testload = function() {","    //     $scope.messagetype = undefined;","    //     currentStart = 0;","    //     loadItemsLimit = 1;","    //     component.items1 = [];","    //     // for (var i = 0; i < 1; i++) {","    //     var i = 0;","    //         component.items1.push(component.items[i]);","    //     // }","    //     console.log(component.items1);","    //     component.items = [];","    //     component.items = component.items1;","    //     // component.loadMoreItems();","    //     $scope.$broadcast('scroll.refreshComplete');","    // };","","    component.reload = function() {","        $scope.messagetype = undefined;","        currentStart = 0;","        loadItemsLimit = 20;","        component.items = [];","        component.loadMoreItems();","        $scope.$broadcast('scroll.refreshComplete');","    };","","    component.createMessage = function(item) {","        var webHost = StemService.getRealHost($location.absUrl(), stemcfg, $stateParams);","        // webHost = 'http://50.28.56.122:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3000'; //TODO - just for test - comment this out in production!!!","        // webHost = 'http://localhost:3064'; //TODO - just for test - comment this out in production!!!","        var targetUrl = webHost + \"/explorer/swagger.json\";","        // var values = component;","        console.log('wallCtrl controller createMessage() item [' + JSON.stringify(item) + ']');","// console.log('1.1 <----------------------------------------------');","","        //swagge2 begin","        // console.log('controllers.js createMessage(): message type is [' + $scope.messagetype + ']');","        //TODO 2-23 owner has to be mapped to the user's name","        //TODO create date has to be the current date!","        var json2 = {","            data: {","              \"id\": 0,","              \"subject\": \"Message by \" + StemService.getUserName(stemcfg),","              \"text\": item,","              \"liked\": \"false\",","              \"state\": \"Public\",","              \"type\": $scope.messagetype||\"NA\",","              \"owner\": localStorage.getItem(stemcfg.userid),","              \"likecount\": 0","            }","        };","","        function afterMessageCreate(data) {","// console.log('1.2 <---------------------------------------------- data:');","// console.log(data);","// console.log('1.3 <---------------------------------------------- item:');","// console.log(item);","            if(data.obj.text == item) {  //TODO need a proper status code to indicate it's a success!!!?","                var oldMessage = data.obj;","// console.log('1.4 <---------------------------------------------- data.obj.id:');","// console.log(data.obj.id);","                var msgId = data.obj.id;","                var json1 = {","                    data: {","                      \"id\": 0,","                      \"messages\": data.obj.id","                    }","                };","                function afterThreadCreate(data) {","// console.log(\"2.1 =====================> after Messages.Messages_create: data.obj.messages\");","// console.log('2.2 <---------------------------------------------- data:');","// console.log(data);","// console.log('2.3 <---------------------------------------------- msgId:');","// console.log(msgId);","                    if(data.obj.messages == msgId) {  //TODO need a proper status code to indicate it's a success!!!?","                        var newType;","                        var threadId = data.obj.id;","                        if(typeof $scope.messagetype === 'undefined') {","                            newType = 'topic' + threadId + '-owner';","                            oldMessage.type = newType;","                        } else {","                            newType = $scope.messagetype;","                            oldMessage.type = newType;","                        }","","                        // console.log(\"2 =====================> before Messages.Messages_upsert: oldMessage\");","                        // console.log(oldMessage);","// json2.data = oldMessage;","json2 = oldMessage;","                        function updateChangedMessage(data) {","                            // document.getElementById(\"mydata\").innerHTML = JSON.stringify(data.obj);","// console.log(\"3.1 =====================> after Messages.Messages_upsert: data.obj.text\");","// console.log(data.obj.text);","// console.log('3.2 <---------------------------------------------- item:');","// console.log(item);","// debugger","                            // if(data.obj.text == item) {  //TODO need a proper status code to indicate it's a success!!!?","                            if(data.text == item) {  //TODO need a proper status code to indicate it's a success!!!?","                            // console.log(\"4 =====================> after Threads.Threads_create: Thread\");","                            // console.log(data.obj);","                            // return","                            // console.log('controllers.js: closing popover ...');","                            // component.item1 = '';","                            // console.log('wallCtrl: 2 component.item1 reset to [' + component.item1 + '] component.item1:');","                            // console.log(component.item1);","                            //$scope.$broadcast('popover.hidden');","                            // $scope.closePopover();","                            $scope.closeModal();","                            // console.log('popover should be closed!');","                            component.reload();  //TODO do we really need to reload????","                            // component.loadMoreItems();  //TODO buggy","                            } //end of data.obj.text == item","                        }","                        capi(webHost, '/api/Messages', 'PUT', 'model', 'method', json2, updateChangedMessage, null);","                    } //end of data.obj.messages == msgId","                } //afterThreadCreate end","                capi(webHost, '/api/Threads', 'POST', 'model', 'method', json1, afterThreadCreate, null, 'swagger');","            } //data.obj.text == item end","        } //afterMessageCreate end","        capi(webHost, '/api/Messages', 'POST', 'model', 'method', json2, afterMessageCreate, null, 'swagger');","    } //component.createMessage end","","    //Notes: @mayowa","    component.getStyleByFlagState = function(item, index) {","        var ret;","        // console.log('controller.js likeStyleByFlagState: item (Message)');","        // console.log(item);","        // debugger","        // if(item.likecount > 0) {","        if(item.loggedinuserliked == 1) {","            console.log('item.loggedinuserliked = ' + item.loggedinuserliked);","            ret = 'button button-icon icon ion-ios-heart energized icon-left';","            // console.log('controllers.js component.likeStyleByFlagState state 1');","        } else {","            ret = 'button button-icon icon energized ion-ios-heart-outline icon-left';","            // console.log('controllers.js component.likeStyleByFlagState state 0');","        }","        return ret;","    };","","","    component.messageStyleByMessageType = function(item) {","        var ret;","        // debugger","        // console.log(item);","        if(typeof item !== 'undefined' && typeof item.type !== 'undefined' && item.type.indexOf('owner') > -1) {","            ret = 'wall-new-message';","            // console.log('controllers.js component.messageStyleByMessageType type topic');","        } else {","            ret = 'wall-replied-message';","            // console.log('controllers.js component.messageStyleByMessageType type comment');","        }","        return ret;","    };","","    component.buttonStyleByMessageType = function(item) {","        var ret;","        // debugger","        // console.log(item);","        if(item.type === 'comment') {","            ret = 'wall-reply-to-button';","            // console.log('controllers.js component.buttonStyleByMessageType type comment');","        } else {","            ret = '';","            // console.log('controllers.js component.buttonStyleByMessageType type topic');","        }","        return ret;","    };","","})"]}]}]]},"/www/templates/questJoin.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":20,"column":11},"end":{"row":20,"column":11}},"lastUse":1473462526177,"undo":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":24,"column":0},"end":{"row":24,"column":11}},"text":"</ion-view>"},{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":24,"column":0}},"nl":"\r\n","lines":["<ion-view title=\"Quest - Join\" id=\"page3\" class=\" \">","    <ion-content padding=\"true\" class=\"has-header\">","        <div class=\"item item-body \" id=\"questJoin-list-item-container1\">","            <h1 id=\"questJoin-heading1\" style=\"color:#000000;text-align:center;\" class=\" \">Title</h1>","            <ion-list id=\"questJoin-list7\" class=\" \">","                <ion-item class=\"item-thumbnail-left  \" id=\"questJoin-list-item13\"></ion-item>","            </ion-list>","        </div>","        <div id=\"questJoin-button-bar2\" class=\" button-bar \">","            <button id=\"questJoin-button12\" class=\" button button-positive  button-block \">PowerUps</button>","            <a ui-sref=\"menu.questActivity\" id=\"questJoin-button13\" class=\" button button-positive  button-block \">Activity</a>","        </div>","        <p id=\"questJoin-markdown1\" style=\"color:#000000;\" class=\" \">","            <strong>Quest</strong>description</p>","        <button id=\"questJoin-button15\" class=\" button button-positive  button-block \">Join Quest</button>","        <ion-list id=\"questJoin-list3\" class=\" \">","            <ion-item class=\"item-icon-left  \" id=\"questJoin-list-item14\">","                <i class=\"icon ion-images\"></i>Item</ion-item>","            <ion-item class=\"item-icon-left  \" id=\"questJoin-list-item16\">","                <i class=\"icon ion-image\"></i>Item</ion-item>","            <ion-item class=\"item-icon-left  \" id=\"questJoin-list-item15\">","                <i class=\"icon ion-ios-star-outline\"></i>Item</ion-item>","        </ion-list>","    </ion-content>"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":52}},"text":"<ion-view title=\"Quest - Join\" id=\"page3\" class=\" \">"},{"action":"insertText","range":{"start":{"row":0,"column":52},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":20,"column":0}},"lines":["    <ion-content padding=\"true\" class=\"has-header\">","        <div class=\"item item-body \" id=\"questJoin-list-item-container1\">","            <ion-list id=\"questJoin-list7\" class=\" \">","                <ion-item class=\"item-icon-right  \" id=\"questJoin-list-item13\">{{questJoin.title}}","                    <i class=\"icon ion-leaf\"></i>","                </ion-item>","            </ion-list>","            <div id=\"questJoin-button-bar2\" class=\" button-bar \">","                <button ng-click=\"questJoin.selectQuestPowerups(questJoin.id)\"  id=\"questJoin-button12\" class=\" button button-positive  button-block \">PowerUps</button>","                <a href=\"#\" onclick=\"window.open('page6', '_system', 'location=yes'); return false;\" id=\"questJoin-button13\" class=\" button button-positive  button-block \">Activity</a>","            </div>","            <div id=\"questJoin-button-bar5\" class=\" button-bar \">","                <button id=\"questJoin-button26\" class=\" button button-light  button-block \"></button>","                <button id=\"questJoin-button27\" class=\" button button-light  button-block \"></button>","                <a ng-click=\"questJoin.joinQuest(questJoin.id, questJoin.title, questJoin.description, questJoin.how)\" id=\"questJoin-button28\" class=\" button button-light  button-block icon-right ion-android-arrow-forward \">Join</a>","            </div>","            <div id=\"questJoin-button-bar4\" class=\" button-bar \"></div>","        </div>","    </ion-content>"]},{"action":"insertText","range":{"start":{"row":20,"column":0},"end":{"row":20,"column":11}},"text":"</ion-view>"}]}]],"redo":[]},"/README.md":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":0,"column":18},"end":{"row":0,"column":18}},"lastUse":1473399440510,"undo":[],"redo":[]},"/ig.bat":{"scrollTop":0,"scrollLeft":135,"selection":{"start":{"row":0,"column":77},"end":{"row":0,"column":81}},"lastUse":1473399425506,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":59},"end":{"row":0,"column":60}},"text":"&"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":60},"end":{"row":0,"column":61}},"text":"&"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":61},"end":{"row":0,"column":62}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":62},"end":{"row":0,"column":80}},"text":"npm install -g gul"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":80},"end":{"row":0,"column":81}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":81},"end":{"row":0,"column":82}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":82},"end":{"row":0,"column":83}},"text":"&"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":83},"end":{"row":0,"column":84}},"text":"&"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":84},"end":{"row":0,"column":85}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":84},"end":{"row":0,"column":85}},"text":" "}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":83},"end":{"row":0,"column":84}},"text":"&"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":82},"end":{"row":0,"column":83}},"text":"&"}]}]],"redo":[]},"/www/templates/questHome.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":5,"column":12},"end":{"row":5,"column":12}},"lastUse":1473399377741,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":37},"end":{"row":2,"column":38}},"text":"q"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":38},"end":{"row":2,"column":39}},"text":"u"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":39},"end":{"row":2,"column":40}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":40},"end":{"row":2,"column":41}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":41},"end":{"row":2,"column":42}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":42},"end":{"row":2,"column":43}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":5,"column":0},"end":{"row":6,"column":0}},"nl":"\r\n","lines":["            <ion-item id=\"questHome-list-item23\" class=\" \">{{item.title}} - {{item.decription}}</ion-item>"]},{"action":"insertText","range":{"start":{"row":5,"column":0},"end":{"row":5,"column":130}},"text":"<ion-item id=\"questHome-list-item23\" ng-click=\"quest.selectQuest(item)\" class=\" \">{{item.title}} - {{item.description}}</ion-item>"},{"action":"insertText","range":{"start":{"row":5,"column":130},"end":{"row":6,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":0},"end":{"row":5,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":4},"end":{"row":5,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":8},"end":{"row":5,"column":12}},"text":"    "}]}]],"redo":[]},"/www/js/services.js":{"scrollTop":630,"scrollLeft":0,"selection":{"start":{"row":65,"column":0},"end":{"row":65,"column":0}},"lastUse":1473399128755,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":0},"end":{"row":19,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":20,"column":0},"end":{"row":20,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":19,"column":0},"end":{"row":19,"column":4}},"text":"    "},{"action":"removeText","range":{"start":{"row":20,"column":0},"end":{"row":20,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":20,"column":0},"end":{"row":21,"column":0}},"nl":"\r\n","lines":["    //   if(mode === 'dev') {"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":4},"end":{"row":19,"column":5}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":5},"end":{"row":19,"column":6}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":27},"end":{"row":19,"column":35}},"text":"amazonaw"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":19,"column":35},"end":{"row":19,"column":39}},"text":"3064"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":35},"end":{"row":19,"column":36}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":21,"column":0},"end":{"row":22,"column":0}},"nl":"\r\n","lines":["        localStorage.setItem(stemcfg.appmode, 'dev');"]},{"action":"insertText","range":{"start":{"row":21,"column":0},"end":{"row":21,"column":44}},"text":"localStorage.setItem(stemcfg.apihost, host);"},{"action":"insertText","range":{"start":{"row":21,"column":44},"end":{"row":22,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":21,"column":0},"end":{"row":21,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":21,"column":4},"end":{"row":21,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":22,"column":12},"end":{"row":22,"column":13}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":20,"column":0},"end":{"row":21,"column":0}},"nl":"\r\n","lines":["        host = 'http://localhost:3064';"]},{"action":"insertText","range":{"start":{"row":20,"column":0},"end":{"row":20,"column":64}},"text":"host = 'http://ec2-54-175-194-254.compute-1.amazonaws.com:3000';"},{"action":"insertText","range":{"start":{"row":20,"column":64},"end":{"row":21,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":0},"end":{"row":20,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":4},"end":{"row":20,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":35,"column":20},"end":{"row":35,"column":69}},"text":"http://ec2-54-175-194-254.compute-1.amazonaws.com"},{"action":"insertText","range":{"start":{"row":35,"column":20},"end":{"row":35,"column":76}},"text":"http://ec2-54-193-69-129.us-west-1.compute.amazonaws.com"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":155,"column":0}},"nl":"\r\n","lines":["angular.module('app.services', ['angularMoment'])","",".factory('StemFactory', [function(){","  var mem = {};","  return {","    store: function (key, value) { mem[key] = value; },","    get: function (key) { return mem[key]; }","  };","}])","",".service('StemService', ['$q','StemFactory','$ionicPopup',function($q,StemFactory,$ionicPopup,stemcfg){","","  return {","    getRealHost:function(hosttype, stemcfg, stateParams) {","      var host;","      var mode = localStorage.getItem(stemcfg.appmode);","    //   debugger","      ","    //   if(hosttype === 'web') {","      if(hosttype.indexOf('amazonaws') > -1) {","        host = 'http://ec2-54-175-194-254.compute-1.amazonaws.com:3000';","        localStorage.setItem(stemcfg.apihost, host);","      } else","      if(hosttype.indexOf('3064') > -1) {","//   if(mode === 'dev') {","        host = 'http://localhost:3064';","        localStorage.setItem(stemcfg.appmode, 'dev');","      } else if(hosttype.indexOf('8080') > -1 || hosttype.indexOf('8100') > -1) {","// debugger","        var apihost = localStorage.getItem(stemcfg.apihost);","        if(stateParams.m === '1' ||","        ((typeof apihost !== 'undefined') ","        && apihost !== ''","        && apihost !== null","        )) {","            host = 'http://ec2-54-193-69-129.us-west-1.compute.amazonaws.com:3000';","            // host = 'http://17.173.176.198:3000';","            localStorage.setItem(stemcfg.apihost, host);","        } else {","            // debugger","            host = 'http://localhost:3000';","        }","        localStorage.removeItem(stemcfg.appmode);","      }","    //   }","    //   console.log('services.js:getRealHost hosttype [' + hosttype + '] mode [' + mode + '] host [' + host + ']');","      return host;","    },","    // handleStateParams:function(stateParams, stemcfg) {","    //   if(typeof stateParams.m !== 'undefined') {","    //     localStorage.setItem(stemcfg.appmode, stateParams.m);","    //     console.log('controllers.js:loginCtrl app mode set to [' + localStorage.getItem(stemcfg.appmode) + ']');","    //   } else {","    //     localStorage.removeItem(stemcfg.appmode);","    //   }","    // },","    getUserName: function(stemcfg) {","        var userdf = {}","        try {","            userdf = JSON.parse(localStorage.getItem(stemcfg.dfuser));","        } catch(e) {","            console.log('services.js getUserName() exception = ' + e);","        }","        return userdf.first_name + \" \" + userdf.last_name;","    },","    isSwaggerClientResponse: function(data) {","        // debugger","        var ret;","        if(data.obj && typeof data.obj.status !== 'undefined' && data.obj.status !== '') {","            ret = true;","        } else {","            ret = false;","        }","        return ret;","    },","    toExplorerFilter: function(json) {","        var jsonData = json;","        var r = JSON.stringify(jsonData);","        return encodeURIComponent(r);","    },","    handleFetchResponse: function(data, swagger) {","        // debugger","        if(typeof swagger !== 'undefined' && swagger === 'swagger') {","            data = data.obj;","        }","        return data;","    },","    alert: function(message, title) {","        return $ionicPopup.alert({","          title: title || 'STEM',","          template: message","        });","    },","    hasError: function(message) {","// debugger","        var ret = false;","        if(typeof message !== 'undefined' && message.trim().startsWith('{\"error\":')) {","            ret = true;","        }","        return ret;","    },","    getCurrentTime: function(dayOffset) {","        if(typeof dayOffset === 'undefined') dayOffset = 0;","        var rDate = new Date();","        rDate.setDate(rDate.getDate()+dayOffset);","        var printDate = rDate.getFullYear() + \"-\" +","        ('0'+(rDate.getMonth()+1)).slice(-2)+ \"-\" +","        ('0'+(rDate.getDate())).slice(-2)","        + 'T' + rDate.getHours() + ':' + rDate.getMinutes() + ':'+ rDate.getSeconds() + '.000Z'","        ;","        return printDate;","    },","    getCurrentDate: function(dayOffset) {","        if(typeof dayOffset === 'undefined') dayOffset = 0;","        var rDate = new Date();","        rDate.setDate(rDate.getDate()+dayOffset);","        var printDate = rDate.getFullYear() + \"-\" +","        ('0'+(rDate.getMonth()+1)).slice(-2)+ \"-\" +","        ('0'+(rDate.getDate())).slice(-2);","        return printDate;","    },","    handleInvalidSession: function($state, $scope, userid, $ionicPopup, appmode) {","        var id = userid;","        // debugger","        if(typeof id === 'undefined' || id === 'undefined' || id === '') {","            if(appmode === 'dev' || localStorage.getItem('appmode') === 'dev') {","                id = -1;","            } else {","                var popup = $ionicPopup.confirm({","                  title: 'STEM',","                  template: 'Session is invalid, please sign in again.'","                });","                popup.then(function(res) {","                    if(res) {","                        popup.close();","                        // $scope.closePopover();","                        $state.go('menu.login');","                    } else {","                        console.log('handleInvalidSession: logout cancelled!');","                    }","                });","            }","        }","    },","    isRemote: function(host) {","        var ret = false;","        if(host.indexOf('localhost') > -1 || host.indexOf('127.0.0.1') > -1) {","            ret = true;","        }","        return ret;","    }","    ","","  };","}]);"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":49}},"text":"angular.module('app.services', ['angularMoment'])"},{"action":"insertText","range":{"start":{"row":0,"column":49},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":154,"column":0}},"lines":["",".factory('StemFactory', [function(){","  var mem = {};","  return {","    store: function (key, value) { mem[key] = value; },","    get: function (key) { return mem[key]; }","  };","}])","",".service('StemService', ['$q','StemFactory','$ionicPopup',function($q,StemFactory,$ionicPopup,stemcfg){","","  return {","    getRealHost:function(hosttype, stemcfg, stateParams) {","      var host;","      var mode = localStorage.getItem(stemcfg.appmode);","    //   debugger","      ","    //   if(hosttype === 'web') {","      if(hosttype.indexOf('3064') > -1) {","//   if(mode === 'dev') {","        host = 'http://localhost:3064';","        localStorage.setItem(stemcfg.appmode, 'dev');","      } else if(hosttype.indexOf('8080') > -1 || hosttype.indexOf('8100') > -1) {","// debugger","        var apihost = localStorage.getItem(stemcfg.apihost);","        if(stateParams.m === '1' ||","        ((typeof apihost !== 'undefined') ","        && apihost !== ''","        && apihost !== null","        )) {","            host = 'http://50.28.56.122:3000';","            // host = 'http://17.173.176.198:3000';","            localStorage.setItem(stemcfg.apihost, host);","        } else {","            // debugger","            host = 'http://localhost:3000';","        }","        localStorage.removeItem(stemcfg.appmode);","      }","    //   }","    //   console.log('services.js:getRealHost hosttype [' + hosttype + '] mode [' + mode + '] host [' + host + ']');","      return host;","    },","    // handleStateParams:function(stateParams, stemcfg) {","    //   if(typeof stateParams.m !== 'undefined') {","    //     localStorage.setItem(stemcfg.appmode, stateParams.m);","    //     console.log('controllers.js:loginCtrl app mode set to [' + localStorage.getItem(stemcfg.appmode) + ']');","    //   } else {","    //     localStorage.removeItem(stemcfg.appmode);","    //   }","    // },","    getUserName: function(stemcfg) {","        var userdf = {}","        try {","            userdf = JSON.parse(localStorage.getItem(stemcfg.dfuser));","        } catch(e) {","            console.log('services.js getUserName() exception = ' + e);","        }","        return userdf.first_name + \" \" + userdf.last_name;","    },","    getUserId: function(stemcfg) {","        return localStorage.getItem(stemcfg.userid)","    },","    isSwaggerClientResponse: function(data) {","        // debugger","        var ret;","        if(data.obj && typeof data.obj.status !== 'undefined' && data.obj.status !== '') {","            ret = true;","        } else {","            ret = false;","        }","        return ret;","    },","    toExplorerFilter: function(json) {","        var jsonData = json;","        var r = JSON.stringify(jsonData);","        return encodeURIComponent(r);","    },","    handleFetchResponse: function(data, swagger) {","        // debugger","        if(typeof swagger !== 'undefined' && swagger === 'swagger') {","            data = data.obj;","        }","        return data;","    },","    alert: function(message, title) {","        return $ionicPopup.alert({","          title: title || 'STEM',","          template: message","        });","    },","    hasError: function(message) {","// debugger","        var ret = false;","        if(typeof message !== 'undefined' && message.trim().startsWith('{\"error\":')) {","            ret = true;","        }","        return ret;","    },","    getCurrentTime: function(dayOffset) {","        if(typeof dayOffset === 'undefined') dayOffset = 0;","        var rDate = new Date();","        rDate.setDate(rDate.getDate()+dayOffset);","        var printDate = rDate.getFullYear() + \"-\" +","        ('0'+(rDate.getMonth()+1)).slice(-2)+ \"-\" +","        ('0'+(rDate.getDate())).slice(-2)","        + 'T' + rDate.getHours() + ':' + rDate.getMinutes() + ':'+ rDate.getSeconds() + '.000Z'","        ;","        return printDate;","    },","    getCurrentDate: function(dayOffset) {","        if(typeof dayOffset === 'undefined') dayOffset = 0;","        var rDate = new Date();","        rDate.setDate(rDate.getDate()+dayOffset);","        var printDate = rDate.getFullYear() + \"-\" +","        ('0'+(rDate.getMonth()+1)).slice(-2)+ \"-\" +","        ('0'+(rDate.getDate())).slice(-2);","        return printDate;","    },","    handleInvalidSession: function($state, $scope, userid, $ionicPopup, appmode) {","        var id = userid;","        // debugger","        if(typeof id === 'undefined' || id === 'undefined' || id === '') {","            if(appmode === 'dev' || localStorage.getItem('appmode') === 'dev') {","                id = -1;","            } else {","                var popup = $ionicPopup.confirm({","                  title: 'STEM',","                  template: 'Session is invalid, please sign in again.'","                });","                popup.then(function(res) {","                    if(res) {","                        popup.close();","                        // $scope.closePopover();","                        $state.go('menu.login');","                    } else {","                        console.log('handleInvalidSession: logout cancelled!');","                    }","                });","            }","        }","    },","    isRemote: function(host) {","        var ret = false;","        if(host.indexOf('localhost') > -1 || host.indexOf('127.0.0.1') > -1) {","            ret = true;","        }","        return ret;","    }","    ","","  };","}]);"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":154,"column":0}},"nl":"\r\n","lines":["angular.module('app.services', ['angularMoment'])","",".factory('StemFactory', [function(){","  var mem = {};","  return {","    store: function (key, value) { mem[key] = value; },","    get: function (key) { return mem[key]; }","  };","}])","",".service('StemService', ['$q','StemFactory','$ionicPopup',function($q,StemFactory,$ionicPopup,stemcfg){","","  return {","    getRealHost:function(hosttype, stemcfg, stateParams) {","      var host;","      var mode = localStorage.getItem(stemcfg.appmode);","    //   debugger","      ","    //   if(hosttype === 'web') {","      if(hosttype.indexOf('3064') > -1) {","//   if(mode === 'dev') {","        host = 'http://localhost:3064';","        localStorage.setItem(stemcfg.appmode, 'dev');","      } else if(hosttype.indexOf('8080') > -1 || hosttype.indexOf('8100') > -1) {","// debugger","        var apihost = localStorage.getItem(stemcfg.apihost);","        if(stateParams.m === '1' ||","        ((typeof apihost !== 'undefined') ","        && apihost !== ''","        && apihost !== null","        )) {","            host = 'http://50.28.56.122:3000';","            // host = 'http://17.173.176.198:3000';","            localStorage.setItem(stemcfg.apihost, host);","        } else {","            // debugger","            host = 'http://localhost:3000';","        }","        localStorage.removeItem(stemcfg.appmode);","      }","    //   }","    //   console.log('services.js:getRealHost hosttype [' + hosttype + '] mode [' + mode + '] host [' + host + ']');","      return host;","    },","    // handleStateParams:function(stateParams, stemcfg) {","    //   if(typeof stateParams.m !== 'undefined') {","    //     localStorage.setItem(stemcfg.appmode, stateParams.m);","    //     console.log('controllers.js:loginCtrl app mode set to [' + localStorage.getItem(stemcfg.appmode) + ']');","    //   } else {","    //     localStorage.removeItem(stemcfg.appmode);","    //   }","    // },","    getUserName: function(stemcfg) {","        var userdf = {}","        try {","            userdf = JSON.parse(localStorage.getItem(stemcfg.dfuser));","        } catch(e) {","            console.log('services.js getUserName() exception = ' + e);","        }","        return userdf.first_name + \" \" + userdf.last_name;","    },","    getUserId: function(stemcfg) {","        return localStorage.getItem(stemcfg.userid)","    },","    isSwaggerClientResponse: function(data) {","        // debugger","        var ret;","        if(data.obj && typeof data.obj.status !== 'undefined' && data.obj.status !== '') {","            ret = true;","        } else {","            ret = false;","        }","        return ret;","    },","    toExplorerFilter: function(json) {","        var jsonData = json;","        var r = JSON.stringify(jsonData);","        return encodeURIComponent(r);","    },","    handleFetchResponse: function(data, swagger) {","        // debugger","        if(typeof swagger !== 'undefined' && swagger === 'swagger') {","            data = data.obj;","        }","        return data;","    },","    alert: function(message, title) {","        return $ionicPopup.alert({","          title: title || 'STEM',","          template: message","        });","    },","    hasError: function(message) {","// debugger","        var ret = false;","        if(typeof message !== 'undefined' && message.trim().startsWith('{\"error\":')) {","            ret = true;","        }","        return ret;","    },","    getCurrentTime: function(dayOffset) {","        if(typeof dayOffset === 'undefined') dayOffset = 0;","        var rDate = new Date();","        rDate.setDate(rDate.getDate()+dayOffset);","        var printDate = rDate.getFullYear() + \"-\" +","        ('0'+(rDate.getMonth()+1)).slice(-2)+ \"-\" +","        ('0'+(rDate.getDate())).slice(-2)","        + 'T' + rDate.getHours() + ':' + rDate.getMinutes() + ':'+ rDate.getSeconds() + '.000Z'","        ;","        return printDate;","    },","    getCurrentDate: function(dayOffset) {","        if(typeof dayOffset === 'undefined') dayOffset = 0;","        var rDate = new Date();","        rDate.setDate(rDate.getDate()+dayOffset);","        var printDate = rDate.getFullYear() + \"-\" +","        ('0'+(rDate.getMonth()+1)).slice(-2)+ \"-\" +","        ('0'+(rDate.getDate())).slice(-2);","        return printDate;","    },","    handleInvalidSession: function($state, $scope, userid, $ionicPopup, appmode) {","        var id = userid;","        // debugger","        if(typeof id === 'undefined' || id === 'undefined' || id === '') {","            if(appmode === 'dev' || localStorage.getItem('appmode') === 'dev') {","                id = -1;","            } else {","                var popup = $ionicPopup.confirm({","                  title: 'STEM',","                  template: 'Session is invalid, please sign in again.'","                });","                popup.then(function(res) {","                    if(res) {","                        popup.close();","                        // $scope.closePopover();","                        $state.go('menu.login');","                    } else {","                        console.log('handleInvalidSession: logout cancelled!');","                    }","                });","            }","        }","    },","    isRemote: function(host) {","        var ret = false;","        if(host.indexOf('localhost') > -1 || host.indexOf('127.0.0.1') > -1) {","            ret = true;","        }","        return ret;","    }","    ","","  };","}]);"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":49}},"text":"angular.module('app.services', ['angularMoment'])"},{"action":"insertText","range":{"start":{"row":0,"column":49},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":155,"column":0}},"lines":["",".factory('StemFactory', [function(){","  var mem = {};","  return {","    store: function (key, value) { mem[key] = value; },","    get: function (key) { return mem[key]; }","  };","}])","",".service('StemService', ['$q','StemFactory','$ionicPopup',function($q,StemFactory,$ionicPopup,stemcfg){","","  return {","    getRealHost:function(hosttype, stemcfg, stateParams) {","      var host;","      var mode = localStorage.getItem(stemcfg.appmode);","    //   debugger","      ","    //   if(hosttype === 'web') {","      if(hosttype.indexOf('amazonaws') > -1) {","        host = 'http://ec2-54-175-194-254.compute-1.amazonaws.com:3000';","        localStorage.setItem(stemcfg.apihost, host);","      } else","      if(hosttype.indexOf('3064') > -1) {","//   if(mode === 'dev') {","        host = 'http://localhost:3064';","        localStorage.setItem(stemcfg.appmode, 'dev');","      } else if(hosttype.indexOf('8080') > -1 || hosttype.indexOf('8100') > -1) {","// debugger","        var apihost = localStorage.getItem(stemcfg.apihost);","        if(stateParams.m === '1' ||","        ((typeof apihost !== 'undefined') ","        && apihost !== ''","        && apihost !== null","        )) {","            host = 'http://ec2-54-193-69-129.us-west-1.compute.amazonaws.com:3000';","            // host = 'http://17.173.176.198:3000';","            localStorage.setItem(stemcfg.apihost, host);","        } else {","            // debugger","            host = 'http://localhost:3000';","        }","        localStorage.removeItem(stemcfg.appmode);","      }","    //   }","    //   console.log('services.js:getRealHost hosttype [' + hosttype + '] mode [' + mode + '] host [' + host + ']');","      return host;","    },","    // handleStateParams:function(stateParams, stemcfg) {","    //   if(typeof stateParams.m !== 'undefined') {","    //     localStorage.setItem(stemcfg.appmode, stateParams.m);","    //     console.log('controllers.js:loginCtrl app mode set to [' + localStorage.getItem(stemcfg.appmode) + ']');","    //   } else {","    //     localStorage.removeItem(stemcfg.appmode);","    //   }","    // },","    getUserName: function(stemcfg) {","        var userdf = {}","        try {","            userdf = JSON.parse(localStorage.getItem(stemcfg.dfuser));","        } catch(e) {","            console.log('services.js getUserName() exception = ' + e);","        }","        return userdf.first_name + \" \" + userdf.last_name;","    },","    isSwaggerClientResponse: function(data) {","        // debugger","        var ret;","        if(data.obj && typeof data.obj.status !== 'undefined' && data.obj.status !== '') {","            ret = true;","        } else {","            ret = false;","        }","        return ret;","    },","    toExplorerFilter: function(json) {","        var jsonData = json;","        var r = JSON.stringify(jsonData);","        return encodeURIComponent(r);","    },","    handleFetchResponse: function(data, swagger) {","        // debugger","        if(typeof swagger !== 'undefined' && swagger === 'swagger') {","            data = data.obj;","        }","        return data;","    },","    alert: function(message, title) {","        return $ionicPopup.alert({","          title: title || 'STEM',","          template: message","        });","    },","    hasError: function(message) {","// debugger","        var ret = false;","        if(typeof message !== 'undefined' && message.trim().startsWith('{\"error\":')) {","            ret = true;","        }","        return ret;","    },","    getCurrentTime: function(dayOffset) {","        if(typeof dayOffset === 'undefined') dayOffset = 0;","        var rDate = new Date();","        rDate.setDate(rDate.getDate()+dayOffset);","        var printDate = rDate.getFullYear() + \"-\" +","        ('0'+(rDate.getMonth()+1)).slice(-2)+ \"-\" +","        ('0'+(rDate.getDate())).slice(-2)","        + 'T' + rDate.getHours() + ':' + rDate.getMinutes() + ':'+ rDate.getSeconds() + '.000Z'","        ;","        return printDate;","    },","    getCurrentDate: function(dayOffset) {","        if(typeof dayOffset === 'undefined') dayOffset = 0;","        var rDate = new Date();","        rDate.setDate(rDate.getDate()+dayOffset);","        var printDate = rDate.getFullYear() + \"-\" +","        ('0'+(rDate.getMonth()+1)).slice(-2)+ \"-\" +","        ('0'+(rDate.getDate())).slice(-2);","        return printDate;","    },","    handleInvalidSession: function($state, $scope, userid, $ionicPopup, appmode) {","        var id = userid;","        // debugger","        if(typeof id === 'undefined' || id === 'undefined' || id === '') {","            if(appmode === 'dev' || localStorage.getItem('appmode') === 'dev') {","                id = -1;","            } else {","                var popup = $ionicPopup.confirm({","                  title: 'STEM',","                  template: 'Session is invalid, please sign in again.'","                });","                popup.then(function(res) {","                    if(res) {","                        popup.close();","                        // $scope.closePopover();","                        $state.go('menu.login');","                    } else {","                        console.log('handleInvalidSession: logout cancelled!');","                    }","                });","            }","        }","    },","    isRemote: function(host) {","        var ret = false;","        if(host.indexOf('localhost') > -1 || host.indexOf('127.0.0.1') > -1) {","            ret = true;","        }","        return ret;","    }","    ","","  };","}]);"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":65,"column":0},"end":{"row":65,"column":2}},"text":"},"},{"action":"insertText","range":{"start":{"row":65,"column":2},"end":{"row":66,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":66,"column":0},"end":{"row":68,"column":0}},"lines":["getUserId: function(stemcfg) {","    return localStorage.getItem(stemcfg.userid)"]},{"action":"insertText","range":{"start":{"row":68,"column":0},"end":{"row":68,"column":2}},"text":"},"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":68,"column":2},"end":{"row":68,"column":6}},"text":"    "},{"action":"insertText","range":{"start":{"row":68,"column":2},"end":{"row":69,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":69,"column":0},"end":{"row":69,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":69,"column":4},"end":{"row":69,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":69,"column":4},"end":{"row":69,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":65,"column":0},"end":{"row":65,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":66,"column":0},"end":{"row":66,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":67,"column":0},"end":{"row":67,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":68,"column":0},"end":{"row":68,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":64,"column":0},"end":{"row":65,"column":0}},"nl":"\r\n","lines":["    },"]}]}]],"redo":[]},"/www/templates/menu.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":17,"column":0},"end":{"row":17,"column":0}},"lastUse":1473398954760,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":0},"end":{"row":17,"column":93}},"text":"<ion-item id=\"menu-list-item2\" ui-sref=\"menu.quest\" menu-close=\"\" class=\"  \">Quest</ion-item>"},{"action":"insertText","range":{"start":{"row":17,"column":93},"end":{"row":18,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":0},"end":{"row":17,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":4},"end":{"row":17,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":18},"end":{"row":17,"column":39}},"text":"id=\"menu-list-item2\" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":53},"end":{"row":17,"column":63}},"text":"class=\"  \""}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":52},"end":{"row":17,"column":53}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":18,"column":0},"end":{"row":20,"column":0}},"nl":"\r\n","lines":["        <ion-item ui-sref=\"menu.home\" menu-close=\"\">Home</ion-item>","        <ion-item ui-sref=\"menu.powerUps\" menu-close=\"\">PowerUps</ion-item>"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":17,"column":0},"end":{"row":18,"column":0}},"nl":"\r\n","lines":["        <ion-item ui-sref=\"menu.quest\" menu-close=\"\">Quest</ion-item>"]},{"action":"insertText","range":{"start":{"row":17,"column":0},"end":{"row":17,"column":65}},"text":"<ion-item ui-sref=\"menu.questHome\" menu-close=\"\">Quest</ion-item>"},{"action":"insertText","range":{"start":{"row":17,"column":65},"end":{"row":18,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":0},"end":{"row":17,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":17,"column":4},"end":{"row":17,"column":8}},"text":"    "}]}]],"redo":[]},"/www/js/routes.js":{"scrollTop":728,"scrollLeft":0,"selection":{"start":{"row":72,"column":0},"end":{"row":72,"column":0}},"lastUse":1473398925715,"undo":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":73,"column":16},"end":{"row":73,"column":17}},"text":":"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":73,"column":16},"end":{"row":73,"column":17}},"text":","}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":73,"column":17},"end":{"row":74,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":74,"column":0},"end":{"row":74,"column":14}},"text":"              "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":14},"end":{"row":74,"column":15}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":15},"end":{"row":74,"column":16}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":74,"column":15},"end":{"row":74,"column":16}},"text":"t"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":74,"column":14},"end":{"row":74,"column":15}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":14},"end":{"row":74,"column":15}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":15},"end":{"row":74,"column":16}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":16},"end":{"row":74,"column":17}},"text":"w"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":17},"end":{"row":74,"column":18}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":18},"end":{"row":74,"column":19}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":21},"end":{"row":67,"column":22}},"text":"d"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":20},"end":{"row":67,"column":21}},"text":"i"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":19},"end":{"row":67,"column":20}},"text":":"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":67,"column":18},"end":{"row":67,"column":19}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":18},"end":{"row":67,"column":19}},"text":"/"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":19},"end":{"row":67,"column":20}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":20},"end":{"row":67,"column":21}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":21},"end":{"row":67,"column":22}},"text":"r"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":22},"end":{"row":67,"column":23}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":23},"end":{"row":67,"column":24}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":24},"end":{"row":67,"column":25}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":67,"column":25},"end":{"row":67,"column":26}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":70,"column":44},"end":{"row":70,"column":45}},"text":"T"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":70,"column":45},"end":{"row":70,"column":46}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":70,"column":46},"end":{"row":70,"column":47}},"text":"r"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":70,"column":47},"end":{"row":70,"column":48}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":70,"column":48},"end":{"row":70,"column":49}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":70,"column":49},"end":{"row":70,"column":50}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":70,"column":50},"end":{"row":70,"column":51}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":41},"end":{"row":71,"column":46}},"text":"inbox"},{"action":"insertText","range":{"start":{"row":71,"column":41},"end":{"row":71,"column":42}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":42},"end":{"row":71,"column":43}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":43},"end":{"row":71,"column":44}},"text":"r"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":44},"end":{"row":71,"column":45}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":45},"end":{"row":71,"column":46}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":46},"end":{"row":71,"column":47}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":47},"end":{"row":71,"column":48}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":41},"end":{"row":71,"column":42}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":42},"end":{"row":71,"column":43}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":43},"end":{"row":71,"column":44}},"text":"b"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":44},"end":{"row":71,"column":45}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":45},"end":{"row":71,"column":46}},"text":"x"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":73,"column":16},"end":{"row":73,"column":17}},"text":":"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":73,"column":17},"end":{"row":73,"column":18}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":73,"column":18},"end":{"row":73,"column":19}},"text":"0"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":19},"end":{"row":74,"column":20}},"text":":"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":20},"end":{"row":74,"column":21}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":21},"end":{"row":74,"column":22}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":22},"end":{"row":74,"column":23}},"text":"u"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":23},"end":{"row":74,"column":24}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":74,"column":24},"end":{"row":74,"column":25}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":33},"end":{"row":71,"column":40}},"text":"Threads"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":39},"end":{"row":71,"column":40}},"text":"s"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":38},"end":{"row":71,"column":39}},"text":"d"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":37},"end":{"row":71,"column":38}},"text":"a"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":36},"end":{"row":71,"column":37}},"text":"e"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":35},"end":{"row":71,"column":36}},"text":"r"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":34},"end":{"row":71,"column":35}},"text":"h"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":33},"end":{"row":71,"column":34}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":71,"column":33},"end":{"row":71,"column":40}},"text":"Threads"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":76,"column":0},"end":{"row":77,"column":0}},"text":"\r\n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":77,"column":0},"end":{"row":78,"column":0}},"text":"\r\n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":78,"column":0},"end":{"row":79,"column":0}},"text":"\r\n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":0},"end":{"row":80,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":80,"column":0},"end":{"row":99,"column":0}},"nl":"\r\n","lines":["    .state('menu.quest', {","      url: '/quest',","      views: {","        'side-menu21': {","          templateUrl: 'templates/questHome.html',","          controller: 'questCtrl as quest'","        }","      }","    })","","    .state('menu.questJoin', {","      url: '/questJoin',","      views: {","        'side-menu21': {","          templateUrl: 'templates/questJoin.html',","          controller: 'questCtrl as questJoin'","        }","      }","    })"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":0},"end":{"row":81,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":76,"column":0},"end":{"row":76,"column":26}},"text":".state('menu.questHome', {"},{"action":"insertText","range":{"start":{"row":76,"column":26},"end":{"row":77,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":77,"column":0},"end":{"row":135,"column":0}},"lines":["  url: '/quest_home',","  views: {","    'side-menu21': {","      templateUrl: 'templates/questHome.html',","      controller: 'questHomeCtrl as quest'","    }","  }","})","",".state('menu.questJoin', {","  url: '/questJoin/:id/:title/:description/:how',","  views: {","    'side-menu21': {","      templateUrl: 'templates/questJoin.html',","      controller: 'questJoinCtrl as questJoin'","    }","  }","})","",".state('menu.questsPowerUps', {","  url: '/questspowerups/:id',","  views: {","    'side-menu21': {","      templateUrl: 'templates/questPowerUps.html',","      controller: 'questsPowerUpsCtrl as questsPowerups'","    }","  }","})","",".state('menu.questDetails', {","  url: '/questDetails/:id/:title/:description/:how',","  views: {","    'side-menu21': {","      templateUrl: 'templates/questDetails.html',","      controller: 'questDetailsCtrl as questDetails'","    }","  }","})","",".state('menu.questExit', {","  url: '/page14',","  views: {","    'side-menu21': {","      templateUrl: 'templates/questExit.html',","      controller: 'questExitCtrl'","    }","  }","})","",".state('menu.questHow', {","  url: '/page16',","  views: {","    'side-menu21': {","      templateUrl: 'templates/questHow.html',","      controller: 'questHowCtrl'","    }","  }","})"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":136,"column":0},"end":{"row":140,"column":0}},"nl":"\r\n","lines":["","","",""]}]},{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":135,"column":0},"end":{"row":136,"column":0}},"nl":"\r\n","lines":[""]}]}]],"redo":[]},"/www/index.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":26,"column":4},"end":{"row":28,"column":0}},"lastUse":1473398506011,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":8},"end":{"row":31,"column":9}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":9},"end":{"row":31,"column":10}},"text":"f"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":10},"end":{"row":31,"column":11}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":11},"end":{"row":31,"column":12}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":12},"end":{"row":31,"column":13}},"text":"c"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":13},"end":{"row":31,"column":14}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":14},"end":{"row":31,"column":15}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":15},"end":{"row":31,"column":16}},"text":"p"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":16},"end":{"row":31,"column":17}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":17},"end":{"row":31,"column":18}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":18},"end":{"row":31,"column":19}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":19},"end":{"row":31,"column":20}},"text":"f"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":20},"end":{"row":31,"column":21}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":21},"end":{"row":31,"column":22}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":22},"end":{"row":31,"column":23}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":23},"end":{"row":31,"column":24}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":24},"end":{"row":31,"column":25}},"text":"-"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":25},"end":{"row":31,"column":26}},"text":"-"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":26},"end":{"row":31,"column":27}},"text":">"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":31,"column":5},"end":{"row":31,"column":6}},"text":"!"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":5},"end":{"row":31,"column":6}},"text":"!"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":31,"column":7},"end":{"row":31,"column":8}},"text":"-"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":31,"column":6},"end":{"row":31,"column":7}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":6},"end":{"row":31,"column":7}},"text":"-"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":7},"end":{"row":31,"column":8}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":31,"column":27},"end":{"row":32,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":32,"column":0},"end":{"row":32,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":0},"end":{"row":32,"column":4}},"text":"    "}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":31,"column":27},"end":{"row":32,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":17},"end":{"row":32,"column":41}},"text":"js/angular-moment.min.js"},{"action":"insertText","range":{"start":{"row":32,"column":17},"end":{"row":32,"column":50}},"text":"node_modules\\whatwg-fetch\\fetch.j"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":50},"end":{"row":32,"column":51}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":42},"end":{"row":32,"column":43}},"text":"\\"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":42},"end":{"row":32,"column":43}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":29},"end":{"row":32,"column":30}},"text":"\\"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":29},"end":{"row":32,"column":30}},"text":"/"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":41},"end":{"row":32,"column":42}},"text":"h"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":40},"end":{"row":32,"column":41}},"text":"c"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":39},"end":{"row":32,"column":40}},"text":"t"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":38},"end":{"row":32,"column":39}},"text":"e"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":37},"end":{"row":32,"column":38}},"text":"f"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":36},"end":{"row":32,"column":37}},"text":"-"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":35},"end":{"row":32,"column":36}},"text":"g"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":34},"end":{"row":32,"column":35}},"text":"w"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":33},"end":{"row":32,"column":34}},"text":"t"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":32},"end":{"row":32,"column":33}},"text":"a"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":31},"end":{"row":32,"column":32}},"text":"h"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":30},"end":{"row":32,"column":31}},"text":"w"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":29},"end":{"row":32,"column":30}},"text":"/"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":28},"end":{"row":32,"column":29}},"text":"s"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":27},"end":{"row":32,"column":28}},"text":"e"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":26},"end":{"row":32,"column":27}},"text":"l"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":25},"end":{"row":32,"column":26}},"text":"u"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":24},"end":{"row":32,"column":25}},"text":"d"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":23},"end":{"row":32,"column":24}},"text":"o"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":22},"end":{"row":32,"column":23}},"text":"m"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":21},"end":{"row":32,"column":22}},"text":"_"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":20},"end":{"row":32,"column":21}},"text":"e"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":19},"end":{"row":32,"column":20}},"text":"d"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":18},"end":{"row":32,"column":19}},"text":"o"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":17},"end":{"row":32,"column":18}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":17},"end":{"row":32,"column":18}},"text":"j"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":18},"end":{"row":32,"column":19}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":31,"column":0},"end":{"row":33,"column":0}},"nl":"\r\n","lines":["    <!-- fetch polyfill -->","    <script src=\"js/fetch.js\"></script>"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":0},"end":{"row":19,"column":23}},"text":"<!-- fetch polyfill -->"},{"action":"insertText","range":{"start":{"row":19,"column":23},"end":{"row":20,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":20,"column":0},"end":{"row":21,"column":0}},"lines":["<script src=\"js/fetch.js\"></script>"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":19,"column":0},"end":{"row":19,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":20,"column":0},"end":{"row":20,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":19,"column":0},"end":{"row":21,"column":0}},"nl":"\r\n","lines":["    <!-- fetch polyfill -->","    <script src=\"js/fetch.js\"></script>"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":0},"end":{"row":20,"column":23}},"text":"<!-- fetch polyfill -->"},{"action":"insertText","range":{"start":{"row":20,"column":23},"end":{"row":21,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":21,"column":0},"end":{"row":22,"column":0}},"lines":["<script src=\"js/fetch.js\"></script>"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":26,"column":0},"end":{"row":26,"column":48}},"text":"<script src=\"js/controllers/quests.js\"></script>"},{"action":"insertText","range":{"start":{"row":26,"column":48},"end":{"row":27,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":27,"column":0},"end":{"row":28,"column":0}},"lines":["<script src=\"js/controllers/powerups.js\"></script>"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":26,"column":0},"end":{"row":26,"column":4}},"text":"    "},{"action":"insertText","range":{"start":{"row":27,"column":0},"end":{"row":27,"column":4}},"text":"    "}]}]],"redo":[]},"/tests/mockApiServer.js":{"scrollTop":382,"scrollLeft":0,"selection":{"start":{"row":41,"column":5},"end":{"row":41,"column":5}},"lastUse":1473398195274,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":225,"column":0},"end":{"row":225,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":225,"column":4},"end":{"row":225,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":224,"column":0},"end":{"row":224,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":224,"column":0},"end":{"row":224,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":54,"column":0},"end":{"row":55,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":0},"end":{"row":55,"column":51}},"text":"app.all('/api/*UsersThreads', function (req, res) {"},{"action":"insertText","range":{"start":{"row":55,"column":51},"end":{"row":56,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":56,"column":0},"end":{"row":64,"column":0}},"lines":["    var obj = `","    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":27},"end":{"row":55,"column":28}},"text":"/"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":28},"end":{"row":55,"column":29}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":29},"end":{"row":55,"column":30}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":30},"end":{"row":55,"column":31}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":31},"end":{"row":55,"column":32}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":32},"end":{"row":55,"column":33}},"text":"M"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":33},"end":{"row":55,"column":34}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":34},"end":{"row":55,"column":35}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":35},"end":{"row":55,"column":36}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":36},"end":{"row":55,"column":37}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":37},"end":{"row":55,"column":38}},"text":"g"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":38},"end":{"row":55,"column":39}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":28},"end":{"row":55,"column":29}},"text":"&"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":55,"column":28},"end":{"row":55,"column":29}},"text":"&"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":28},"end":{"row":55,"column":29}},"text":"*"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":59,"column":25},"end":{"row":59,"column":26}},"text":"T"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":59,"column":24},"end":{"row":59,"column":25}},"text":"E"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":59,"column":23},"end":{"row":59,"column":24}},"text":"G"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":59,"column":23},"end":{"row":59,"column":24}},"text":"P"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":59,"column":24},"end":{"row":59,"column":25}},"text":"O"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":59,"column":25},"end":{"row":59,"column":26}},"text":"S"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":59,"column":26},"end":{"row":59,"column":27}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":58,"column":0},"end":{"row":59,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":58,"column":0},"end":{"row":58,"column":63}},"text":"{\"usersthreads\":{\"id\":1,\"usersid1\":0,\"usersid2\":0,\"threads\":1}}"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":57,"column":0},"end":{"row":58,"column":0}},"nl":"\r\n","lines":["    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":57,"column":0},"end":{"row":57,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":296,"column":0}},"nl":"\r\n","lines":["/**"," * Current limitations: "," * "," * 1. Only a single user is used amd should be used, i.e. user1@gmail.com"," * 2. Not all REST APIs are supported"," * "," */","//setup Dependencies","var express = require('express'),","    path = require('path'),","    options = require('node-options'),","    fileSystem = require('node-fs'),","    cors = require('cors');","var bodyParser = require('body-parser'); ","","var rootDir = path.resolve('.', 'resources').toLowerCase();","","var gFakeMsg1LikeCount = 0;  //TODO bad bad bad!!!","","// var opts =  {","//     \"port\"    : process.env.MOCK_API_PORT | 1080,","//     \"verbose\" : true","// };","// options.parse(process.argv.slice(2), opts);","//Setup Express","var app = express();","app.use(express.static('../www'));","app.use(cors());","app.use(bodyParser.urlencoded());","app.use(bodyParser.json());","// var server = app.listen(opts.port);","app.set('port', process.env.MOCK_API_PORT || 3000);  //NB: 8080 is the default port - DO NOT forget to change the baseUrl inside protractor.conf.js if the default port is changed!","var server = app.listen(app.get('port'), function () {","  console.log('Mock API Server Listening on http://localhost:' + app.get('port'));","  console.log('Root directory = \\'' + rootDir + '\\'');","});","","app.all('/explorer', function (req, res) {","    if (req.method == 'GET') {","        res.status(200).send('StrongLoop API Explorer');","    }","    res.end();","});","","app.all('/explorer/swagger.json', function (req, res) {","    var resourceDir = path.resolve('.', 'swagger.json');","    console.log('swagger.json [' + resourceDir + ']');","    var text = fileSystem.readFileSync(resourceDir);","    var message = stringFormat(text);","    if (req.method == 'GET') {","        res.status(200).send(message);","    }","    res.end();","});","","app.all('/api/*UsersThreads/*sendMessage', function (req, res) {","    var obj = `","    {\"usersthreads\":{\"id\":1,\"usersid1\":0,\"usersid2\":0,\"threads\":1}}","    `;","    if (req.method == 'POST') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*UsersThreads', function (req, res) {","    var obj = `","    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Quests', function (req, res) {","    var obj = `","    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Users/*findOne?filter=*', function (req, res) {","console.log('/api/*Users/findOne?filter=* req.id = [' + req.params.id + ']')","    var obj = `","    {\"id\":1,\"name\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Users', function (req, res) {","    var obj = `","    [{\"id\":1,\"name\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","//=== only support first message for now","app.all('/api/Messages/:id', function (req, res) {","    if (req.method == 'GET') {","        console.log('/api/Messages/:id req.id = [' + req.params.id + ']')","        var fakeLikeCount;","        if(req.params.id >= 0) {","            fakeLikeCount++;","        } else {","            fakeLikeCount--;","        }","        //=== flip the state from true to false!","        res.status(200).send(`{\"id\":' + req.params.id + ',\"subject\":\"Message by u ' + req.params.id + '\",\"text\":\"t1 from mock service\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"state\":false,\"type\":\"topic158-owner\",\"owner\":-1,\"likecount\":' + fakeLikeCount + '}`);","        res.end();","    }","});","","app.all('/api/Flags', function (req, res) {","    if (req.method == 'GET') {","        console.log('2');","        var user = req.body.user;","        console.log('3');","        console.log(user);","        // if(typeof user !== 'undefined' && user !== '') {","          console.log('4');","          res.status(200).send(`[{\"id\":1,\"subject\":\"Like by u 1\",\"description\":\"favourite of a message\",\"state\":0,\"messages\":1,\"owner\":1}]`);","","    } else","    if (req.method == 'POST') {","        if(typeof req.body === 'undefined') {","            console.log('1 /api/Flags posted!!! <-------------------------');","            res.status(200).send('{\"status\":\"\"}');","        } else {","            // } else {","            //   console.log('5');","            //   res.status(200).send('{\"status\":\"\"}');","            // }","        }","    }","    res.end();","});","","//TODO 1-23 this needs to be in lb-services.js for reuse! (c.f. https://docs.strongloop.com/display/public/LB/AngularJS+JavaScript+SDK)","function predicatBy(prop){","   return function(a,b){","      if( a[prop] > b[prop]){","          return 1;","      }else if( a[prop] < b[prop] ){","          return -1;","      }","      return 0;","   }","}","","app.all('/api/*Threads', function (req, res) {","    var obj = `","    {\"id\":5,\"messages\":5}","    `;","    if (req.method == 'POST') {","        res.status(200).send(obj);","    }    ","    res.end();","});","","app.all('/api/*Threads/wall', function (req, res) {","    var obj =","        [","    {\"id\":1,\"subject\":\"string\",\"text\":\"first topic - 1 comment\",\"createdat\":\"2016-04-06T00:02:30.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic1-owner\",\"owner\":1,\"threadid\":1,\"likecount\":gFakeMsg1LikeCount},","    {\"id\":2,\"subject\":\"string\",\"text\":\"comment 1\",\"createdat\":\"2016-04-11T13:45:00.000Z\",\"updatedat\":\"2016-04-01T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":2,\"threadid\":1,\"likecount\":1},","    {\"id\":3,\"subject\":\"string\",\"text\":\"second topic - two comments\",\"createdat\":\"2016-04-11T13:45:00.000Z\",\"updatedat\":\"2016-04-01T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2-owner\",\"owner\":2,\"threadid\":2,\"likecount\":1},","    {\"id\":4,\"subject\":\"string\",\"text\":\"comment 2\",\"createdat\":\"2016-04-11T00:00:00.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":3,\"threadid\":2,\"likecount\":1},","    {\"id\":5,\"subject\":\"string\",\"text\":\"comment 3\",\"createdat\":\"2016-04-11T00:00:00.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":3,\"threadid\":2,\"likecount\":1},","    {\"id\":6,\"subject\":\"string\",\"text\":\"third topic - zero comment\",\"createdat\":\"2016-04-07T13:45:00.000Z\",\"updatedat\":\"2016-04-07T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic1-owner\",\"owner\":0,\"threadid\":1,\"likecount\":0}","        ];","    //console.log('cb obj 3 [');","    //console.log(obj);","    //console.log(']');","    ","    //=== sort it based on owner's, message type and timestamp","    // var data = Array.prototype.slice.call(obj);","    var sortedMessages;","    // sortedMessages = data.sort(predicatBy('createdat'));","    // sortedMessages = sortedMessages.sort(predicatBy('owner'));","    // sortedMessages = sortedMessages.sort(predicatBy('type'));","    sortedMessages = obj;  //TODO comment this out for sorting!","    var wrapper = {'wall':sortedMessages};","    var message = wrapper;","    // console.log(typeof message);","    // console.log(message);","    // console.log('sorted cb obj [');","    // console.log(sortedMessages);","    // console.log(']');","","    // var message = stringFormat(text);","    if (req.method == 'GET') {","        res.status(200).send(message);","        // console.log('/api/Messages GET message [' + message + '] <===================================================');","    }","    if (req.method == 'POST') {","        console.log('/api/Messages POST req id [' + req.body.id + '] text [' + req.body.text + ']');","        res.status(200).send('{\"id\":7,\"subject\":\"string\",\"text\":\"'+ req.body.text + '\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"state\":\"string\",\"type\":\"string\",\"owner\":0}');","    }    ","    res.end();","});","","app.all('/api/Messages', function (req, res) {","    console.log('/api/Messages called!');","    if (req.method == 'PUT') {","        console.log('/api/Messages PUT called!');","        gFakeMsg1LikeCount = 1;  //fake it, assume it is from Like flag set!","        // res.status(200).send(message);","        // res.end();","    } else","    if (req.method == 'GET') {","        console.log('/api/Messages GET called!');","        // res.status(200).send(message);","        // res.end();","    } else","    if (req.method == 'POST') {","        // console.log('/api/Messages POST req fromwho [' + req.body.fromwho + '] towho [' + req.body.towho + '] text [' + req.body.text + ']');","        // console.log('/api/Messages POST req body [' + req.body + ']');","        var obj = `","        {\"id\":5,\"subject\":\"Message by u 2\",\"text\":\"t1\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Public\",\"type\":\"NA\",\"owner\":1,\"likecount\":0}","        `;","","        res.status(200).send(obj);","    } else","    if (req.method == 'PUT') {","        var obj = `","        {\"id\":5,\"subject\":\"Message by u 2\",\"text\":\"t1\",\"createdat\":\"2016-04-04T20:00:00.000Z\",\"updatedat\":\"2016-04-04T20:00:00.000Z\",\"liked\":\"false\",\"state\":\"Public\",\"type\":\"topic5-owner\",\"owner\":1,\"likecount\":0}","        `;","    ","        res.status(200).send(obj);","    }","","    res.end();","});","","","app.all('/api/Users/login', function (req, res) {","// app.all('/Users/login', function (req, res) {","    if (req.method == 'POST') {","        if(typeof req.body === 'undefined') {","            console.log('1');","            res.status(200).send('{\"status\":\"\"}');","        } else {","            console.log('2');","            var userId = req.body.userId;","            var password = req.body.password;","            console.log('3');","            console.log(userId);","            console.log(password);","            if(userId === 'test@gmail.com' && password === '111111') {","              console.log('4');","              //=== Notes: the response type has to match Loopback return type!","              res.status(200).send(`{\"status\":{\"flag\": \"ok\", \"userId\": \"user1@gmail.com\", \"jwtToken\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJ1c2VyMUBnbWFpbC5jb20iLCJyb2xlIjoidXNlciIsImV4cCI6MTQ3MzkzNTg5ODQxNn0.DBOZVQirzgnYVRN-pLZIzgMaqAgTt7eItlH7G9GNUw4\", \"user\": {\"session_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjMsInVzZXJfaWQiOjMsImVtYWlsIjoidXNlcjFAZ21haWwuY29tIiwiZm9yZXZlciI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9kZi1zdGVtMi5lbnRlcnByaXNlLmRyZWFtZmFjdG9yeS5jb21cL2FwaVwvdjJcL3VzZXJcL3Nlc3Npb24iLCJpYXQiOjE0NjYxNTk4NzksImV4cCI6MTQ2NjE2MzQ3OSwibmJmIjoxNDY2MTU5ODc5LCJqdGkiOiJlYWNmNWE3NTA5MjY5OTU5YzhhMjkyZGJkYjA3Y2U3ZiJ9.I_YBX39oQpIWLQ0ZeVgPsjkLn-IUte-FzfJ6dmtm_sI\",\"session_id\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjMsInVzZXJfaWQiOjMsImVtYWlsIjoidXNlcjFAZ21haWwuY29tIiwiZm9yZXZlciI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9kZi1zdGVtMi5lbnRlcnByaXNlLmRyZWFtZmFjdG9yeS5jb21cL2FwaVwvdjJcL3VzZXJcL3Nlc3Npb24iLCJpYXQiOjE0NjYxNTk4NzksImV4cCI6MTQ2NjE2MzQ3OSwibmJmIjoxNDY2MTU5ODc5LCJqdGkiOiJlYWNmNWE3NTA5MjY5OTU5YzhhMjkyZGJkYjA3Y2U3ZiJ9.I_YBX39oQpIWLQ0ZeVgPsjkLn-IUte-FzfJ6dmtm_sI\",\"id\":3,\"name\":\"u1\",\"first_name\":\"u\",\"last_name\":\"1\",\"email\":\"user1@gmail.com\",\"is_sys_admin\":false,\"last_login_date\":\"2016-06-17 10:37:59\",\"host\":\"enterprise-console\"}}}`);","            } else {","              console.log('5');","              res.status(200).send('{\"status\":\"\"}');","            }","          }","    } ","    else if (req.method == 'GET') {","        //","    } else {","        res.status(404).send('Don\\'t know what you\\'re looking for...');","    }","    res.end();","});","","function stringFormat(format /* arg1, arg2... */) {","    if (arguments.length === 0) {","        return undefined;","    }","    if (arguments.length === 1) {","        return format;","    }","    var args = Array.prototype.slice.call(arguments, 1);","    return format.replace(/\\{\\{|\\}\\}|\\{(\\d+)\\}/g, function (m, n) {","        if (m === \"{{\") {","            return \"{\";","        }","        if (m === \"}}\") {","            return \"}\";","        }","        return args[n];","    });","}","","exports.app = app;","exports.server = server;"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":3}},"text":"/**"},{"action":"insertText","range":{"start":{"row":0,"column":3},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":306,"column":0}},"lines":[" * Current limitations: "," * "," * 1. Only a single user is used amd should be used, i.e. user1@gmail.com"," * 2. Not all REST APIs are supported"," * "," */","//setup Dependencies","var express = require('express'),","    path = require('path'),","    options = require('node-options'),","    fileSystem = require('node-fs'),","    cors = require('cors');","var bodyParser = require('body-parser'); ","","var rootDir = path.resolve('.', 'resources').toLowerCase();","","var gFakeMsg1LikeCount = 0;  //TODO bad bad bad!!!","","// var opts =  {","//     \"port\"    : process.env.MOCK_API_PORT | 1080,","//     \"verbose\" : true","// };","// options.parse(process.argv.slice(2), opts);","//Setup Express","var app = express();","app.use(express.static('../www'));","app.use(cors());","app.use(bodyParser.urlencoded());","app.use(bodyParser.json());","// var server = app.listen(opts.port);","app.set('port', process.env.MOCK_API_PORT || 3000);  //NB: 8080 is the default port - DO NOT forget to change the baseUrl inside protractor.conf.js if the default port is changed!","var server = app.listen(app.get('port'), function () {","  console.log('Mock API Server Listening on http://localhost:' + app.get('port'));","  console.log('Root directory = \\'' + rootDir + '\\'');","});","","app.all('/explorer', function (req, res) {","    if (req.method == 'GET') {","        res.status(200).send('StrongLoop API Explorer');","    }","    res.end();","});","","app.all('/explorer/swagger.json', function (req, res) {","    var resourceDir = path.resolve('.', 'swagger.json');","    console.log('swagger.json [' + resourceDir + ']');","    var text = fileSystem.readFileSync(resourceDir);","    var message = stringFormat(text);","    if (req.method == 'GET') {","        res.status(200).send(message);","    }","    res.end();","});","","app.all('/api/*Usersthreads/*mymessages/:id', function (req, res) {","    var obj = `","{\"messages\":[{\"id\":0,\"name\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}]}","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*UsersThreads/*sendMessage', function (req, res) {","    var obj = `","    {\"usersthreads\":{\"id\":35,\"messages\":254}}","    `;","    if (req.method == 'POST') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*UsersThreads', function (req, res) {","    var obj = `","    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Quests', function (req, res) {","    var obj = `","    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Users/*findOne?filter=*', function (req, res) {","console.log('/api/*Users/findOne?filter=* req.id = [' + req.params.id + ']')","    var obj = `","    {\"id\":1,\"name\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Users', function (req, res) {","    var obj = `","    [{\"id\":1,\"name\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","//=== only support first message for now","app.all('/api/Messages/:id', function (req, res) {","    if (req.method == 'GET') {","        console.log('/api/Messages/:id req.id = [' + req.params.id + ']')","        var fakeLikeCount;","        if(req.params.id >= 0) {","            fakeLikeCount++;","        } else {","            fakeLikeCount--;","        }","        //=== flip the state from true to false!","        res.status(200).send(`{\"id\":' + req.params.id + ',\"subject\":\"Message by u ' + req.params.id + '\",\"text\":\"t1 from mock service\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"state\":false,\"type\":\"topic158-owner\",\"owner\":-1,\"likecount\":' + fakeLikeCount + '}`);","        res.end();","    }","});","","app.all('/api/Flags', function (req, res) {","    if (req.method == 'GET') {","        console.log('2');","        var user = req.body.user;","        console.log('3');","        console.log(user);","        // if(typeof user !== 'undefined' && user !== '') {","          console.log('4');","          res.status(200).send(`[{\"id\":1,\"subject\":\"Like by u 1\",\"description\":\"favourite of a message\",\"state\":0,\"messages\":1,\"owner\":1}]`);","","    } else","    if (req.method == 'POST') {","        if(typeof req.body === 'undefined') {","            console.log('1 /api/Flags posted!!! <-------------------------');","            res.status(200).send('{\"status\":\"\"}');","        } else {","            // } else {","            //   console.log('5');","            //   res.status(200).send('{\"status\":\"\"}');","            // }","        }","    }","    res.end();","});","","//TODO 1-23 this needs to be in lb-services.js for reuse! (c.f. https://docs.strongloop.com/display/public/LB/AngularJS+JavaScript+SDK)","function predicatBy(prop){","   return function(a,b){","      if( a[prop] > b[prop]){","          return 1;","      }else if( a[prop] < b[prop] ){","          return -1;","      }","      return 0;","   }","}","","app.all('/api/*Threads', function (req, res) {","    var obj = `","    {\"id\":5,\"messages\":5}","    `;","    if (req.method == 'POST') {","        res.status(200).send(obj);","    }    ","    res.end();","});","","app.all('/api/*Threads/wall', function (req, res) {","    var obj =","        [","    {\"id\":1,\"subject\":\"string\",\"text\":\"first topic - 1 comment\",\"createdat\":\"2016-04-06T00:02:30.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic1-owner\",\"owner\":1,\"threadid\":1,\"likecount\":gFakeMsg1LikeCount},","    {\"id\":2,\"subject\":\"string\",\"text\":\"comment 1\",\"createdat\":\"2016-04-11T13:45:00.000Z\",\"updatedat\":\"2016-04-01T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":2,\"threadid\":1,\"likecount\":1},","    {\"id\":3,\"subject\":\"string\",\"text\":\"second topic - two comments\",\"createdat\":\"2016-04-11T13:45:00.000Z\",\"updatedat\":\"2016-04-01T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2-owner\",\"owner\":2,\"threadid\":2,\"likecount\":1},","    {\"id\":4,\"subject\":\"string\",\"text\":\"comment 2\",\"createdat\":\"2016-04-11T00:00:00.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":3,\"threadid\":2,\"likecount\":1},","    {\"id\":5,\"subject\":\"string\",\"text\":\"comment 3\",\"createdat\":\"2016-04-11T00:00:00.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":3,\"threadid\":2,\"likecount\":1},","    {\"id\":6,\"subject\":\"string\",\"text\":\"third topic - zero comment\",\"createdat\":\"2016-04-07T13:45:00.000Z\",\"updatedat\":\"2016-04-07T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic1-owner\",\"owner\":0,\"threadid\":1,\"likecount\":0}","        ];","    //console.log('cb obj 3 [');","    //console.log(obj);","    //console.log(']');","    ","    //=== sort it based on owner's, message type and timestamp","    // var data = Array.prototype.slice.call(obj);","    var sortedMessages;","    // sortedMessages = data.sort(predicatBy('createdat'));","    // sortedMessages = sortedMessages.sort(predicatBy('owner'));","    // sortedMessages = sortedMessages.sort(predicatBy('type'));","    sortedMessages = obj;  //TODO comment this out for sorting!","    var wrapper = {'wall':sortedMessages};","    var message = wrapper;","    // console.log(typeof message);","    // console.log(message);","    // console.log('sorted cb obj [');","    // console.log(sortedMessages);","    // console.log(']');","","    // var message = stringFormat(text);","    if (req.method == 'GET') {","        res.status(200).send(message);","        // console.log('/api/Messages GET message [' + message + '] <===================================================');","    }","    if (req.method == 'POST') {","        console.log('/api/Messages POST req id [' + req.body.id + '] text [' + req.body.text + ']');","        res.status(200).send('{\"id\":7,\"subject\":\"string\",\"text\":\"'+ req.body.text + '\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"state\":\"string\",\"type\":\"string\",\"owner\":0}');","    }    ","    res.end();","});","","app.all('/api/Messages', function (req, res) {","    console.log('/api/Messages called!');","    if (req.method == 'PUT') {","        console.log('/api/Messages PUT called!');","        gFakeMsg1LikeCount = 1;  //fake it, assume it is from Like flag set!","        // res.status(200).send(message);","        // res.end();","    } else","    if (req.method == 'GET') {","        console.log('/api/Messages GET called!');","        // res.status(200).send(message);","        // res.end();","    } else","    if (req.method == 'POST') {","        // console.log('/api/Messages POST req fromwho [' + req.body.fromwho + '] towho [' + req.body.towho + '] text [' + req.body.text + ']');","        // console.log('/api/Messages POST req body [' + req.body + ']');","        var obj = `","        {\"id\":5,\"subject\":\"Message by u 2\",\"text\":\"t1\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Public\",\"type\":\"NA\",\"owner\":1,\"likecount\":0}","        `;","","        res.status(200).send(obj);","    } else","    if (req.method == 'PUT') {","        var obj = `","        {\"id\":5,\"subject\":\"Message by u 2\",\"text\":\"t1\",\"createdat\":\"2016-04-04T20:00:00.000Z\",\"updatedat\":\"2016-04-04T20:00:00.000Z\",\"liked\":\"false\",\"state\":\"Public\",\"type\":\"topic5-owner\",\"owner\":1,\"likecount\":0}","        `;","    ","        res.status(200).send(obj);","    }","","    res.end();","});","","","app.all('/api/Users/login', function (req, res) {","// app.all('/Users/login', function (req, res) {","    if (req.method == 'POST') {","        if(typeof req.body === 'undefined') {","            console.log('1');","            res.status(200).send('{\"status\":\"\"}');","        } else {","            console.log('2');","            var userId = req.body.userId;","            var password = req.body.password;","            console.log('3');","            console.log(userId);","            console.log(password);","            if(userId === 'test@gmail.com' && password === '111111') {","              console.log('4');","              //=== Notes: the response type has to match Loopback return type!","              res.status(200).send(`{\"status\":{\"flag\": \"ok\", \"userId\": \"user1@gmail.com\", \"jwtToken\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJ1c2VyMUBnbWFpbC5jb20iLCJyb2xlIjoidXNlciIsImV4cCI6MTQ3MzkzNTg5ODQxNn0.DBOZVQirzgnYVRN-pLZIzgMaqAgTt7eItlH7G9GNUw4\", \"user\": {\"session_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjMsInVzZXJfaWQiOjMsImVtYWlsIjoidXNlcjFAZ21haWwuY29tIiwiZm9yZXZlciI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9kZi1zdGVtMi5lbnRlcnByaXNlLmRyZWFtZmFjdG9yeS5jb21cL2FwaVwvdjJcL3VzZXJcL3Nlc3Npb24iLCJpYXQiOjE0NjYxNTk4NzksImV4cCI6MTQ2NjE2MzQ3OSwibmJmIjoxNDY2MTU5ODc5LCJqdGkiOiJlYWNmNWE3NTA5MjY5OTU5YzhhMjkyZGJkYjA3Y2U3ZiJ9.I_YBX39oQpIWLQ0ZeVgPsjkLn-IUte-FzfJ6dmtm_sI\",\"session_id\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjMsInVzZXJfaWQiOjMsImVtYWlsIjoidXNlcjFAZ21haWwuY29tIiwiZm9yZXZlciI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9kZi1zdGVtMi5lbnRlcnByaXNlLmRyZWFtZmFjdG9yeS5jb21cL2FwaVwvdjJcL3VzZXJcL3Nlc3Npb24iLCJpYXQiOjE0NjYxNTk4NzksImV4cCI6MTQ2NjE2MzQ3OSwibmJmIjoxNDY2MTU5ODc5LCJqdGkiOiJlYWNmNWE3NTA5MjY5OTU5YzhhMjkyZGJkYjA3Y2U3ZiJ9.I_YBX39oQpIWLQ0ZeVgPsjkLn-IUte-FzfJ6dmtm_sI\",\"id\":3,\"name\":\"u1\",\"first_name\":\"u\",\"last_name\":\"1\",\"email\":\"user1@gmail.com\",\"is_sys_admin\":false,\"last_login_date\":\"2016-06-17 10:37:59\",\"host\":\"enterprise-console\"}}}`);","            } else {","              console.log('5');","              res.status(200).send('{\"status\":\"\"}');","            }","          }","    } ","    else if (req.method == 'GET') {","        //","    } else {","        res.status(404).send('Don\\'t know what you\\'re looking for...');","    }","    res.end();","});","","function stringFormat(format /* arg1, arg2... */) {","    if (arguments.length === 0) {","        return undefined;","    }","    if (arguments.length === 1) {","        return format;","    }","    var args = Array.prototype.slice.call(arguments, 1);","    return format.replace(/\\{\\{|\\}\\}|\\{(\\d+)\\}/g, function (m, n) {","        if (m === \"{{\") {","            return \"{\";","        }","        if (m === \"}}\") {","            return \"}\";","        }","        return args[n];","    });","}","","exports.app = app;","exports.server = server;"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":317,"column":0}},"nl":"\r\n","lines":["/**"," * Current limitations: "," * "," * 1. Only a single user is used amd should be used, i.e. user1@gmail.com"," * 2. Not all REST APIs are supported"," * "," */","//setup Dependencies","var express = require('express'),","    path = require('path'),","    options = require('node-options'),","    fileSystem = require('node-fs'),","    cors = require('cors');","var bodyParser = require('body-parser'); ","","var rootDir = path.resolve('.', 'resources').toLowerCase();","","var gFakeMsg1LikeCount = 0;  //TODO bad bad bad!!!","","// var opts =  {","//     \"port\"    : process.env.MOCK_API_PORT | 1080,","//     \"verbose\" : true","// };","// options.parse(process.argv.slice(2), opts);","//Setup Express","var app = express();","app.use(express.static('../www'));","app.use(cors());","app.use(bodyParser.urlencoded());","app.use(bodyParser.json());","// var server = app.listen(opts.port);","app.set('port', process.env.MOCK_API_PORT || 3000);  //NB: 8080 is the default port - DO NOT forget to change the baseUrl inside protractor.conf.js if the default port is changed!","var server = app.listen(app.get('port'), function () {","  console.log('Mock API Server Listening on http://localhost:' + app.get('port'));","  console.log('Root directory = \\'' + rootDir + '\\'');","});","","app.all('/explorer', function (req, res) {","    if (req.method == 'GET') {","        res.status(200).send('StrongLoop API Explorer');","    }","    res.end();","});","","app.all('/explorer/swagger.json', function (req, res) {","    var resourceDir = path.resolve('.', 'swagger.json');","    console.log('swagger.json [' + resourceDir + ']');","    var text = fileSystem.readFileSync(resourceDir);","    var message = stringFormat(text);","    if (req.method == 'GET') {","        res.status(200).send(message);","    }","    res.end();","});","","","app.all('/api/*Usersthreads/*inbox*', function (req, res) {","    var obj = `","{\"inbox\":[{\"id\":257,\"subject\":\"Message by u 1\",\"text\":\"test 1 from my messages\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Private\",\"type\":\"NA\",\"owner\":0,\"likecount\":0,\"threadid\":39},{\"id\":258,\"subject\":\"Message by u 1\",\"text\":\"test 2 from my messages\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Private\",\"type\":\"NA\",\"owner\":0,\"likecount\":0,\"threadid\":39},{\"id\":257,\"subject\":\"Message by u 1\",\"text\":\"test 1 from my messages\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Private\",\"type\":\"NA\",\"owner\":0,\"likecount\":0,\"threadid\":39},{\"id\":258,\"subject\":\"Message by u 1\",\"text\":\"test 2 from my messages\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Private\",\"type\":\"NA\",\"owner\":0,\"likecount\":0,\"threadid\":39}]}","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Usersthreads/*mymessages/:id', function (req, res) {","    var obj = `","{\"messages\":[{\"id\":0,\"name\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}]}","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*UsersThreads/*sendMessage', function (req, res) {","    var obj = `","    {\"usersthreads\":{\"id\":35,\"messages\":254}}","    `;","    if (req.method == 'POST') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*UsersThreads', function (req, res) {","    var obj = `","    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Quests', function (req, res) {","    var obj = `","    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Users/*findOne?filter=*', function (req, res) {","console.log('/api/*Users/findOne?filter=* req.id = [' + req.params.id + ']')","    var obj = `","    {\"id\":1,\"name\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Users', function (req, res) {","    var obj = `","    [{\"id\":1,\"name\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","//=== only support first message for now","app.all('/api/Messages/:id', function (req, res) {","    if (req.method == 'GET') {","        console.log('/api/Messages/:id req.id = [' + req.params.id + ']')","        var fakeLikeCount;","        if(req.params.id >= 0) {","            fakeLikeCount++;","        } else {","            fakeLikeCount--;","        }","        //=== flip the state from true to false!","        res.status(200).send(`{\"id\":' + req.params.id + ',\"subject\":\"Message by u ' + req.params.id + '\",\"text\":\"t1 from mock service\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"state\":false,\"type\":\"topic158-owner\",\"owner\":-1,\"likecount\":' + fakeLikeCount + '}`);","        res.end();","    }","});","","app.all('/api/Flags', function (req, res) {","    if (req.method == 'GET') {","        console.log('2');","        var user = req.body.user;","        console.log('3');","        console.log(user);","        // if(typeof user !== 'undefined' && user !== '') {","          console.log('4');","          res.status(200).send(`[{\"id\":1,\"subject\":\"Like by u 1\",\"description\":\"favourite of a message\",\"state\":0,\"messages\":1,\"owner\":1}]`);","","    } else","    if (req.method == 'POST') {","        if(typeof req.body === 'undefined') {","            console.log('1 /api/Flags posted!!! <-------------------------');","            res.status(200).send('{\"status\":\"\"}');","        } else {","            // } else {","            //   console.log('5');","            //   res.status(200).send('{\"status\":\"\"}');","            // }","        }","    }","    res.end();","});","","//TODO 1-23 this needs to be in lb-services.js for reuse! (c.f. https://docs.strongloop.com/display/public/LB/AngularJS+JavaScript+SDK)","function predicatBy(prop){","   return function(a,b){","      if( a[prop] > b[prop]){","          return 1;","      }else if( a[prop] < b[prop] ){","          return -1;","      }","      return 0;","   }","}","","app.all('/api/*Threads', function (req, res) {","    var obj = `","    {\"id\":5,\"messages\":5}","    `;","    if (req.method == 'POST') {","        res.status(200).send(obj);","    }    ","    res.end();","});","","app.all('/api/*Threads/wall', function (req, res) {","    var obj =","        [","    {\"id\":1,\"subject\":\"string\",\"text\":\"first topic - 1 comment\",\"createdat\":\"2016-04-06T00:02:30.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic1-owner\",\"owner\":1,\"threadid\":1,\"likecount\":gFakeMsg1LikeCount},","    {\"id\":2,\"subject\":\"string\",\"text\":\"comment 1\",\"createdat\":\"2016-04-11T13:45:00.000Z\",\"updatedat\":\"2016-04-01T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":2,\"threadid\":1,\"likecount\":1},","    {\"id\":3,\"subject\":\"string\",\"text\":\"second topic - two comments\",\"createdat\":\"2016-04-11T13:45:00.000Z\",\"updatedat\":\"2016-04-01T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2-owner\",\"owner\":2,\"threadid\":2,\"likecount\":1},","    {\"id\":4,\"subject\":\"string\",\"text\":\"comment 2\",\"createdat\":\"2016-04-11T00:00:00.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":3,\"threadid\":2,\"likecount\":1},","    {\"id\":5,\"subject\":\"string\",\"text\":\"comment 3\",\"createdat\":\"2016-04-11T00:00:00.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":3,\"threadid\":2,\"likecount\":1},","    {\"id\":6,\"subject\":\"string\",\"text\":\"third topic - zero comment\",\"createdat\":\"2016-04-07T13:45:00.000Z\",\"updatedat\":\"2016-04-07T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic1-owner\",\"owner\":0,\"threadid\":1,\"likecount\":0}","        ];","    //console.log('cb obj 3 [');","    //console.log(obj);","    //console.log(']');","    ","    //=== sort it based on owner's, message type and timestamp","    // var data = Array.prototype.slice.call(obj);","    var sortedMessages;","    // sortedMessages = data.sort(predicatBy('createdat'));","    // sortedMessages = sortedMessages.sort(predicatBy('owner'));","    // sortedMessages = sortedMessages.sort(predicatBy('type'));","    sortedMessages = obj;  //TODO comment this out for sorting!","    var wrapper = {'wall':sortedMessages};","    var message = wrapper;","    // console.log(typeof message);","    // console.log(message);","    // console.log('sorted cb obj [');","    // console.log(sortedMessages);","    // console.log(']');","","    // var message = stringFormat(text);","    if (req.method == 'GET') {","        res.status(200).send(message);","        // console.log('/api/Messages GET message [' + message + '] <===================================================');","    }","    if (req.method == 'POST') {","        console.log('/api/Messages POST req id [' + req.body.id + '] text [' + req.body.text + ']');","        res.status(200).send('{\"id\":7,\"subject\":\"string\",\"text\":\"'+ req.body.text + '\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"state\":\"string\",\"type\":\"string\",\"owner\":0}');","    }    ","    res.end();","});","","app.all('/api/Messages', function (req, res) {","    console.log('/api/Messages called!');","    if (req.method == 'PUT') {","        console.log('/api/Messages PUT called!');","        gFakeMsg1LikeCount = 1;  //fake it, assume it is from Like flag set!","        // res.status(200).send(message);","        // res.end();","    } else","    if (req.method == 'GET') {","        console.log('/api/Messages GET called!');","        // res.status(200).send(message);","        // res.end();","    } else","    if (req.method == 'POST') {","        // console.log('/api/Messages POST req fromwho [' + req.body.fromwho + '] towho [' + req.body.towho + '] text [' + req.body.text + ']');","        // console.log('/api/Messages POST req body [' + req.body + ']');","        var obj = `","        {\"id\":5,\"subject\":\"Message by u 2\",\"text\":\"t1\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Public\",\"type\":\"NA\",\"owner\":1,\"likecount\":0}","        `;","","        res.status(200).send(obj);","    } else","    if (req.method == 'PUT') {","        var obj = `","        {\"id\":5,\"subject\":\"Message by u 2\",\"text\":\"t1\",\"createdat\":\"2016-04-04T20:00:00.000Z\",\"updatedat\":\"2016-04-04T20:00:00.000Z\",\"liked\":\"false\",\"state\":\"Public\",\"type\":\"topic5-owner\",\"owner\":1,\"likecount\":0}","        `;","    ","        res.status(200).send(obj);","    }","","    res.end();","});","","","app.all('/api/Users/login', function (req, res) {","// app.all('/Users/login', function (req, res) {","    if (req.method == 'POST') {","        if(typeof req.body === 'undefined') {","            console.log('1');","            res.status(200).send('{\"status\":\"\"}');","        } else {","            console.log('2');","            var userId = req.body.userId;","            var password = req.body.password;","            console.log('3');","            console.log(userId);","            console.log(password);","            if(userId === 'test@gmail.com' && password === '111111') {","              console.log('4');","              //=== Notes: the response type has to match Loopback return type!","              res.status(200).send(`{\"status\":{\"flag\": \"ok\", \"userId\": \"user1@gmail.com\", \"jwtToken\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJ1c2VyMUBnbWFpbC5jb20iLCJyb2xlIjoidXNlciIsImV4cCI6MTQ3MzkzNTg5ODQxNn0.DBOZVQirzgnYVRN-pLZIzgMaqAgTt7eItlH7G9GNUw4\", \"user\": {\"session_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjMsInVzZXJfaWQiOjMsImVtYWlsIjoidXNlcjFAZ21haWwuY29tIiwiZm9yZXZlciI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9kZi1zdGVtMi5lbnRlcnByaXNlLmRyZWFtZmFjdG9yeS5jb21cL2FwaVwvdjJcL3VzZXJcL3Nlc3Npb24iLCJpYXQiOjE0NjYxNTk4NzksImV4cCI6MTQ2NjE2MzQ3OSwibmJmIjoxNDY2MTU5ODc5LCJqdGkiOiJlYWNmNWE3NTA5MjY5OTU5YzhhMjkyZGJkYjA3Y2U3ZiJ9.I_YBX39oQpIWLQ0ZeVgPsjkLn-IUte-FzfJ6dmtm_sI\",\"session_id\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjMsInVzZXJfaWQiOjMsImVtYWlsIjoidXNlcjFAZ21haWwuY29tIiwiZm9yZXZlciI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9kZi1zdGVtMi5lbnRlcnByaXNlLmRyZWFtZmFjdG9yeS5jb21cL2FwaVwvdjJcL3VzZXJcL3Nlc3Npb24iLCJpYXQiOjE0NjYxNTk4NzksImV4cCI6MTQ2NjE2MzQ3OSwibmJmIjoxNDY2MTU5ODc5LCJqdGkiOiJlYWNmNWE3NTA5MjY5OTU5YzhhMjkyZGJkYjA3Y2U3ZiJ9.I_YBX39oQpIWLQ0ZeVgPsjkLn-IUte-FzfJ6dmtm_sI\",\"id\":3,\"name\":\"u1\",\"first_name\":\"u\",\"last_name\":\"1\",\"email\":\"user1@gmail.com\",\"is_sys_admin\":false,\"last_login_date\":\"2016-06-17 10:37:59\",\"host\":\"enterprise-console\"}}}`);","            } else {","              console.log('5');","              res.status(200).send('{\"status\":\"\"}');","            }","          }","    } ","    else if (req.method == 'GET') {","        //","    } else {","        res.status(404).send('Don\\'t know what you\\'re looking for...');","    }","    res.end();","});","","function stringFormat(format /* arg1, arg2... */) {","    if (arguments.length === 0) {","        return undefined;","    }","    if (arguments.length === 1) {","        return format;","    }","    var args = Array.prototype.slice.call(arguments, 1);","    return format.replace(/\\{\\{|\\}\\}|\\{(\\d+)\\}/g, function (m, n) {","        if (m === \"{{\") {","            return \"{\";","        }","        if (m === \"}}\") {","            return \"}\";","        }","        return args[n];","    });","}","","exports.app = app;","exports.server = server;"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":3}},"text":"/**"},{"action":"insertText","range":{"start":{"row":0,"column":3},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":317,"column":0}},"lines":[" * Current limitations: "," * "," * 1. Only a single user is used amd should be used, i.e. user1@gmail.com"," * 2. Not all REST APIs are supported"," * "," */","//setup Dependencies","var express = require('express'),","    path = require('path'),","    options = require('node-options'),","    fileSystem = require('node-fs'),","    cors = require('cors');","var bodyParser = require('body-parser'); ","","var rootDir = path.resolve('.', 'resources').toLowerCase();","","var gFakeMsg1LikeCount = 0;  //TODO bad bad bad!!!","","// var opts =  {","//     \"port\"    : process.env.MOCK_API_PORT | 1080,","//     \"verbose\" : true","// };","// options.parse(process.argv.slice(2), opts);","//Setup Express","var app = express();","app.use(express.static('../www'));","app.use(cors());","app.use(bodyParser.urlencoded());","app.use(bodyParser.json());","// var server = app.listen(opts.port);","app.set('port', process.env.MOCK_API_PORT || 3000);  //NB: 8080 is the default port - DO NOT forget to change the baseUrl inside protractor.conf.js if the default port is changed!","var server = app.listen(app.get('port'), function () {","  console.log('Mock API Server Listening on http://localhost:' + app.get('port'));","  console.log('Root directory = \\'' + rootDir + '\\'');","});","","app.all('/explorer', function (req, res) {","    if (req.method == 'GET') {","        res.status(200).send('StrongLoop API Explorer');","    }","    res.end();","});","","app.all('/explorer/swagger.json', function (req, res) {","    var resourceDir = path.resolve('.', 'swagger.json');","    console.log('swagger.json [' + resourceDir + ']');","    var text = fileSystem.readFileSync(resourceDir);","    var message = stringFormat(text);","    if (req.method == 'GET') {","        res.status(200).send(message);","    }","    res.end();","});","","","app.all('/api/*Usersthreads/*inbox*', function (req, res) {","    var obj = `","{\"inbox\":[{\"id\":257,\"subject\":\"Message by u 1\",\"text\":\"test 1 from my messages\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Private\",\"type\":\"NA\",\"owner\":0,\"likecount\":0,\"threadid\":39},{\"id\":258,\"subject\":\"Message by u 1\",\"text\":\"test 2 from my messages\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Private\",\"type\":\"NA\",\"owner\":0,\"likecount\":0,\"threadid\":39},{\"id\":257,\"subject\":\"Message by u 1\",\"text\":\"test 1 from my messages\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Private\",\"type\":\"NA\",\"owner\":0,\"likecount\":0,\"threadid\":39},{\"id\":258,\"subject\":\"Message by u 1\",\"text\":\"test 2 from my messages\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Private\",\"type\":\"NA\",\"owner\":0,\"likecount\":0,\"threadid\":39}]}","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Usersthreads/*mymessages/:id', function (req, res) {","    var obj = `","{\"messages\":[{\"id\":0,\"name\":\"u 1\",\"email\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}]}","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*UsersThreads/*sendMessage', function (req, res) {","    var obj = `","    {\"usersthreads\":{\"id\":35,\"messages\":254}}","    `;","    if (req.method == 'POST') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*UsersThreads', function (req, res) {","    var obj = `","    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Quests', function (req, res) {","    var obj = `","    [{\"id\":1,\"title\":\"Hydration\",\"description\":null,\"threshold\":2,\"state\":\"Unlocked\",\"point\":5},{\"id\":2,\"title\":\"Medication\",\"description\":null,\"threshold\":4,\"state\":\"Unlocked\",\"point\":10},{\"id\":3,\"title\":\"Exercise\",\"description\":null,\"threshold\":10,\"state\":\"Unlocked\",\"point\":20}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Users/*findOne?filter=*', function (req, res) {","console.log('/api/*Users/findOne?filter=* req.id = [' + req.params.id + ']')","    var obj = `","    {\"id\":1,\"name\":\"u 1\",\"email\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","app.all('/api/*Users', function (req, res) {","    var obj = `","    [{\"id\":1,\"name\":\"u 1\",\"email\":\"user1@gmail.com\",\"studyid\":\"string\",\"interests\":\"string\",\"transplantdate\":\"2016-07-11T00:00:00.000Z\",\"startdate\":\"2016-07-11T00:00:00.000Z\",\"avatar\":\"string\",\"state\":0}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});","","//=== only support first message for now","app.all('/api/Messages/:id', function (req, res) {","    if (req.method == 'GET') {","        console.log('/api/Messages/:id req.id = [' + req.params.id + ']')","        var fakeLikeCount;","        if(req.params.id >= 0) {","            fakeLikeCount++;","        } else {","            fakeLikeCount--;","        }","        //=== flip the state from true to false!","        res.status(200).send(`{\"id\":' + req.params.id + ',\"subject\":\"Message by u ' + req.params.id + '\",\"text\":\"t1 from mock service\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"state\":false,\"type\":\"topic158-owner\",\"owner\":-1,\"likecount\":' + fakeLikeCount + '}`);","        res.end();","    }","});","","app.all('/api/Flags', function (req, res) {","    if (req.method == 'GET') {","        console.log('2');","        var user = req.body.user;","        console.log('3');","        console.log(user);","        // if(typeof user !== 'undefined' && user !== '') {","          console.log('4');","          res.status(200).send(`[{\"id\":1,\"subject\":\"Like by u 1\",\"description\":\"favourite of a message\",\"state\":0,\"messages\":1,\"owner\":1}]`);","","    } else","    if (req.method == 'POST') {","        if(typeof req.body === 'undefined') {","            console.log('1 /api/Flags posted!!! <-------------------------');","            res.status(200).send('{\"status\":\"\"}');","        } else {","            // } else {","            //   console.log('5');","            //   res.status(200).send('{\"status\":\"\"}');","            // }","        }","    }","    res.end();","});","","//TODO 1-23 this needs to be in lb-services.js for reuse! (c.f. https://docs.strongloop.com/display/public/LB/AngularJS+JavaScript+SDK)","function predicatBy(prop){","   return function(a,b){","      if( a[prop] > b[prop]){","          return 1;","      }else if( a[prop] < b[prop] ){","          return -1;","      }","      return 0;","   }","}","","app.all('/api/*Threads', function (req, res) {","    var obj = `","    {\"id\":5,\"messages\":5}","    `;","    if (req.method == 'POST') {","        res.status(200).send(obj);","    }    ","    res.end();","});","","app.all('/api/*Threads/wall', function (req, res) {","    var obj =","        [","    {\"id\":1,\"subject\":\"string\",\"text\":\"first topic - 1 comment\",\"createdat\":\"2016-04-06T00:02:30.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic1-owner\",\"owner\":1,\"threadid\":1,\"likecount\":gFakeMsg1LikeCount},","    {\"id\":2,\"subject\":\"string\",\"text\":\"comment 1\",\"createdat\":\"2016-04-11T13:45:00.000Z\",\"updatedat\":\"2016-04-01T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":2,\"threadid\":1,\"likecount\":1},","    {\"id\":3,\"subject\":\"string\",\"text\":\"second topic - two comments\",\"createdat\":\"2016-04-11T13:45:00.000Z\",\"updatedat\":\"2016-04-01T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2-owner\",\"owner\":2,\"threadid\":2,\"likecount\":1},","    {\"id\":4,\"subject\":\"string\",\"text\":\"comment 2\",\"createdat\":\"2016-04-11T00:00:00.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":3,\"threadid\":2,\"likecount\":1},","    {\"id\":5,\"subject\":\"string\",\"text\":\"comment 3\",\"createdat\":\"2016-04-11T00:00:00.000Z\",\"updatedat\":\"2016-04-06T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic2\",\"owner\":3,\"threadid\":2,\"likecount\":1},","    {\"id\":6,\"subject\":\"string\",\"text\":\"third topic - zero comment\",\"createdat\":\"2016-04-07T13:45:00.000Z\",\"updatedat\":\"2016-04-07T00:00:00.000Z\",\"state\":\"string\",\"type\":\"topic1-owner\",\"owner\":0,\"threadid\":1,\"likecount\":0}","        ];","    //console.log('cb obj 3 [');","    //console.log(obj);","    //console.log(']');","    ","    //=== sort it based on owner's, message type and timestamp","    // var data = Array.prototype.slice.call(obj);","    var sortedMessages;","    // sortedMessages = data.sort(predicatBy('createdat'));","    // sortedMessages = sortedMessages.sort(predicatBy('owner'));","    // sortedMessages = sortedMessages.sort(predicatBy('type'));","    sortedMessages = obj;  //TODO comment this out for sorting!","    var wrapper = {'wall':sortedMessages};","    var message = wrapper;","    // console.log(typeof message);","    // console.log(message);","    // console.log('sorted cb obj [');","    // console.log(sortedMessages);","    // console.log(']');","","    // var message = stringFormat(text);","    if (req.method == 'GET') {","        res.status(200).send(message);","        // console.log('/api/Messages GET message [' + message + '] <===================================================');","    }","    if (req.method == 'POST') {","        console.log('/api/Messages POST req id [' + req.body.id + '] text [' + req.body.text + ']');","        res.status(200).send('{\"id\":7,\"subject\":\"string\",\"text\":\"'+ req.body.text + '\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"state\":\"string\",\"type\":\"string\",\"owner\":0}');","    }    ","    res.end();","});","","app.all('/api/Messages', function (req, res) {","    console.log('/api/Messages called!');","    if (req.method == 'PUT') {","        console.log('/api/Messages PUT called!');","        gFakeMsg1LikeCount = 1;  //fake it, assume it is from Like flag set!","        // res.status(200).send(message);","        // res.end();","    } else","    if (req.method == 'GET') {","        console.log('/api/Messages GET called!');","        // res.status(200).send(message);","        // res.end();","    } else","    if (req.method == 'POST') {","        // console.log('/api/Messages POST req fromwho [' + req.body.fromwho + '] towho [' + req.body.towho + '] text [' + req.body.text + ']');","        // console.log('/api/Messages POST req body [' + req.body + ']');","        var obj = `","        {\"id\":5,\"subject\":\"Message by u 2\",\"text\":\"t1\",\"createdat\":\"2016-04-05T00:00:00.000Z\",\"updatedat\":\"2016-04-05T00:00:00.000Z\",\"liked\":\"false\",\"state\":\"Public\",\"type\":\"NA\",\"owner\":1,\"likecount\":0}","        `;","","        res.status(200).send(obj);","    } else","    if (req.method == 'PUT') {","        var obj = `","        {\"id\":5,\"subject\":\"Message by u 2\",\"text\":\"t1\",\"createdat\":\"2016-04-04T20:00:00.000Z\",\"updatedat\":\"2016-04-04T20:00:00.000Z\",\"liked\":\"false\",\"state\":\"Public\",\"type\":\"topic5-owner\",\"owner\":1,\"likecount\":0}","        `;","    ","        res.status(200).send(obj);","    }","","    res.end();","});","","","app.all('/api/Users/login', function (req, res) {","// app.all('/Users/login', function (req, res) {","    if (req.method == 'POST') {","        if(typeof req.body === 'undefined') {","            console.log('1');","            res.status(200).send('{\"status\":\"\"}');","        } else {","            console.log('2');","            var userId = req.body.userId;","            var password = req.body.password;","            console.log('3');","            console.log(userId);","            console.log(password);","            if(userId === 'test@gmail.com' && password === '111111') {","              console.log('4');","              //=== Notes: the response type has to match Loopback return type!","              res.status(200).send(`{\"status\":{\"flag\": \"ok\", \"userId\": \"user1@gmail.com\", \"jwtToken\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJ1c2VyMUBnbWFpbC5jb20iLCJyb2xlIjoidXNlciIsImV4cCI6MTQ3MzkzNTg5ODQxNn0.DBOZVQirzgnYVRN-pLZIzgMaqAgTt7eItlH7G9GNUw4\", \"user\": {\"session_token\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjMsInVzZXJfaWQiOjMsImVtYWlsIjoidXNlcjFAZ21haWwuY29tIiwiZm9yZXZlciI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9kZi1zdGVtMi5lbnRlcnByaXNlLmRyZWFtZmFjdG9yeS5jb21cL2FwaVwvdjJcL3VzZXJcL3Nlc3Npb24iLCJpYXQiOjE0NjYxNTk4NzksImV4cCI6MTQ2NjE2MzQ3OSwibmJmIjoxNDY2MTU5ODc5LCJqdGkiOiJlYWNmNWE3NTA5MjY5OTU5YzhhMjkyZGJkYjA3Y2U3ZiJ9.I_YBX39oQpIWLQ0ZeVgPsjkLn-IUte-FzfJ6dmtm_sI\",\"session_id\":\"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjMsInVzZXJfaWQiOjMsImVtYWlsIjoidXNlcjFAZ21haWwuY29tIiwiZm9yZXZlciI6ZmFsc2UsImlzcyI6Imh0dHBzOlwvXC9kZi1zdGVtMi5lbnRlcnByaXNlLmRyZWFtZmFjdG9yeS5jb21cL2FwaVwvdjJcL3VzZXJcL3Nlc3Npb24iLCJpYXQiOjE0NjYxNTk4NzksImV4cCI6MTQ2NjE2MzQ3OSwibmJmIjoxNDY2MTU5ODc5LCJqdGkiOiJlYWNmNWE3NTA5MjY5OTU5YzhhMjkyZGJkYjA3Y2U3ZiJ9.I_YBX39oQpIWLQ0ZeVgPsjkLn-IUte-FzfJ6dmtm_sI\",\"id\":3,\"name\":\"u1\",\"first_name\":\"u\",\"last_name\":\"1\",\"email\":\"user1@gmail.com\",\"is_sys_admin\":false,\"last_login_date\":\"2016-06-17 10:37:59\",\"host\":\"enterprise-console\"}}}`);","            } else {","              console.log('5');","              res.status(200).send('{\"status\":\"\"}');","            }","          }","    } ","    else if (req.method == 'GET') {","        //","    } else {","        res.status(404).send('Don\\'t know what you\\'re looking for...');","    }","    res.end();","});","","function stringFormat(format /* arg1, arg2... */) {","    if (arguments.length === 0) {","        return undefined;","    }","    if (arguments.length === 1) {","        return format;","    }","    var args = Array.prototype.slice.call(arguments, 1);","    return format.replace(/\\{\\{|\\}\\}|\\{(\\d+)\\}/g, function (m, n) {","        if (m === \"{{\") {","            return \"{\";","        }","        if (m === \"}}\") {","            return \"}\";","        }","        return args[n];","    });","}","","exports.app = app;","exports.server = server;"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":0},"end":{"row":14,"column":51}},"text":"app.use(bodyParser.urlencoded({ extended: true }));"},{"action":"insertText","range":{"start":{"row":14,"column":51},"end":{"row":15,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":14,"column":0},"end":{"row":15,"column":0}},"nl":"\r\n","lines":["app.use(bodyParser.urlencoded({ extended: true }));"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":26,"column":0},"end":{"row":26,"column":51}},"text":"app.use(bodyParser.urlencoded({ extended: true }));"},{"action":"insertText","range":{"start":{"row":26,"column":51},"end":{"row":27,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":26,"column":0},"end":{"row":27,"column":0}},"nl":"\r\n","lines":["app.use(bodyParser.urlencoded({ extended: true }));"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":28,"column":0},"end":{"row":29,"column":0}},"nl":"\r\n","lines":["app.use(bodyParser.urlencoded());"]},{"action":"insertText","range":{"start":{"row":28,"column":0},"end":{"row":28,"column":51}},"text":"app.use(bodyParser.urlencoded({ extended: true }));"},{"action":"insertText","range":{"start":{"row":28,"column":51},"end":{"row":29,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":56,"column":0},"end":{"row":56,"column":61}},"text":"app.all('/api/*Questspowerups?filter*', function (req, res) {"},{"action":"insertText","range":{"start":{"row":56,"column":61},"end":{"row":57,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":57,"column":0},"end":{"row":65,"column":0}},"lines":["    var obj = `","[{\"id\":3,\"questsid\":2,\"powerupsid\":1,\"powerups\":{\"id\":1,\"title\":\"Hydration PU 1\",\"what\":\"a brief instruction () describing how to complete the Hydration\",\"how\":\"a corresponding explanation of how the Hydration may be beneficial to the user\",\"category\":\"Hydration\",\"subcategory\":\"Brainstorm\",\"state\":\"Incomplete\",\"point\":0,\"questsId\":null}}]","    `;","    if (req.method == 'GET') {","        res.status(200).send(obj);","    }","    res.end();","});"]}]}]],"redo":[]},"/www/templates/wall.html":{"scrollTop":0,"scrollLeft":148,"selection":{"start":{"row":0,"column":64},"end":{"row":0,"column":81}},"lastUse":1473394691664,"undo":[[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":147,"column":0}},"nl":"\r\n","lines":["<ion-view title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">","    <ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","        <ion-refresher on-refresh=\"wall.reload()\"></ion-refresher>","        <div>{{wall.processingMessage}}</div>","        <a ng-click=\"openPostComment($event)\" id=\"wall-button11\" style=\"font-size:-4px;\" class=\"button button-positive  button-block button-outline icon-right ion-edit\">Post Comment</a>","        <div collection-repeat=\"item in wall.items track by $index\">","<div class=\"list list-inset\">","            <ion-item>","                <img class=\"item-thumbnail-left item-text-wrap\" ng-class=\"wall.messageStyleByMessageType(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">","                <!-- <h2> Created by: {{wall.getOwner(item.subject)}}</h2>-->","                <h2>{{item.subject}}</h2>","                <p><time>{{ item.createdate | amUtcOffset:'+0000' | amCalendar }}</time></p>","                <button ng-click=\"wall.saveLike(this, $index)\" ng-class=\"wall.likeStyleByFlagState(item)\">{{item.likecount>0?item.likecount:''}}</button>","                <span ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</span>","            </ion-item>","            <!--<h2 ng-class=\"wall.messageStyleByMessageType(item)\">{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span><span style=\"float:right\"><time>{{ item.createdat | amUtcOffset:'+0000' | amCalendar }}</time></span></h2>-->","            <!--<p style=\"display:none\">***TEST MESSAGE = Grouped by Thread id: {{item.threadid}} Message type: {{item.type}}***</p>-->","            <!--<ion-item ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</ion-item>-->","</div>","        </div>","        ","        <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","        <div class=\"button-bar\">","            <button id=\"wall-button6\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-home\">","                <br>HOME</button>","            <button id=\"wall-button7\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-person\">","                <br>PROFILE</button>","            <button id=\"wall-button8\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-email\">","                <br>MESSAGES</button>","        </div>","        <div id=\"mydata\"></div>","    </ion-content>","</ion-view>","       <p>This is a comment. It's in response to the topic.</p>","      </ion-item>","      <ion-item class=\"comment item-avatar item-icon-right item-text-wrap\">","       <img class=\"item-text-wrap\" src=\"http://avatarfiles.alphacoders.com/296/2961.jpg\">","       <i class=\"icon ion-ios-heart-outline\"></i>","       <h2>Emma</h2>","       <p>This is another comment. It's in response to the same topic.</p>","      </ion-item>","      <ion-item class=\"comment item-avatar item-icon-right item-text-wrap\">","       <img class=\"item-text-wrap\" src=\"http://avatarfiles.alphacoders.com/422/42208.png\">","       <i class=\"icon ion-ios-heart energized\"></i>","       <h2>Mr. T</h2>","       <p>I pity the fool!</p>","      </ion-item>","    </div>","","","","    <button class=\"button button-energized\"","        ng-click=\"openModal()\"","        id=\"wall-button11\"","        style=\"font-size:-4px;width:100%;\"","        class=\"button button-positive button-full button-block button-outline icon-right ion-edit\">","        What's Happening?","    </button>","","    <div collection-repeat=\"item in wall.items track by $index\" class=\"list card repeater\">","","","<span ng-if=\"wall.isTopicOwner(item)\">","","","        <ion-item  ng-style=\"wall.getItemCSSStyle(item)\" class=\"topic item-avatar item-icon-right item-text-wrap\">","","            <img class=\"item-text-wrap\" ng-src=\"{{wall.getOwnerAvatar(item.ownerName)}}\">","            <!--<i class=\"icon ion-ios-heart energized\"></i>-->","","            <h2>{{item.ownerName}}</h2>","            <p><time>{{ item.createdat | amCalendar }}</time></p>","            <!-- @mayowa if you like, try to uncomment the following line -->","            <!-- <p><time>{{ item.createdat | amDateFormat:'MM.DD.YYYY HH:mm:ss' }}</time></p> -->","","          </ion-item>","            <ion-item class=\"item-text-wrap\">","            <p >{{item.text}}</p>","            </ion-item>","            <button ng-click=\"openModal(item)\" class=\"wall-reply button button-icon icon icon-right ion-reply\"></button>","            <i ng-click=\"wall.saveLike(this, $index)\"  ng-class=\"wall.likeStyleByFlagState(item)\">","                <span ng-show=\"item.likecount == 1\" class=\"subdued\" >{{item.likecount>0?item.likecount+' like':''}}</span><span ng-show=\"item.likecount > 1\" class=\"subdued\">{{item.likecount>0?item.likecount+' likes':''}}</span>","            </i>","","        </span>","        <ion-item ng-if=\"!wall.isTopicOwner(item)\" ng-style=\"wall.getItemCSSStyle(item)\" class=\"comment item-avatar item-icon-right item-text-wrap\">","            <img class=\"item-text-wrap\" ng-src=\"{{wall.getOwnerAvatar(item.ownerName)}}\">","            <h2>{{item.ownerName}}</h2>","            <p><time>{{ item.createdat | amCalendar }}</time></p>","            <p>{{item.text}}</p>","            <i ng-click=\"wall.saveLike(this, $index)\"  ng-class=\"wall.likeStyleByFlagState(item)\">","            </i>","        </ion-item>","","","    </div>","    </div>","","    <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","        <!--<div id=\"mydata\"></div>-->","        </ion-content>","        <div class=\"tabs tabs-icon-top\">","          <a class=\"tab-item\">","            <i class=\"icon ion-ios-list energized \"></i>","          </a>","          <a class=\"tab-item\">","            <i class=\"icon ion-ios-game-controller-b-outline\"></i>","          </a>","          <a class=\"tab-item\">","            <i class=\"icon ion-paper-airplane energized\"></i>","          </a>","          <a class=\"tab-item\">","            <i class=\"icon ion-ios-chatboxes-outline\"></i>","          </a>","          <a class=\"tab-item\">","            <i class=\"icon ion-ios-person-outline\"></i>","          </a>","        </div>","      </ion-view>","      </ion-item>","</div>","","</div>","","  </div>","","  <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","      <!--<div id=\"mydata\"></div>-->","      </ion-content>","      <div class=\"tabs tabs-icon-top\">","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-list energized \"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-game-controller-b-outline\"></i>","        </a>","        <a class=\"tab-item\">","          <i ng-click=\"openModal()\" class=\"icon ion-paper-airplane energized\"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-chatboxes-outline\"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-person-outline\"></i>","        </a>","      </div>","    </ion-view>"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":101}},"text":"<ion-view cache-view=false title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">"},{"action":"insertText","range":{"start":{"row":0,"column":101},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":49,"column":0}},"lines":["<ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","  <ion-refresher on-refresh=\"wall.reload()\"></ion-refresher>","  <div>{{wall.processingMessage}}</div>","  <button class=\"button button-energized\"","      ng-click=\"openModal()\"","      id=\"wall-button11\"","      style=\"font-size:-4px;width:100%;\"","      class=\"button button-positive button-full button-block button-outline icon-right ion-edit\">","      What's Happening?","  </button>","","  <div collection-repeat=\"item in wall.items track by $index\">","    <div class=\"list card\">","      <ion-item ng-style=\"wall.getStyle(item)\" class=\"item-avatar item-icon-right item-text-wrap\">","          <img class=\"item-text-wrap\" ng-src=\"{{wall.getOwnerAvatar(item.ownerName)}}\">","          <h2>{{item.ownerName}}</h2>","          <p><time>{{ item.createdat | amCalendar }}</time></p>","          <p>{{item.text}}</p>","          <button ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openModal(item)\" class=\"wall-reply button button-icon icon icon-right ion-reply\"></button>","      </ion-item>","      <ion-item>","          <i ng-click=\"wall.saveLike(this, $index)\"  ng-class=\"wall.getStyleByFlagState(item, $index)\">","              <span ng-show=\"item.likecount == 1\" class=\"subdued\" >{{item.likecount>0?item.likecount+' like':''}}</span><span ng-show=\"item.likecount > 1\" class=\"subdued\">{{item.likecount>0?item.likecount+' likes':''}}</span>","          </i>","      </ion-item>","    </div>","  </div>","","  <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","      <!--<div id=\"mydata\"></div>-->","      </ion-content>","      <div class=\"tabs tabs-icon-top\">","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-list energized \"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-game-controller-b-outline\"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-paper-airplane energized\"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-chatboxes-outline\"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-person-outline\"></i>","        </a>","      </div>"]},{"action":"insertText","range":{"start":{"row":49,"column":0},"end":{"row":49,"column":15}},"text":"    </ion-view>"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":64},"end":{"row":0,"column":65}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":65},"end":{"row":0,"column":66}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":66},"end":{"row":0,"column":67}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":67},"end":{"row":0,"column":68}},"text":"{"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":68},"end":{"row":0,"column":69}},"text":"{"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":69},"end":{"row":0,"column":70}},"text":"}"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":70},"end":{"row":0,"column":71}},"text":"}"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":69},"end":{"row":0,"column":74}},"text":"email"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":69},"end":{"row":0,"column":74}},"text":"wall."}]}]],"redo":[]},"/www/js/app.js":{"scrollTop":270,"scrollLeft":0,"selection":{"start":{"row":33,"column":14},"end":{"row":33,"column":14}},"lastUse":1473394649201,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":32,"column":62},"end":{"row":32,"column":63}},"text":","}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":32,"column":21},"end":{"row":32,"column":43}},"text":"component.postlabel = "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":0},"end":{"row":33,"column":37}},"text":"\"newtopiclabel\": \"What's Happening?\","},{"action":"insertText","range":{"start":{"row":33,"column":37},"end":{"row":34,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":0},"end":{"row":33,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":33,"column":5},"end":{"row":33,"column":13}},"text":"newtopic"},{"action":"insertText","range":{"start":{"row":33,"column":5},"end":{"row":33,"column":6}},"text":"r"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":6},"end":{"row":33,"column":7}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":7},"end":{"row":33,"column":8}},"text":"p"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":8},"end":{"row":33,"column":9}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":9},"end":{"row":33,"column":10}},"text":"y"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":10},"end":{"row":33,"column":11}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":11},"end":{"row":33,"column":12}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":12},"end":{"row":33,"column":13}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":13},"end":{"row":33,"column":14}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":14},"end":{"row":33,"column":15}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":33,"column":24},"end":{"row":33,"column":41}},"text":"What's Happening?"},{"action":"insertText","range":{"start":{"row":33,"column":24},"end":{"row":33,"column":25}},"text":"R"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":25},"end":{"row":33,"column":26}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":26},"end":{"row":33,"column":27}},"text":"p"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":27},"end":{"row":33,"column":28}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":33,"column":28},"end":{"row":33,"column":29}},"text":"y"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":109,"column":0}},"nl":"\r\n","lines":["// Ionic Starter App","","// angular.module is a global place for creating, registering and retrieving Angular modules","// 'starter' is the name of this angular module example (also set in a <body> attribute in index.html)","// the 2nd parameter is an array of 'requires'","// 'starter.services' is found in services.js","// 'starter.controllers' is found in controllers.js","angular.module('app', ['ionic', 'jett.ionic.filter.bar', 'app.controllers', 'app.routes', 'app.services', 'app.directives', 'app.silverbullet', 'ngResource', 'lbServices'])","",".factory('$exceptionHandler', function() {","    return function(exception, cause) {","        console.error('app.js angular exception: ' + exception.message + ' (caused by ' + cause + ')');","    };","})","",".run(function($ionicPlatform, amMoment) {","    amMoment.changeTimezone('Europe/Paris');","","    $ionicPlatform.ready(function() {","        // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard","        // for form inputs)","        if(window.cordova && window.cordova.plugins.Keyboard) {","          cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);","        }","        if(window.StatusBar) {","          // org.apache.cordova.statusbar required","          StatusBar.styleDefault();","        }","    });","})","",".constant(\"stemcfg\", {","    \"newtopiclabel\": \"What's Happening?\",","    \"replytopiclabel\": \"Reply\",","    \"jwt\": \"stem2token\",","    \"user\": \"jwtiss\",","    \"userid\": \"stem2userid\",","    \"username\": \"stem2name\",","    \"useravatar\": \"stem2avatar\",","    \"dfuser\": \"df\",","    \"messagetype1\": \"topic\",","    \"messagetype2\": \"comment\",","    \"appmode\": \"appmode\",","    \"apihost\": \"apihost\",","    // \"port\": \"80\",","    // \"webhost\": \"http://127.0.0.1:3064\"  //TODO just for testing with mockApiServer","    // \"webhost\": \"https://web.stem.dev:3000\" //c.f. mapping see bit.do/6tNS?s=stemdd","    // \"webhost\": 'http://50.28.56.122:3000' //TODO just for test with a central DEV server","    \"webhost\": \"http://127.0.0.1:3000\"  //TODO just for testing with a local middle-tier server","})","",".config(configure)","",".run(function($location) {","    // You can only inject instances (not Providers)","    // into the run blocks","});","","//TODO need to be able to inject StemService into config!!!","// configure.$inject = ['$httpProvider','LoopBackResourceProvider', 'StemService'];","// function configure($httpProvider,LoopBackResourceProvider,stemcfg) {","configure.$inject = ['$httpProvider','LoopBackResourceProvider'];","function configure($httpProvider,LoopBackResourceProvider) {","    // You can only inject Providers (not instances)","    // into the config blocks","","    $httpProvider.defaults.useXDomain = true;","    delete $httpProvider.defaults.headers.common['X-Requested-With'];","    $httpProvider.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.getItem(\"stem2token\");","","    var host;","    var mode = localStorage.getItem('appmode');","    if(mode === 'dev') {","    // if($location.absUrl().indexOf('3064') > -1) {","        host = 'http://localhost:3064';","    } else {","        var apihost = localStorage.getItem('apihost') || '';","// debugger","        if(apihost.trim() !== '') {","            host = 'http://50.28.56.122:3000';","            // host = 'http://17.173.176.198:3000';","        } else {","            // debugger","            host = 'http://localhost:3000';","        }","    }","    console.log('lbng-service URL = [' + host +']');","    // Change the URL where to access the LoopBack REST API server","    LoopBackResourceProvider.setUrlBase(host + '/api/');","    // LoopBackResourceProvider.setUrlBase(stemcfg.getRealHost('web', stemcfg) + '/api/');","}","","window.onerror = function(msg, url, line, col, error) {","  // Note that col & error are new to the HTML 5 spec and may not be","  // supported in every browser.  It worked for me in Chrome.","  var extra = !col ? '' : '\\ncolumn: ' + col;","  extra += !error ? '' : '\\nerror: ' + error;","","  // You can view the information in an alert to see things working like this:","  alert(\"app.js onerror: \" + msg + \"\\nurl: \" + url + \"\\nline: \" + line + extra);","","  // TODO: Report this error via ajax so you can keep track","  //       of what pages have JS issues","","  var suppressErrorAlert = true;","  // If you return true, then error alerts (like in older versions of","  // Internet Explorer) will be suppressed.","  return suppressErrorAlert;","};"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":20}},"text":"// Ionic Starter App"},{"action":"insertText","range":{"start":{"row":0,"column":20},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":109,"column":0}},"lines":["","// angular.module is a global place for creating, registering and retrieving Angular modules","// 'starter' is the name of this angular module example (also set in a <body> attribute in index.html)","// the 2nd parameter is an array of 'requires'","// 'starter.services' is found in services.js","// 'starter.controllers' is found in controllers.js","angular.module('app', ['ionic', 'jett.ionic.filter.bar', 'app.controllers', 'app.routes', 'app.services', 'app.directives', 'app.silverbullet', 'ngResource', 'lbServices'])","",".factory('$exceptionHandler', function() {","    return function(exception, cause) {","        console.error('app.js angular exception: ' + exception.message + ' (caused by ' + cause + ')');","    };","})","",".run(function($ionicPlatform, amMoment) {","    amMoment.changeTimezone('Europe/Paris');","","    $ionicPlatform.ready(function() {","        // Hide the accessory bar by default (remove this to show the accessory bar above the keyboard","        // for form inputs)","        if(window.cordova && window.cordova.plugins.Keyboard) {","          cordova.plugins.Keyboard.hideKeyboardAccessoryBar(true);","        }","        if(window.StatusBar) {","          // org.apache.cordova.statusbar required","          StatusBar.styleDefault();","        }","    });","})","",".constant(\"stemcfg\", {","    \"newtopiclabel\": \"What's Happening?\",","    \"replytopiclabel\": \"Leave a Comment\",","    \"jwt\": \"stem2token\",","    \"user\": \"jwtiss\",","    \"userid\": \"stem2userid\",","    \"username\": \"stem2name\",","    \"useravatar\": \"stem2avatar\",","    \"dfuser\": \"df\",","    \"messagetype1\": \"topic\",","    \"messagetype2\": \"comment\",","    \"appmode\": \"appmode\",","    \"apihost\": \"apihost\",","    // \"port\": \"80\",","    // \"webhost\": \"http://127.0.0.1:3064\"  //TODO just for testing with mockApiServer","    // \"webhost\": \"https://web.stem.dev:3000\" //c.f. mapping see bit.do/6tNS?s=stemdd","    // \"webhost\": 'http://50.28.56.122:3000' //TODO just for test with a central DEV server","    \"webhost\": \"http://127.0.0.1:3000\"  //TODO just for testing with a local middle-tier server","})","",".config(configure)","",".run(function($location) {","    // You can only inject instances (not Providers)","    // into the run blocks","});","","//TODO need to be able to inject StemService into config!!!","// configure.$inject = ['$httpProvider','LoopBackResourceProvider', 'StemService'];","// function configure($httpProvider,LoopBackResourceProvider,stemcfg) {","configure.$inject = ['$httpProvider','LoopBackResourceProvider'];","function configure($httpProvider,LoopBackResourceProvider) {","    // You can only inject Providers (not instances)","    // into the config blocks","","    $httpProvider.defaults.useXDomain = true;","    delete $httpProvider.defaults.headers.common['X-Requested-With'];","    $httpProvider.defaults.headers.common['Authorization'] = 'Bearer ' + localStorage.getItem(\"stem2token\");","","    var host;","    var mode = localStorage.getItem('appmode');","    if(mode === 'dev') {","    // if($location.absUrl().indexOf('3064') > -1) {","        host = 'http://localhost:3064';","    } else {","        var apihost = localStorage.getItem('apihost') || '';","// debugger","        if(apihost.trim() !== '') {","            host = 'http://50.28.56.122:3000';","            // host = 'http://17.173.176.198:3000';","        } else {","            // debugger","            host = 'http://localhost:3000';","        }","    }","    console.log('lbng-service URL = [' + host +']');","    // Change the URL where to access the LoopBack REST API server","    LoopBackResourceProvider.setUrlBase(host + '/api/');","    // LoopBackResourceProvider.setUrlBase(stemcfg.getRealHost('web', stemcfg) + '/api/');","}","","window.onerror = function(msg, url, line, col, error) {","  // Note that col & error are new to the HTML 5 spec and may not be","  // supported in every browser.  It worked for me in Chrome.","  var extra = !col ? '' : '\\ncolumn: ' + col;","  extra += !error ? '' : '\\nerror: ' + error;","","  // You can view the information in an alert to see things working like this:","  alert(\"app.js onerror: \" + msg + \"\\nurl: \" + url + \"\\nline: \" + line + extra);","","  // TODO: Report this error via ajax so you can keep track","  //       of what pages have JS issues","","  var suppressErrorAlert = true;","  // If you return true, then error alerts (like in older versions of","  // Internet Explorer) will be suppressed.","  return suppressErrorAlert;","};"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":0},"end":{"row":80,"column":64}},"text":"host = 'http://ec2-54-175-194-254.compute-1.amazonaws.com:3000';"},{"action":"insertText","range":{"start":{"row":80,"column":64},"end":{"row":81,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":0},"end":{"row":80,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":4},"end":{"row":80,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":8},"end":{"row":80,"column":12}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":79,"column":0},"end":{"row":80,"column":0}},"nl":"\r\n","lines":["            host = 'http://50.28.56.122:3000';"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":80,"column":0},"end":{"row":81,"column":0}},"nl":"\r\n","lines":["            // host = 'http://17.173.176.198:3000';"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":0},"end":{"row":80,"column":64}},"text":"host = 'http://ec2-54-175-194-254.compute-1.amazonaws.com:3000';"},{"action":"insertText","range":{"start":{"row":80,"column":64},"end":{"row":81,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":0},"end":{"row":80,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":4},"end":{"row":80,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":8},"end":{"row":80,"column":12}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":12},"end":{"row":79,"column":15}},"text":"// "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":80,"column":19},"end":{"row":80,"column":75}},"text":"'http://ec2-54-175-194-254.compute-1.amazonaws.com:3000'"},{"action":"insertText","range":{"start":{"row":80,"column":19},"end":{"row":80,"column":26}},"text":"apihost"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":79,"column":12},"end":{"row":79,"column":15}},"text":"// "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":80,"column":12},"end":{"row":80,"column":15}},"text":"// "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":76},"end":{"row":79,"column":77}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":77},"end":{"row":79,"column":78}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":78},"end":{"row":79,"column":79}},"text":"/"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":79},"end":{"row":79,"column":80}},"text":"/"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":80},"end":{"row":79,"column":81}},"text":"j"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":81},"end":{"row":79,"column":82}},"text":"u"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":82},"end":{"row":79,"column":83}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":83},"end":{"row":79,"column":84}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":84},"end":{"row":79,"column":85}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":85},"end":{"row":79,"column":86}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":86},"end":{"row":79,"column":87}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":87},"end":{"row":79,"column":88}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":88},"end":{"row":79,"column":89}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":89},"end":{"row":79,"column":90}},"text":"c"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":90},"end":{"row":79,"column":91}},"text":"k"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":79,"column":91},"end":{"row":79,"column":92}},"text":"!"}]}]],"redo":[]},"/www/templates/wall_mayowa.html.bak":{"scrollTop":438,"scrollLeft":0,"selection":{"start":{"row":61,"column":34},"end":{"row":61,"column":34}},"lastUse":1473208073666,"undo":[],"redo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":49,"column":4},"end":{"row":49,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":49,"column":4},"end":{"row":49,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":49,"column":4},"end":{"row":49,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":49,"column":0},"end":{"row":49,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":49,"column":0},"end":{"row":50,"column":0}},"nl":"\r\n","lines":["      <i ng-click=\"wall.saveLike(this, $index)\"  ng-class=\"wall.getStyleByFlagState(item, $index)\"></i>"]},{"action":"insertText","range":{"start":{"row":49,"column":0},"end":{"row":49,"column":97}},"text":"<i ng-click=\"wall.saveLike(this, $index)\"  ng-class=\"wall.getStyleByFlagState(item, $index)\"></i>"},{"action":"insertText","range":{"start":{"row":49,"column":97},"end":{"row":50,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":76,"column":0}},"nl":"\r\n","lines":["<ion-view title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">","    <ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","        <ion-refresher on-refresh=\"wall.reload()\"></ion-refresher>","        <div>{{wall.processingMessage}}</div>","        <a ng-click=\"openPostComment($event)\" id=\"wall-button11\" style=\"font-size:-4px;\" class=\"button button-positive  button-block button-outline icon-right ion-edit\">Post Comment</a>","          <div collection-repeat=\"item in wall.items track by $index\">","            <div class=\"card\">","","            <ion-item ng-if=\"wall.isTopicOwner(item)\" class=\"item-avatar item-icon-right topic\">","              <img class=\"item-text-wrap\" ng-class=\"wall.messageStyleByMessageType(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">","              <h2> Topic User ID: {{item.owner}}</h2>","              <p><time>{{ item.createdate | amUtcOffset:'+0000' | amCalendar }}</time></p>","","              <button ng-click=\"wall.saveLike(this, $index)\" ng-class=\"wall.likeStyleByFlagState(item)\"></button>","","              <!--<ion-item ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</ion-item>-->","            </ion-item>","","            <ion-item ng-if=\"wall.isTopicOwner(item)\" >","              <h2 ng-class=\"wall.messageStyleByMessageType(item)\">{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span></h2>","              <p style=\"display:none\">***TEST MESSAGE = Grouped by Thread id: {{item.threadid}} Message type: {{item.type}}***</p>","              <p>","                <a class=\"subdued\" href=\"#\">","                  {{item.likecount>0?item.likecount:''}} Like(s)","                </a>","                <a href=\"#\" class=\"subdued\">5 Comments</a>","              </p>","            </ion-item>","","","            <ion-item ng-if=\"!wall.isTopicOwner(item)\" class=\"item-avatar item-icon-right comment\">","              <img class=\"item-text-wrap\" ng-class=\"wall.messageStyleByMessageType(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">","","              <h2>Comment User ID: {{item.owner}}</h2>","              <p><time>{{ item.createdate | amUtcOffset:'+0000' | amCalendar }}</time></p>","","","              <h2 ng-class=\"wall.messageStyleByMessageType(item)\">{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span></h2>","","              <p style=\"display:none\">***TEST MESSAGE = Grouped by Thread id: {{item.threadid}} Message type: {{item.type}}***</p>","              <button ng-click=\"wall.saveLike(this, $index)\" ng-class=\"wall.likeStyleByFlagState(item)\">{{item.likecount>0?item.likecount:''}}</button>","            </ion-item>","","              <ion-item class=\"item-divider calm item-icon-left\" ng-if=\"wall.isTopicOwner(item)\"","               ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">","               <i class=\"icon ion-reply\"></i> Reply","","              </ion-itm>","","            <!--<ion-item ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</ion-item>-->","        </div>","        </div>","","","        <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","            <!--<button ng-click=\"wall.loadMoreItems()\" id=\"wall-button9\" class=\"button button-dark  button-block\">LOAD NEXT</button>-->","","","        <div id=\"mydata\"></div>","    </ion-content>","","    <div class=\"tabs tabs-calm tabs-icon-top\">","      <a class=\"tab-item\">","        <i class=\"icon ion-home\"></i>","        Home","      </a>","      <a class=\"tab-item\">","        <i class=\"icon ion-person\"></i>","        Profile","      </a>","      <a class=\"tab-item\">","        <i class=\"icon ion-email\"></i>","        Messages","      </a>","    </div>","</ion-view>"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":101}},"text":"<ion-view cache-view=false title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">"},{"action":"insertText","range":{"start":{"row":0,"column":101},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":78,"column":0}},"lines":["<ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","  <ion-refresher on-refresh=\"wall.reload()\"></ion-refresher>","  <div>{{wall.processingMessage}}</div>","  <!-- <button class=\"button button-energized\"","      ng-click=\"openModal()\"","      id=\"wall-button11\"","      style=\"font-size:-4px;width:100%;\"","      class=\"button button-positive button-full button-block button-outline icon-right ion-edit\">","      What's Happening?","  </button> -->","","  <div collection-repeat=\"item in wall.items track by $index\">","","","    <!-- <div collection-repeat=\"item in wall.items track by $index\" item-height=\"item.height + 30\"> -->","","<div class=\"list card\">","","      <div ng-if=\"wall.isTopicOwner(item)\" class=\" topic\">","        <ion-item  ng-style=\"wall.getStyle(item)\" class=\"item-avatar item-icon-right item-text-wrap\">","            <img class=\"item-text-wrap\" ng-src=\"{{wall.getOwnerAvatar(item.ownerName)}}\">","            <h2>{{item.ownerName}}</h2>","            <p class=\"subdued\"><time>{{ item.createdat | amCalendar }}</time></p>","            <button class=\"button button-icon icon ion-android-more-vertical\"></button>","        </ion-item>","        <ion-item ng-style=\"{height:item.height+100+'px'}\" class=\"item-text-wrap\">","            <p>{{item.text}}</p>","        </ion-item>","        <ion-item class=\" item-divider\">","            <i ng-click=\"wall.saveLike(this, $index)\"  ng-class=\"wall.getStyleByFlagState(item, $index)\">","                <span ng-show=\"item.likecount == 1\">{{item.likecount>0?item.likecount+' like':''}}</span><span ng-show=\"item.likecount > 1\" class=\"subdued\">{{item.likecount>0?item.likecount+' likes':''}}</span>","            </i>","          <a class=\"item-icon-right\">","              <button ng-click=\"openModal(item)\" class=\"wall-reply icon-right button button-icon icon ion-reply dark \"></button>","          </a>","","        </ion-item>","       </div>","","","","<div ng-if=\"!wall.isTopicOwner(item)\" class=\"comment\">","  <ion-item class=\"item-avatar item-icon-right item-text-wrap\">","      <img class=\"item-text-wrap\" ng-src=\"{{wall.getOwnerAvatar(item.ownerName)}}\">","      <h2>{{item.ownerName}}</h2>","      <p class=\"subdued\"><time>{{ item.createdat | amCalendar }}</time></p>","      <p>{{item.text}}</p>","","      <i ng-click=\"wall.saveLike(this, $index)\"  ng-class=\"wall.getStyleByFlagState(item, $index)\"></i>","      </ion-item>","</div>","","</div>","","  </div>","","  <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","      <!--<div id=\"mydata\"></div>-->","      </ion-content>","      <div class=\"tabs tabs-icon-top\">","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-list energized \"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-game-controller-b-outline\"></i>","        </a>","        <a class=\"tab-item\">","          <i ng-click=\"openModal()\" class=\"icon ion-paper-airplane energized\"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-chatboxes-outline\"></i>","        </a>","        <a class=\"tab-item\">","          <i class=\"icon ion-ios-person-outline\"></i>","        </a>","      </div>","    </ion-view>"]}]}]]},"/www/templates/wall_james.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":50,"column":0}},"lastUse":1473207928215,"undo":[[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":30,"column":0}},"nl":"\r\n","lines":["<ion-view title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">","    <ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","        <ion-refresher on-refresh=\"wall.reload()\"></ion-refresher>","        <div>{{wall.processingMessage}}</div>","        <a ng-click=\"openPostComment($event)\" id=\"wall-button11\" style=\"font-size:-4px;\" class=\"button button-positive  button-block button-outline icon-right ion-edit\">Post Comment</a>","        <ion-item collection-repeat=\"item in wall.items track by $index\">","            <!--<img ng-if=\"wall.isTopicOwner(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=100&h=100\">-->","            <!--<img ng-if=\"!wall.isTopicOwner(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">-->","            <ion-item>","                <img class=\"item-thumbnail-left item-text-wrap\" ng-class=\"wall.messageStyleByMessageType(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">","                <button ng-click=\"wall.saveLike(this, $index)\" ng-class=\"wall.likeStyleByFlagState(item)\">{{item.likecount>0?item.likecount:''}}</button>","                <span ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</span>","            </ion-item>","            <h2 ng-class=\"wall.messageStyleByMessageType(item)\">{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span><span style=\"float:right\"><time>{{ item.createdat | amUtcOffset:'+0000' | amCalendar }}</time></span></h2>","            <p style=\"display:none\">***TEST MESSAGE = Grouped by Thread id: {{item.threadid}} Message type: {{item.type}}***</p>","            <!--<ion-item ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</ion-item>-->","        </ion-item>","        <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","            <!--<button ng-click=\"wall.loadMoreItems()\" id=\"wall-button9\" class=\"button button-dark  button-block\">LOAD NEXT</button>-->","        <div class=\"button-bar\">","            <button id=\"wall-button6\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-home\">","                <br>HOME</button>","            <button id=\"wall-button7\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-person\">","                <br>PROFILE</button>","            <button id=\"wall-button8\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-email\">","                <br>MESSAGES</button>","        </div>","        <div id=\"mydata\"></div>","    </ion-content>","</ion-view>"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":82}},"text":"<ion-view title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">"},{"action":"insertText","range":{"start":{"row":0,"column":82},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":33,"column":0}},"lines":["    <ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","        <div>{{wall.processingMessage}}</div>","        <a ng-click=\"openPostComment($event)\" id=\"wall-button11\" style=\"font-size:-4px;\" class=\"button button-positive  button-block button-outline icon-right ion-edit\">Post Comment</a>","        <ion-item collection-repeat=\"item in wall.items track by $index\">","            <!--<ion-item ng-class=\"wall.messageStyleByMessageType(item)\">-->","                <!--<div ng-class=\"wall.isTopicOwner(item)?item-profile1:item-profile2\">-->","                    <!--<div ng-class=\"wall.isTopicOwner(item)?item-avatar-topic:item-avatar-comment\">-->","                        <img ng-if=\"wall.isTopicOwner(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=100&h=100\">","                        <img ng-if=\"!wall.isTopicOwner(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">","                        <button ng-click=\"wall.saveLike(this)\" ng-class=\"wall.likeStyleByFlagState(item)\">{{item.likecount>0?item.likecount:''}}</button>","                    <!--</div>-->","                <!--</div>-->","                <h2>{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span><span style=\"float:right\"><time>{{ item.createdat | amUtcOffset:'+0000' | amCalendar }}</time></span></h2>","                <!--<h2>{{item.owner}}<span style=\"float:right\"><time>{{ item.createdat}}</time></span></h2>-->","                <!--<h2>{{item.owner}}<span style=\"float:right\"><time>{{ item.createdat | amUtcOffset:'+0000' | amDateFormat:'MM.DD.YYYY HH:mm:ss' }}</time></span></h2>-->","                <p style=\"display:none\">***TEST MESSAGE = Grouped by Thread id: {{item.threadid}} Message type: {{item.type}}***</p>","            <!--</ion-item>-->","            <!--<ion-item ui-sref=\"menu.newMessage\">Reply to Username</ion-item>-->","            <ion-item ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</ion-item>","        </ion-item>","        <!--<ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\"></ion-infinite-scroll>-->","        <button ng-click=\"wall.loadMoreItems()\" id=\"wall-button9\" class=\"button button-dark  button-block\">LOAD NEXT</button>","        <div class=\"button-bar\">","            <button id=\"wall-button6\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-home\">","                <br>HOME</button>","            <button id=\"wall-button7\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-person\">","                <br>PROFILE</button>","            <button id=\"wall-button8\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-email\">","                <br>MESSAGES</button>","        </div>","        <div id=\"mydata\"></div>","    </ion-content>"]},{"action":"insertText","range":{"start":{"row":33,"column":0},"end":{"row":33,"column":11}},"text":"</ion-view>"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":33,"column":0},"end":{"row":33,"column":11}},"text":"</ion-view>"},{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":33,"column":0}},"nl":"\r\n","lines":["<ion-view title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">","    <ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","        <div>{{wall.processingMessage}}</div>","        <a ng-click=\"openPostComment($event)\" id=\"wall-button11\" style=\"font-size:-4px;\" class=\"button button-positive  button-block button-outline icon-right ion-edit\">Post Comment</a>","        <ion-item collection-repeat=\"item in wall.items track by $index\">","            <!--<ion-item ng-class=\"wall.messageStyleByMessageType(item)\">-->","                <!--<div ng-class=\"wall.isTopicOwner(item)?item-profile1:item-profile2\">-->","                    <!--<div ng-class=\"wall.isTopicOwner(item)?item-avatar-topic:item-avatar-comment\">-->","                        <img ng-if=\"wall.isTopicOwner(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=100&h=100\">","                        <img ng-if=\"!wall.isTopicOwner(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">","                        <button ng-click=\"wall.saveLike(this)\" ng-class=\"wall.likeStyleByFlagState(item)\">{{item.likecount>0?item.likecount:''}}</button>","                    <!--</div>-->","                <!--</div>-->","                <h2>{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span><span style=\"float:right\"><time>{{ item.createdat | amUtcOffset:'+0000' | amCalendar }}</time></span></h2>","                <!--<h2>{{item.owner}}<span style=\"float:right\"><time>{{ item.createdat}}</time></span></h2>-->","                <!--<h2>{{item.owner}}<span style=\"float:right\"><time>{{ item.createdat | amUtcOffset:'+0000' | amDateFormat:'MM.DD.YYYY HH:mm:ss' }}</time></span></h2>-->","                <p style=\"display:none\">***TEST MESSAGE = Grouped by Thread id: {{item.threadid}} Message type: {{item.type}}***</p>","            <!--</ion-item>-->","            <!--<ion-item ui-sref=\"menu.newMessage\">Reply to Username</ion-item>-->","            <ion-item ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</ion-item>","        </ion-item>","        <!--<ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\"></ion-infinite-scroll>-->","        <button ng-click=\"wall.loadMoreItems()\" id=\"wall-button9\" class=\"button button-dark  button-block\">LOAD NEXT</button>","        <div class=\"button-bar\">","            <button id=\"wall-button6\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-home\">","                <br>HOME</button>","            <button id=\"wall-button7\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-person\">","                <br>PROFILE</button>","            <button id=\"wall-button8\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-email\">","                <br>MESSAGES</button>","        </div>","        <div id=\"mydata\"></div>","    </ion-content>"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":82}},"text":"<ion-view title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">"},{"action":"insertText","range":{"start":{"row":0,"column":82},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":33,"column":0}},"lines":["    <ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","        <ion-refresher on-refresh=\"wall.reload()\"></ion-refresher>","        <div>{{wall.processingMessage}}</div>","        <a ng-click=\"openPostComment($event)\" id=\"wall-button11\" style=\"font-size:-4px;\" class=\"button button-positive  button-block button-outline icon-right ion-edit\">Post Comment</a>","        <div collection-repeat=\"item in wall.items track by $index\">","<div class=\"list list-inset\">","            <ion-item>","                <img class=\"item-thumbnail-left item-text-wrap\" ng-class=\"wall.messageStyleByMessageType(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">","                <!-- <h2> Created by: {{wall.getOwner(item.subject)}}</h2>-->","                <h2>{{item.subject}}</h2>","                <p><time>{{ item.createdate | amUtcOffset:'+0000' | amCalendar }}</time></p>","                <button ng-click=\"wall.saveLike(this, $index)\" ng-class=\"wall.likeStyleByFlagState(item)\">{{item.likecount>0?item.likecount:''}}</button>","                <span ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</span>","            </ion-item>","            <!--<h2 ng-class=\"wall.messageStyleByMessageType(item)\">{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span><span style=\"float:right\"><time>{{ item.createdat | amUtcOffset:'+0000' | amCalendar }}</time></span></h2>-->","            <!--<p style=\"display:none\">***TEST MESSAGE = Grouped by Thread id: {{item.threadid}} Message type: {{item.type}}***</p>-->","            <!--<ion-item ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</ion-item>-->","</div>","        </div>","        ","        <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","        <div class=\"button-bar\">","            <button id=\"wall-button6\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-home\">","                <br>HOME</button>","            <button id=\"wall-button7\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-person\">","                <br>PROFILE</button>","            <button id=\"wall-button8\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-email\">","                <br>MESSAGES</button>","        </div>","        <div id=\"mydata\"></div>","    </ion-content>","</ion-view>"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":33,"column":0}},"nl":"\r\n","lines":["<ion-view title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">","    <ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","        <ion-refresher on-refresh=\"wall.reload()\"></ion-refresher>","        <div>{{wall.processingMessage}}</div>","        <a ng-click=\"openPostComment($event)\" id=\"wall-button11\" style=\"font-size:-4px;\" class=\"button button-positive  button-block button-outline icon-right ion-edit\">Post Comment</a>","        <div collection-repeat=\"item in wall.items track by $index\">","<div class=\"list list-inset\">","            <ion-item>","                <img class=\"item-thumbnail-left item-text-wrap\" ng-class=\"wall.messageStyleByMessageType(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">","                <!-- <h2> Created by: {{wall.getOwner(item.subject)}}</h2>-->","                <h2>{{item.subject}}</h2>","                <p><time>{{ item.createdate | amUtcOffset:'+0000' | amCalendar }}</time></p>","                <button ng-click=\"wall.saveLike(this, $index)\" ng-class=\"wall.likeStyleByFlagState(item)\">{{item.likecount>0?item.likecount:''}}</button>","                <span ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</span>","            </ion-item>","            <!--<h2 ng-class=\"wall.messageStyleByMessageType(item)\">{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span><span style=\"float:right\"><time>{{ item.createdat | amUtcOffset:'+0000' | amCalendar }}</time></span></h2>-->","            <!--<p style=\"display:none\">***TEST MESSAGE = Grouped by Thread id: {{item.threadid}} Message type: {{item.type}}***</p>-->","            <!--<ion-item ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</ion-item>-->","</div>","        </div>","        ","        <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","        <div class=\"button-bar\">","            <button id=\"wall-button6\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-home\">","                <br>HOME</button>","            <button id=\"wall-button7\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-person\">","                <br>PROFILE</button>","            <button id=\"wall-button8\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-email\">","                <br>MESSAGES</button>","        </div>","        <div id=\"mydata\"></div>","    </ion-content>","</ion-view>"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":82}},"text":"<ion-view title=\"Wall ({{wall.items.length}})\" id=\"page7\" hide-back-button=\"true\">"},{"action":"insertText","range":{"start":{"row":0,"column":82},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":35,"column":0}},"lines":["    <ion-content overflow-scroll=\"true\" padding=\"true\" class=\"has-header\">","        <ion-refresher on-refresh=\"wall.reload()\"></ion-refresher>","        <div>{{wall.processingMessage}}</div>","        <a ng-click=\"openPostComment($event)\" id=\"wall-button11\" style=\"font-size:-4px;\" class=\"button button-positive  button-block button-outline icon-right ion-edit\">Post Comment</a>","        <div collection-repeat=\"item in wall.items track by $index\">","<div class=\"list list-inset\">","","            <ion-item>","                <img class=\"item-thumbnail-left item-text-wrap\" ng-class=\"wall.messageStyleByMessageType(item)\" src=\"//placeholdit.imgix.net/~text?txtsize=12&txt=100%C3%97100&w=50&h=50\">","                <!-- <h2> Created by: {{wall.getOwner(item.subject)}}</h2>-->","                <h2>{{item.subject}}</h2>","                <p><time>{{ item.createdate | amUtcOffset:'+0000' | amCalendar }}</time></p>","                <button ng-click=\"wall.saveLike(this, $index)\" ng-class=\"wall.likeStyleByFlagState(item)\">{{item.likecount>0?item.likecount:''}}</button>","                <span ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\"><i class=\"icon ion-reply\"></i> Reply</span>","              <h2 ng-class=\"wall.messageStyleByMessageType(item)\">{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span></h2>","            </ion-item>","            <!--<h2 ng-class=\"wall.messageStyleByMessageType(item)\">{{item.text}}<span style=\"display:none\"> ***TEST MESSAGE = Owner: {{item.owner}} Message id: {{item.id}}</span><span style=\"float:right\"><time>{{ item.createdat | amUtcOffset:'+0000' | amCalendar }}</time></span></h2>-->","            <!--<p style=\"display:none\">***TEST MESSAGE = Grouped by Thread id: {{item.threadid}} Message type: {{item.type}}***</p>-->","            <!--<ion-item ng-if=\"wall.isTopicOwner(item)\" ng-click=\"openReplyTo($event, item)\" id=\"wall-button10\">Reply</ion-item>-->","</div>","        </div>","        ","        <ion-infinite-scroll on-infinite=\"wall.loadMoreItems()\" distance=\"1%\" ng-if=\"hasMoreData\" immediate-check=\"false\"></ion-infinite-scroll>","        <div class=\"button-bar\">","            <button id=\"wall-button6\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-home\">","                <br>HOME</button>","            <button id=\"wall-button7\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-person\">","                <br>PROFILE</button>","            <button id=\"wall-button8\" style=\"font-size:11px;\" class=\"button button-positive  button-block icon ion-email\">","                <br>MESSAGES</button>","        </div>","        <div id=\"mydata\"></div>","    </ion-content>","</ion-view>"]}]}]],"redo":[]},"/www/js/controllers_james.js":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":0,"column":0},"end":{"row":0,"column":0}},"lastUse":1473207903036,"undo":[],"redo":[]},"/www/templates/wallModalPost.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":3,"column":26},"end":{"row":3,"column":26}},"lastUse":1472713001073,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":55},"end":{"row":3,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":3,"column":0},"end":{"row":3,"column":8}},"text":"        "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":25},"end":{"row":4,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":4,"column":0},"end":{"row":4,"column":8}},"text":"        "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":4,"column":4},"end":{"row":4,"column":8}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":3,"column":0},"end":{"row":3,"column":25}},"text":"        What's Happening?"},{"action":"insertText","range":{"start":{"row":3,"column":0},"end":{"row":3,"column":18}},"text":"{{wall.postlabel}}"},{"action":"insertText","range":{"start":{"row":3,"column":18},"end":{"row":4,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":3,"column":18},"end":{"row":4,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":0},"end":{"row":3,"column":4}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":4},"end":{"row":3,"column":8}},"text":"    "}]}]],"redo":[]},"/www/templates/quest.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":7,"column":14},"end":{"row":7,"column":14}},"lastUse":1470240632191,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":14},"end":{"row":8,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":8,"column":0},"end":{"row":8,"column":8}},"text":"        "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":8,"column":0},"end":{"row":8,"column":8}},"text":"        "}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":14},"end":{"row":8,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":14},"end":{"row":7,"column":15}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":14},"end":{"row":7,"column":15}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":11},"end":{"row":25,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":25,"column":0}},"nl":"\r\n","lines":["<ion-view title=\"Quest\" id=\"page3\" class=\" \">","    <ion-content padding=\"true\" class=\"has-header\">","        <div class=\"item item-body \" id=\"quest-list-item-container1\">","            <h1 id=\"quest-heading1\" style=\"color:#000000;text-align:center;\" class=\" \">Quest Title</h1>","            <ion-list id=\"quest-list7\" class=\" \">","                <ion-item class=\"item-thumbnail-left  \" id=\"quest-list-item13\"></ion-item>","            </ion-list>","        </div>","        <div id=\"quest-button-bar2\" class=\" button-bar \">","            <button id=\"quest-button12\" class=\" button button-positive  button-block \">PowerUps</button>","            <a ui-sref=\"menu.questActivity\" id=\"quest-button13\" class=\" button button-positive  button-block \">Activity</a>","        </div>","        <p id=\"quest-markdown1\" style=\"color:#000000;\" class=\" \">","            <strong>Quest</strong>description</p>","        <button id=\"quest-button15\" class=\" button button-positive  button-block \">Join Quest</button>","        <ion-list id=\"quest-list3\" class=\" \">","            <ion-item class=\"item-icon-left  \" id=\"quest-list-item14\">","                <i class=\"icon ion-images\"></i>Item</ion-item>","            <ion-item class=\"item-icon-left  \" id=\"quest-list-item16\">","                <i class=\"icon ion-image\"></i>Item</ion-item>","            <ion-item class=\"item-icon-left  \" id=\"quest-list-item15\">","                <i class=\"icon ion-ios-star-outline\"></i>Item</ion-item>","        </ion-list>","    </ion-content>","</ion-view>"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":45}},"text":"<ion-view title=\"Quest\" id=\"page3\" class=\" \">"},{"action":"insertText","range":{"start":{"row":0,"column":45},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":25,"column":0}},"lines":["    <ion-content padding=\"true\" class=\"has-header\">","        <div class=\"item item-body \" id=\"quest-list-item-container1\">","            <h1 id=\"quest-heading1\" style=\"color:#000000;text-align:center;\" class=\" \">Title</h1>","            <ion-list id=\"quest-list7\" class=\" \">","                <ion-item class=\"item-thumbnail-left  \" id=\"quest-list-item13\"></ion-item>","            </ion-list>","        </div>","        <div id=\"quest-button-bar2\" class=\" button-bar \">","            <button id=\"quest-button12\" class=\" button button-positive  button-block \">PowerUps</button>","            <a ui-sref=\"menu.questActivity\" id=\"quest-button13\" class=\" button button-positive  button-block \">Activity</a>","        </div>","        <p id=\"quest-markdown1\" style=\"color:#000000;\" class=\" \">","            <strong>Quest</strong>description</p>","        <button id=\"quest-button15\" class=\" button button-positive  button-block \">Join Quest</button>","        <ion-list id=\"quest-list3\" class=\" \">","            <ion-item class=\"item-icon-left  \" id=\"quest-list-item14\">","                <i class=\"icon ion-images\"></i>Item</ion-item>","            <ion-item class=\"item-icon-left  \" id=\"quest-list-item16\">","                <i class=\"icon ion-image\"></i>Item</ion-item>","            <ion-item class=\"item-icon-left  \" id=\"quest-list-item15\">","                <i class=\"icon ion-ios-star-outline\"></i>Item</ion-item>","        </ion-list>","    </ion-content>","</ion-view>"]}]}]],"redo":[]},"/www/templates/toMessage.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":24,"column":23},"end":{"row":24,"column":23}},"lastUse":1470156942269,"undo":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":15,"column":20},"end":{"row":15,"column":25}},"text":"<div>"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":15,"column":0},"end":{"row":15,"column":20}},"text":"                    "}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":44},"end":{"row":15,"column":0}},"text":"\r\n"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":43},"end":{"row":14,"column":44}},"text":">"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":42},"end":{"row":14,"column":43}},"text":"v"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":41},"end":{"row":14,"column":42}},"text":"i"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":40},"end":{"row":14,"column":41}},"text":"d"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":39},"end":{"row":14,"column":40}},"text":"/"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":38},"end":{"row":14,"column":39}},"text":"<"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":38},"end":{"row":14,"column":39}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":39},"end":{"row":14,"column":40}},"text":"("}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":55},"end":{"row":14,"column":56}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":39},"end":{"row":14,"column":40}},"text":"*"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":40},"end":{"row":14,"column":41}},"text":"*"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":41},"end":{"row":14,"column":42}},"text":"*"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":42},"end":{"row":14,"column":43}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":42},"end":{"row":14,"column":43}},"text":" "}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":41},"end":{"row":14,"column":42}},"text":"*"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":40},"end":{"row":14,"column":41}},"text":"*"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":39},"end":{"row":14,"column":40}},"text":"*"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":39},"end":{"row":14,"column":40}},"text":"<"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":40},"end":{"row":14,"column":41}},"text":"<"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":41},"end":{"row":14,"column":42}},"text":"<"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":42},"end":{"row":14,"column":43}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":43},"end":{"row":14,"column":44}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":44},"end":{"row":14,"column":45}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":45},"end":{"row":14,"column":46}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":46},"end":{"row":14,"column":47}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":47},"end":{"row":14,"column":48}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":48},"end":{"row":14,"column":49}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":49},"end":{"row":14,"column":50}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":50},"end":{"row":14,"column":51}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":51},"end":{"row":14,"column":52}},"text":"u"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":52},"end":{"row":14,"column":53}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":53},"end":{"row":14,"column":54}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":54},"end":{"row":14,"column":55}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":55},"end":{"row":14,"column":56}},"text":"b"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":56},"end":{"row":14,"column":57}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":57},"end":{"row":14,"column":58}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":58},"end":{"row":14,"column":59}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":59},"end":{"row":14,"column":60}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":60},"end":{"row":14,"column":61}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":61},"end":{"row":14,"column":62}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":62},"end":{"row":14,"column":63}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":63},"end":{"row":14,"column":64}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":64},"end":{"row":14,"column":65}},"text":"m"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":65},"end":{"row":14,"column":66}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":66},"end":{"row":14,"column":67}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":34},"end":{"row":14,"column":35}},"text":"d"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":33},"end":{"row":14,"column":34}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":33},"end":{"row":14,"column":34}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":34},"end":{"row":14,"column":35}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":35},"end":{"row":14,"column":36}},"text":"m"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":36},"end":{"row":14,"column":37}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":41},"end":{"row":14,"column":68}},"text":"<<< this should be the name"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":40},"end":{"row":14,"column":41}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":50},"end":{"row":14,"column":54}},"text":"name"},{"action":"insertText","range":{"start":{"row":14,"column":50},"end":{"row":14,"column":51}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":51},"end":{"row":14,"column":52}},"text":"m"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":52},"end":{"row":14,"column":53}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":53},"end":{"row":14,"column":54}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":54},"end":{"row":14,"column":55}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":29,"column":0},"end":{"row":29,"column":11}},"text":"</ion-view>"},{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":29,"column":0}},"nl":"\r\n","lines":["<ion-view title=\"MyMessages\" id=\"page11\" class=\" \">","    <ion-content padding=\"true\" class=\"has-header\">","        <ion-pane>","          <ion-header-bar class=\"bar-positive\">","            <h1 class=\"title\">Participants - Scroll for More</h1>","            <div class=\"buttons\">","                <button class=\"button button-icon ion-android-search\" ","                        ng-click=\"to.showFilterBar()\"></button>","            </div>","          </ion-header-bar>","          <ion-content class=\"has-header\">","            <ion-list>","              <div collection-repeat=\"item in to.items\">","                  <ion-item ng-click=\"to.selectToMessage(item)\">","                    <div>{{ item.name }} ({{ item.email }})</div>","                  </ion-item>","              </div>","            </ion-list>  ","          </ion-content>","        </ion-pane>","        <div id=\"myMessages-button-bar3\" class=\" button-bar \">","            <button id=\"myMessages-button19\" style=\"font-size:11px;\" class=\" button button-positive  button-block icon ion-home \">","                <br>HOME</button>","            <button id=\"myMessages-button20\" style=\"font-size:11px;\" class=\" button button-positive  button-block icon ion-person \">","                <br>PROFILE</button>","            <button id=\"myMessages-button21\" style=\"font-size:11px;\" class=\" button button-positive  button-block icon ion-email \">","                <br>MESSAGES</button>","        </div>","    </ion-content>"]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":7}},"text":"<style>"},{"action":"insertText","range":{"start":{"row":0,"column":7},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":37,"column":0}},"lines":["    .platform-android .scroll-content{","      margin-top: 0;","      margin-bottom:0;","      padding-top:0;","    }","    .scroll{","      height:100% !important","    }","</style>","<ion-view title=\"MyMessages\" id=\"page11\" class=\" \">","    <ion-content padding=\"true\">","        <ion-pane>","          <ion-header-bar class=\"bar-positive\">","            <h1 class=\"title\">Recipients</h1>","            <div class=\"buttons\">","                <button class=\"button button-icon ion-android-search\" ","                        ng-click=\"to.showFilterBar()\"></button>","            </div>","          </ion-header-bar>","          <ion-content>","            <ion-list>","              <ion-item collection-repeat=\"item in to.items\">","                <div ng-click=\"to.selectToMessage(item)\">{{item.name}} ({{ item.email }})</div>","              </ion-item>","            </ion-list>  ","          </ion-content>","        </ion-pane>","        <div id=\"myMessages-button-bar3\" class=\" button-bar \">","            <button id=\"myMessages-button19\" style=\"font-size:11px;\" class=\" button button-positive  button-block icon ion-home \">","                <br>HOME</button>","            <button id=\"myMessages-button20\" style=\"font-size:11px;\" class=\" button button-positive  button-block icon ion-person \">","                <br>PROFILE</button>","            <button id=\"myMessages-button21\" style=\"font-size:11px;\" class=\" button button-positive  button-block icon ion-email \">","                <br>MESSAGES</button>","        </div>","    </ion-content>"]},{"action":"insertText","range":{"start":{"row":37,"column":0},"end":{"row":37,"column":11}},"text":"</ion-view>"}]}]],"redo":[]},"/www/templates/newMessage.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":15,"column":28},"end":{"row":15,"column":28}},"lastUse":1469733906642,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":59},"end":{"row":20,"column":60}},"text":","}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":60},"end":{"row":20,"column":61}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":61},"end":{"row":20,"column":62}},"text":"m"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":62},"end":{"row":20,"column":63}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":63},"end":{"row":20,"column":64}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":64},"end":{"row":20,"column":65}},"text":"."}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":65},"end":{"row":20,"column":66}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":66},"end":{"row":20,"column":67}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":67},"end":{"row":20,"column":68}},"text":"x"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":68},"end":{"row":20,"column":69}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":67},"end":{"row":14,"column":68}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":68},"end":{"row":14,"column":69}},"text":"g"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":69},"end":{"row":14,"column":70}},"text":"="}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":70},"end":{"row":14,"column":71}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":70},"end":{"row":14,"column":71}},"text":"m"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":14,"column":69},"end":{"row":14,"column":70}},"text":"="}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":69},"end":{"row":14,"column":70}},"text":"-"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":70},"end":{"row":14,"column":71}},"text":"m"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":71},"end":{"row":14,"column":72}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":72},"end":{"row":14,"column":73}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":73},"end":{"row":14,"column":74}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":74},"end":{"row":14,"column":75}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":75},"end":{"row":14,"column":76}},"text":"="}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":76},"end":{"row":14,"column":77}},"text":"\""}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":77},"end":{"row":14,"column":78}},"text":"\""}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":78},"end":{"row":14,"column":79}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":77},"end":{"row":14,"column":78}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":78},"end":{"row":14,"column":79}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":79},"end":{"row":14,"column":80}},"text":"x"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":80},"end":{"row":14,"column":81}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":77},"end":{"row":14,"column":78}},"text":"m"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":78},"end":{"row":14,"column":79}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":79},"end":{"row":14,"column":80}},"text":"g"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":14,"column":80},"end":{"row":14,"column":81}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":20,"column":59},"end":{"row":20,"column":69}},"text":", msg.text"}]}]],"redo":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":20,"column":46},"end":{"row":20,"column":59}},"text":"msg.recipient"}]}]]},"/www/templates/myMessagesThreads.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":20,"column":14},"end":{"row":20,"column":14}},"lastUse":1469539409862,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":66},"end":{"row":7,"column":72}},"text":"inbox."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":71},"end":{"row":7,"column":72}},"text":"."}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":70},"end":{"row":7,"column":71}},"text":"x"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":69},"end":{"row":7,"column":70}},"text":"o"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":68},"end":{"row":7,"column":69}},"text":"b"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":67},"end":{"row":7,"column":68}},"text":"n"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":66},"end":{"row":7,"column":67}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":66},"end":{"row":7,"column":67}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":67},"end":{"row":7,"column":68}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":68},"end":{"row":7,"column":69}},"text":"r"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":69},"end":{"row":7,"column":70}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":70},"end":{"row":7,"column":71}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":71},"end":{"row":7,"column":72}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":72},"end":{"row":7,"column":73}},"text":"s"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":5,"column":53},"end":{"row":5,"column":58}},"text":"inbox"},{"action":"insertText","range":{"start":{"row":5,"column":53},"end":{"row":5,"column":65}},"text":"inboxthreads"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":61},"end":{"row":7,"column":91}},"text":"inboxthreads.selectToWho(item)"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":8,"column":24},"end":{"row":8,"column":33}},"text":"Sent to: "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":3,"column":0},"end":{"row":5,"column":0}},"nl":"\r\n","lines":["        <a ui-sref=\"menu.toMessage\" id=\"myMessages-button22\" class=\" button button-positive  button-block \">Mesage</a>",""]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":27},"end":{"row":0,"column":28}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":28},"end":{"row":0,"column":29}},"text":"w"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":29},"end":{"row":0,"column":30}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":30},"end":{"row":0,"column":31}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":31},"end":{"row":0,"column":32}},"text":"h"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":32},"end":{"row":0,"column":33}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":33},"end":{"row":0,"column":46}},"text":"{{item.name}}"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":18},"end":{"row":0,"column":19}},"text":"y"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":17},"end":{"row":0,"column":18}},"text":"M"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":33},"end":{"row":0,"column":37}},"text":"item"},{"action":"insertText","range":{"start":{"row":0,"column":33},"end":{"row":0,"column":45}},"text":"inboxthreads"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":46},"end":{"row":0,"column":50}},"text":"name"},{"action":"insertText","range":{"start":{"row":0,"column":46},"end":{"row":0,"column":47}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":47},"end":{"row":0,"column":48}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":48},"end":{"row":0,"column":49}},"text":"w"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":49},"end":{"row":0,"column":50}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":50},"end":{"row":0,"column":51}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":31},"end":{"row":0,"column":32}},"text":"["}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":54},"end":{"row":0,"column":55}},"text":"]"}]}]],"redo":[]},"/www/templates/myMessages.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":14,"column":0},"end":{"row":14,"column":0}},"lastUse":1469539258791,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":60},"end":{"row":7,"column":62}},"text":"\"\""}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":61},"end":{"row":7,"column":62}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":62},"end":{"row":7,"column":63}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":63},"end":{"row":7,"column":64}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":64},"end":{"row":7,"column":65}},"text":"r"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":65},"end":{"row":7,"column":66}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":66},"end":{"row":7,"column":67}},"text":"("}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":67},"end":{"row":7,"column":68}},"text":"'"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":68},"end":{"row":7,"column":69}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":69},"end":{"row":7,"column":70}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":70},"end":{"row":7,"column":71}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":71},"end":{"row":7,"column":72}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":73},"end":{"row":7,"column":74}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":72},"end":{"row":7,"column":73}},"text":"\""}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":72},"end":{"row":7,"column":73}},"text":"'"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":74},"end":{"row":7,"column":75}},"text":"\""}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":61},"end":{"row":7,"column":62}},"text":"S"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":62},"end":{"row":7,"column":63}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":63},"end":{"row":7,"column":64}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":64},"end":{"row":7,"column":65}},"text":"m"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":65},"end":{"row":7,"column":66}},"text":"S"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":66},"end":{"row":7,"column":67}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":67},"end":{"row":7,"column":68}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":68},"end":{"row":7,"column":69}},"text":"v"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":69},"end":{"row":7,"column":70}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":70},"end":{"row":7,"column":71}},"text":"c"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":71},"end":{"row":7,"column":72}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":72},"end":{"row":7,"column":73}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":61},"end":{"row":7,"column":78}},"text":"StemService.alert"},{"action":"insertText","range":{"start":{"row":7,"column":61},"end":{"row":7,"column":62}},"text":"c"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":62},"end":{"row":7,"column":63}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":63},"end":{"row":7,"column":64}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":64},"end":{"row":7,"column":65}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":65},"end":{"row":7,"column":66}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":66},"end":{"row":7,"column":67}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":67},"end":{"row":7,"column":68}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":68},"end":{"row":7,"column":69}},"text":"."}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":69},"end":{"row":7,"column":70}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":70},"end":{"row":7,"column":71}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":71},"end":{"row":7,"column":72}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":61},"end":{"row":7,"column":80}},"text":"console.log('test')"},{"action":"insertText","range":{"start":{"row":7,"column":61},"end":{"row":7,"column":62}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":62},"end":{"row":7,"column":63}},"text":"n"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":63},"end":{"row":7,"column":64}},"text":"p"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":64},"end":{"row":7,"column":65}},"text":"x"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":64},"end":{"row":7,"column":65}},"text":"x"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":63},"end":{"row":7,"column":64}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":63},"end":{"row":7,"column":64}},"text":"b"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":64},"end":{"row":7,"column":65}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":65},"end":{"row":7,"column":66}},"text":"x"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":66},"end":{"row":7,"column":67}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":67},"end":{"row":7,"column":68}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":68},"end":{"row":7,"column":69}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":7,"column":68},"end":{"row":7,"column":69}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":68},"end":{"row":7,"column":69}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":69},"end":{"row":7,"column":70}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":70},"end":{"row":7,"column":71}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":71},"end":{"row":7,"column":72}},"text":"c"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":72},"end":{"row":7,"column":73}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":73},"end":{"row":7,"column":74}},"text":"T"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":74},"end":{"row":7,"column":75}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":75},"end":{"row":7,"column":76}},"text":"W"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":76},"end":{"row":7,"column":77}},"text":"h"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":77},"end":{"row":7,"column":78}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":78},"end":{"row":7,"column":79}},"text":"("}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":79},"end":{"row":7,"column":80}},"text":")"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":13},"end":{"row":5,"column":14}},"text":"c"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":14},"end":{"row":5,"column":15}},"text":"l"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":15},"end":{"row":5,"column":16}},"text":"a"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":16},"end":{"row":5,"column":17}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":17},"end":{"row":5,"column":18}},"text":"s"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":18},"end":{"row":5,"column":19}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":5,"column":18},"end":{"row":5,"column":19}},"text":"-"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":18},"end":{"row":5,"column":19}},"text":"="}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":19},"end":{"row":5,"column":20}},"text":"\""}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":20},"end":{"row":5,"column":21}},"text":"\""}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":21},"end":{"row":5,"column":22}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":20},"end":{"row":5,"column":21}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":21},"end":{"row":5,"column":22}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":22},"end":{"row":5,"column":23}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":5,"column":23},"end":{"row":5,"column":24}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":79},"end":{"row":7,"column":80}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":80},"end":{"row":7,"column":81}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":81},"end":{"row":7,"column":82}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":7,"column":82},"end":{"row":7,"column":83}},"text":"m"}]}]],"redo":[]},"/www/js/api-helper.js":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":15,"column":39},"end":{"row":15,"column":39}},"lastUse":1469204334343,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":40},"end":{"row":0,"column":41}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":40},"end":{"row":0,"column":41}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":40},"end":{"row":0,"column":41}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":41},"end":{"row":0,"column":42}},"text":" "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":42},"end":{"row":0,"column":43}},"text":"N"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":43},"end":{"row":0,"column":44}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":44},"end":{"row":0,"column":45}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":45},"end":{"row":0,"column":46}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":46},"end":{"row":0,"column":47}},"text":"J"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":47},"end":{"row":0,"column":48}},"text":"S"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":48},"end":{"row":1,"column":0}},"text":"\r\n"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":265,"column":0}},"nl":"\r\n","lines":["var fetch = fetch || {}; //avoid error on NodeJS","","// We will pass these to the wrapper function at the end of the file","(function(isNode, isAngular, fetch) {","","function commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","        // console.log(\"doneFunc:\");","        // console.log(doneFunc);","        console.log(\">>>>>>>>>>>>>> calling \" + uri + \" with an HTTP \" + action + \" ...\");","        if(typeof mode === 'undefined') {","            var payload;","            var temp = '';","            if(action === 'POST') payload = JSON.stringify(jsonData);","            //=== c.f. https://github.com/github/fetch","            function status(response) {  ","              if (response.status >= 200 && response.status < 300) {  ","                return Promise.resolve(response)  ","              } else {  ","                return Promise.reject(new Error(response.statusText))  ","              }  ","            }","            ","            function json(response) {  ","              return response.json()  ","            }","            ","            fetch(base_url + uri, {","              method: action,","              // mode: 'no-cors',","              headers: {","                'Accept': 'application/json',","                'Content-Type': 'application/json'","              },","              body: payload","            })","              .then(status)  ","              .then(json)  ","              .then(function(data) {","                console.log('HTTP fetch request succeeded with JSON response', data);","                if(cb != null) cb(data); else doneFunc();","              }).catch(function(error) {","                console.log('HTTP fetch request failed', error);","                if(cb != null) cb(error); else doneFunc();","                // throw error;","              });","        } else {","            if(uri === '/api/Flags' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Flags.Flags_find(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Flags.Flags_find returned:\");","                            // console.log(data);","                            // console.log(\"get flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Flags.Flags_find","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Flags' && action === 'PUT') {","                // console.log(\"calling put flag - swagger.Flags.Flags_upsert ..............................................\");","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Flags.Flags_upsert(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Flags.Flags_upsert returned:\");","                            // console.log(data);","                            // console.log(\"put flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Flags.Flags_upsert","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages/count' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_count({","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_count returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_count","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages/id' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_findById(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_findById returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_findById","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_find(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_find returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_find","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'PUT') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_upsert(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_upsert returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_upsert","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'POST') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_create(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_create returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_create","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Threads' && action === 'POST') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Threads.Threads_create(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Threads.Threads_create returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Threads.Threads_create","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Threads/wall' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Threads.Threads_wall(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            console.log(\"api-helper.js (swagger-client): Threads.Threads_wall returned:\");","                            console.log(data);","                            // console.log(\"get flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Threads.Threads_wall","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Users/login' && action === 'POST') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Users.Users_isAuthenticated(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Users.Users_isAuthenticated returned:\");","                            // console.log(data);","                            // console.log(\"get flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Users.Users_isAuthenticated","                    } //end of success","                }); //swagger end","            }","","        } //if(typeof mode === 'undefined') end","} //commonAPI end","// This wrapper function returns the contents of your module, ","// with dependencies","var SilverBulletModule = function(Bullet, Silver) {","  var SilverBullet = function(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","    // something awesome happens here","    Swagger = SwaggerClient;","    commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode);","  };","  return SilverBullet;","};","    ","if (isAngular) {","    // AngularJS module definition","    // angular.module('app.silverbullet', ['app.silver', 'app.bullet']).","    // factory('SilverBullet', ['Bullet', 'Silver', SilverBulletModule]);","    angular.module('app.silverbullet', []).","    factory('capi', [SilverBulletModule]); //use is like SilverBullet(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode)","} else if (isNode) {","  // NodeJS module definition","  // module.exports = SilverBulletModule(","    // require('bullet.js'), ","    // require('silver.js')","  // );","","var stemconfig = require('../common/config');","var Swagger = require('swagger-client');","var fetch = require('node-fetch');","","","var app = module.exports = {","","    //=== high level convenient method","    api: function(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","        commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode);","    } //api end","","}; //api module.exports end","","} //if (isNode) end","","})(typeof module !== 'undefined' && module.exports,","  typeof angular !== 'undefined', fetch);",""]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":48}},"text":"var fetch = fetch || {}; //avoid error on NodeJS"},{"action":"insertText","range":{"start":{"row":0,"column":48},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":265,"column":0}},"lines":["","// We will pass these to the wrapper function at the end of the file","(function(isNode, isAngular, fetch) {","","function commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","        // console.log(\"doneFunc:\");","        // console.log(doneFunc);","        console.log(\">>>>>>>>>>>>>> calling \" + uri + \" with an HTTP \" + action + \" ...\");","        if(typeof mode === 'undefined') {","            var payload;","            var temp = '';","            if(action === 'POST' || action === 'PUT') payload = JSON.stringify(jsonData);","            //=== c.f. https://github.com/github/fetch","            function status(response) {  ","              if (response.status >= 200 && response.status < 300) {  ","                return Promise.resolve(response)  ","              } else {  ","                return Promise.reject(new Error(response.statusText))  ","              }  ","            }","            ","            function json(response) {  ","              return response.json()  ","            }","            ","            fetch(base_url + uri, {","              method: action,","              // mode: 'no-cors',","              headers: {","                'Accept': 'application/json',","                'Content-Type': 'application/json'","              },","              body: payload","            })","              .then(status)  ","              .then(json)  ","              .then(function(data) {","                console.log('HTTP fetch request succeeded with JSON response', data);","                if(cb != null) cb(data); else doneFunc();","              }).catch(function(error) {","                console.log('HTTP fetch request failed', error);","                if(cb != null) cb(error); else doneFunc();","                // throw error;","              });","        } else {","            if(uri === '/api/Flags' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Flags.Flags_find(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Flags.Flags_find returned:\");","                            // console.log(data);","                            // console.log(\"get flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Flags.Flags_find","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Flags' && action === 'PUT') {","                // console.log(\"calling put flag - swagger.Flags.Flags_upsert ..............................................\");","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Flags.Flags_upsert(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Flags.Flags_upsert returned:\");","                            // console.log(data);","                            // console.log(\"put flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Flags.Flags_upsert","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages/count' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_count({","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_count returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_count","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages/id' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_findById(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_findById returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_findById","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_find(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_find returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_find","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'PUT') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_upsert(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_upsert returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_upsert","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'POST') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_create(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_create returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_create","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Threads' && action === 'POST') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Threads.Threads_create(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Threads.Threads_create returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Threads.Threads_create","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Threads/wall' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Threads.Threads_wall(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            console.log(\"api-helper.js (swagger-client): Threads.Threads_wall returned:\");","                            console.log(data);","                            // console.log(\"get flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Threads.Threads_wall","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Users/login' && action === 'POST') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Users.Users_isAuthenticated(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            console.log(\"api-helper.js (swagger-client): Users.Users_isAuthenticated returned:\");","                            console.log(data);","                            console.log(\"get flag --------------------------->doneFunc:\");","                            console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Users.Users_isAuthenticated","                    } //end of success","                }); //swagger end","            }","","        } //if(typeof mode === 'undefined') end","} //commonAPI end","// This wrapper function returns the contents of your module, ","// with dependencies","var SilverBulletModule = function(Bullet, Silver) {","  var SilverBullet = function(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","    // something awesome happens here","    Swagger = SwaggerClient;","    commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode);","  };","  return SilverBullet;","};","    ","if (isAngular) {","    // AngularJS module definition","    // angular.module('app.silverbullet', ['app.silver', 'app.bullet']).","    // factory('SilverBullet', ['Bullet', 'Silver', SilverBulletModule]);","    angular.module('app.silverbullet', []).","    factory('capi', [SilverBulletModule]); //use is like SilverBullet(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode)","} else if (isNode) {","  // NodeJS module definition","  // module.exports = SilverBulletModule(","    // require('bullet.js'), ","    // require('silver.js')","  // );","","var stemconfig = require('../common/config');","var Swagger = require('swagger-client');","var fetch = require('node-fetch');","","","var app = module.exports = {","","    //=== high level convenient method","    api: function(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","        commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode);","    } //api end","","}; //api module.exports end","","} //if (isNode) end","","})(typeof module !== 'undefined' && module.exports,","  typeof angular !== 'undefined', fetch);",""]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":265,"column":0}},"nl":"\r\n","lines":["var fetch = fetch || {}; //avoid error on NodeJS","","// We will pass these to the wrapper function at the end of the file","(function(isNode, isAngular, fetch) {","","function commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","        // console.log(\"doneFunc:\");","        // console.log(doneFunc);","        console.log(\">>>>>>>>>>>>>> calling \" + uri + \" with an HTTP \" + action + \" ...\");","        if(typeof mode === 'undefined') {","            var payload;","            var temp = '';","            if(action === 'POST' || action === 'PUT') payload = JSON.stringify(jsonData);","            //=== c.f. https://github.com/github/fetch","            function status(response) {  ","              if (response.status >= 200 && response.status < 300) {  ","                return Promise.resolve(response)  ","              } else {  ","                return Promise.reject(new Error(response.statusText))  ","              }  ","            }","            ","            function json(response) {  ","              return response.json()  ","            }","            ","            fetch(base_url + uri, {","              method: action,","              // mode: 'no-cors',","              headers: {","                'Accept': 'application/json',","                'Content-Type': 'application/json'","              },","              body: payload","            })","              .then(status)  ","              .then(json)  ","              .then(function(data) {","                console.log('HTTP fetch request succeeded with JSON response', data);","                if(cb != null) cb(data); else doneFunc();","              }).catch(function(error) {","                console.log('HTTP fetch request failed', error);","                if(cb != null) cb(error); else doneFunc();","                // throw error;","              });","        } else {","            if(uri === '/api/Flags' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Flags.Flags_find(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Flags.Flags_find returned:\");","                            // console.log(data);","                            // console.log(\"get flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Flags.Flags_find","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Flags' && action === 'PUT') {","                // console.log(\"calling put flag - swagger.Flags.Flags_upsert ..............................................\");","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Flags.Flags_upsert(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Flags.Flags_upsert returned:\");","                            // console.log(data);","                            // console.log(\"put flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Flags.Flags_upsert","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages/count' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_count({","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_count returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_count","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages/id' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_findById(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_findById returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_findById","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_find(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_find returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_find","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'PUT') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_upsert(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_upsert returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_upsert","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'POST') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_create(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_create returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_create","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Threads' && action === 'POST') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Threads.Threads_create(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Threads.Threads_create returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Threads.Threads_create","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Threads/wall' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Threads.Threads_wall(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            console.log(\"api-helper.js (swagger-client): Threads.Threads_wall returned:\");","                            console.log(data);","                            // console.log(\"get flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Threads.Threads_wall","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Users/login' && action === 'POST') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Users.Users_isAuthenticated(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            console.log(\"api-helper.js (swagger-client): Users.Users_isAuthenticated returned:\");","                            console.log(data);","                            console.log(\"get flag --------------------------->doneFunc:\");","                            console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Users.Users_isAuthenticated","                    } //end of success","                }); //swagger end","            }","","        } //if(typeof mode === 'undefined') end","} //commonAPI end","// This wrapper function returns the contents of your module, ","// with dependencies","var SilverBulletModule = function(Bullet, Silver) {","  var SilverBullet = function(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","    // something awesome happens here","    Swagger = SwaggerClient;","    commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode);","  };","  return SilverBullet;","};","    ","if (isAngular) {","    // AngularJS module definition","    // angular.module('app.silverbullet', ['app.silver', 'app.bullet']).","    // factory('SilverBullet', ['Bullet', 'Silver', SilverBulletModule]);","    angular.module('app.silverbullet', []).","    factory('capi', [SilverBulletModule]); //use is like SilverBullet(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode)","} else if (isNode) {","  // NodeJS module definition","  // module.exports = SilverBulletModule(","    // require('bullet.js'), ","    // require('silver.js')","  // );","","var stemconfig = require('../common/config');","var Swagger = require('swagger-client');","var fetch = require('node-fetch');","","","var app = module.exports = {","","    //=== high level convenient method","    api: function(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","        commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode);","    } //api end","","}; //api module.exports end","","} //if (isNode) end","","})(typeof module !== 'undefined' && module.exports,","  typeof angular !== 'undefined', fetch);",""]},{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":48}},"text":"var fetch = fetch || {}; //avoid error on NodeJS"},{"action":"insertText","range":{"start":{"row":0,"column":48},"end":{"row":1,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":311,"column":0}},"lines":["","// We will pass these to the wrapper function at the end of the file","(function(isNode, isAngular, fetch) {","","function commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","        // console.log(\"doneFunc:\");","        // console.log(doneFunc);","        console.log(\">>>>>>>>>>>>>> calling \" + uri + \" with an HTTP \" + action + \" ...\");","        if(typeof mode === 'undefined') {","            var payload;","            var temp = '';","            if(action === 'POST' || action === 'PUT') payload = JSON.stringify(jsonData);","            //=== c.f. https://github.com/github/fetch","            // function status(response) {","            //   if (response.status >= 200 && response.status < 300) {  ","            //     return Promise.resolve(response)  ","            //   } else {  ","            //     return Promise.reject(new Error(response.statusText))  ","            //   }  ","            // }","            ","            function isFunctionA(object) {","                return object && getClass.call(object) == '[object Function]';","            }","            function json(response) {  ","                return response.json()  ","            }","            ","            function handleErrors(response) {","                //=== c.f. https://www.tjvantoll.com/2015/09/13/fetch-and-errors/","                if (typeof response.name === 'undefined' && typeof response.text !== 'undefined' && !response.ok) {","                    if(typeof response.text() !== 'undefined') {","                        response.text().then(text => {","                            if(hasError(text)) {","                                // console.log('Error text from callRemoteService() error handler: ' + text);","                                if(cb != null) cb(text); else doneFunc();","                            } else {","                                if(cb != null) cb(response.statusText); else doneFunc();","                            }","                            // throw new Error(text)","                        });","                    }","                    // throw Error(response.statusText);","                } else ","                if(typeof response.error !== 'undefined') {","                    console.log('HTTP fetch request failed', response.error.message);","                    if(cb != null) cb(response.error.message); else doneFunc();","                } else {","                    //=== ALL GOOD!!! :)","                    console.log('HTTP fetch request succeeded with JSON response', response);","                    if(cb != null) cb(response); else doneFunc();","                }","                return response;","            }","","            function hasError(message) {","                var ret = false;","                if(typeof message !== 'undefined' && message.trim().startsWith('{\"error\":')) {","                    ret = true;","                }","                return ret;","            }","","            fetch(base_url + uri, {","              method: action,","              // mode: 'no-cors',","              headers: {","                'Accept': 'application/json',","                'Content-Type': 'application/json'","              },","              body: payload","            })","            // .then(status)  ","            .then(json)  ","            // .then(function(data) {","            //     console.log('HTTP fetch request succeeded with JSON response', data);","            //     if(cb != null) cb(data); else doneFunc();","            // }).catch(function(error) {","            //     console.log('HTTP fetch request failed', error);","            //     console.log(error.stack);","            //     if(cb != null) cb(error); else doneFunc();","            //     // throw error;","            // });","","            .then(handleErrors)","            .then(function(response) {","                console.log(\"ok\");","            }).catch(function(error) {","                console.log(error);","            });","        } else {","            if(uri === '/api/Flags' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Flags.Flags_find(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Flags.Flags_find returned:\");","                            // console.log(data);","                            // console.log(\"get flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Flags.Flags_find","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Flags' && action === 'PUT') {","                // console.log(\"calling put flag - swagger.Flags.Flags_upsert ..............................................\");","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Flags.Flags_upsert(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Flags.Flags_upsert returned:\");","                            // console.log(data);","                            // console.log(\"put flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Flags.Flags_upsert","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages/count' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_count({","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_count returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_count","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages/id' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_findById(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_findById returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_findById","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_find(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_find returned:\");","                            // console.log(data);","                            // console.log(\"get message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_find","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'PUT') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_upsert(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_upsert returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_upsert","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Messages' && action === 'POST') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Messages.Messages_create(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Messages.Messages_create returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Messages.Messages_create","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Threads' && action === 'POST') {","                // debugger","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Threads.Threads_create(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            // console.log(\"api-helper.js (swagger-client): Threads.Threads_create returned:\");","                            // console.log(data);","                            // console.log(\"put message --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Threads.Threads_create","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Threads/wall' && action === 'GET') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Threads.Threads_wall(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            console.log(\"api-helper.js (swagger-client): Threads.Threads_wall returned:\");","                            console.log(data);","                            // console.log(\"get flag --------------------------->doneFunc:\");","                            // console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Threads.Threads_wall","                    } //end of success","                }); //swagger end","            }","            else","            if(uri === '/api/Users/login' && action === 'POST') {","                var swagger = new Swagger({","                    url: base_url + '/explorer/swagger.json',","                    success: function() {","                        swagger.Users.Users_isAuthenticated(jsonData, {","                            responseContentType: 'application/json'","                        }, function(data) {","                            console.log(\"api-helper.js (swagger-client): Users.Users_isAuthenticated returned:\");","                            console.log(data);","                            console.log(\"get flag --------------------------->doneFunc:\");","                            console.log(doneFunc);","                            if(cb != null) cb(data); else doneFunc();","                        }); //end of swagger.Users.Users_isAuthenticated","                    } //end of success","                }); //swagger end","            }","","        } //if(typeof mode === 'undefined') end","} //commonAPI end","// This wrapper function returns the contents of your module, ","// with dependencies","var SilverBulletModule = function(Bullet, Silver) {","  var SilverBullet = function(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","    // something awesome happens here","    Swagger = SwaggerClient;","    commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode);","  };","  return SilverBullet;","};","    ","if (isAngular) {","    // AngularJS module definition","    // angular.module('app.silverbullet', ['app.silver', 'app.bullet']).","    // factory('SilverBullet', ['Bullet', 'Silver', SilverBulletModule]);","    angular.module('app.silverbullet', []).","    factory('capi', [SilverBulletModule]); //use is like SilverBullet(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode)","} else if (isNode) {","  // NodeJS module definition","  // module.exports = SilverBulletModule(","    // require('bullet.js'), ","    // require('silver.js')","  // );","","var stemconfig = require('../common/config');","var Swagger = require('swagger-client');","var fetch = require('node-fetch');","","","var app = module.exports = {","","    //=== high level convenient method","    api: function(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode) {","        commonAPI(base_url, uri, action, model, method, jsonData, cb, doneFunc, mode);","    } //api end","","}; //api module.exports end","","} //if (isNode) end","","})(typeof module !== 'undefined' && module.exports,","  typeof angular !== 'undefined', fetch);",""]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":22,"column":0},"end":{"row":25,"column":0}},"nl":"\r\n","lines":["            function isFunctionA(object) {","                return object && getClass.call(object) == '[object Function]';","            }"]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":85,"column":38},"end":{"row":86,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":86,"column":0},"end":{"row":86,"column":16}},"text":"                "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":86,"column":16},"end":{"row":86,"column":17}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":86,"column":17},"end":{"row":86,"column":18}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":86,"column":18},"end":{"row":86,"column":19}},"text":"b"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":86,"column":19},"end":{"row":86,"column":20}},"text":"u"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":86,"column":20},"end":{"row":86,"column":21}},"text":"g"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":86,"column":21},"end":{"row":86,"column":22}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":86,"column":22},"end":{"row":86,"column":23}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":86,"column":23},"end":{"row":86,"column":24}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":26,"column":45},"end":{"row":27,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":27,"column":0},"end":{"row":27,"column":16}},"text":"                "}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":16},"end":{"row":27,"column":17}},"text":"d"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":17},"end":{"row":27,"column":18}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":18},"end":{"row":27,"column":19}},"text":"b"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":19},"end":{"row":27,"column":20}},"text":"u"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":20},"end":{"row":27,"column":21}},"text":"g"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":21},"end":{"row":27,"column":22}},"text":"g"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":22},"end":{"row":27,"column":23}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":23},"end":{"row":27,"column":24}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":27,"column":16},"end":{"row":27,"column":19}},"text":"// "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":87,"column":24},"end":{"row":88,"column":0}},"text":"\r\n"},{"action":"insertText","range":{"start":{"row":88,"column":0},"end":{"row":88,"column":16}},"text":"                "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":88,"column":16},"end":{"row":88,"column":81}},"text":"console.log('HTTP fetch request failed', response.error.message);"},{"action":"insertText","range":{"start":{"row":88,"column":81},"end":{"row":89,"column":0}},"text":"\r\n"},{"action":"insertLines","range":{"start":{"row":89,"column":0},"end":{"row":90,"column":0}},"lines":["                if(cb != null) cb(response.error.message); else doneFunc();"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":89,"column":34},"end":{"row":89,"column":43}},"text":"response."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":89,"column":39},"end":{"row":89,"column":47}},"text":".message"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":88,"column":72},"end":{"row":88,"column":79}},"text":"message"}]},{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":88,"column":71},"end":{"row":88,"column":72}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":88,"column":57},"end":{"row":88,"column":66}},"text":"response."}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":88,"column":48},"end":{"row":88,"column":54}},"text":"failed"},{"action":"insertText","range":{"start":{"row":88,"column":48},"end":{"row":88,"column":49}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":88,"column":49},"end":{"row":88,"column":50}},"text":"x"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":88,"column":50},"end":{"row":88,"column":51}},"text":"c"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":88,"column":51},"end":{"row":88,"column":52}},"text":"e"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":88,"column":52},"end":{"row":88,"column":53}},"text":"p"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":88,"column":53},"end":{"row":88,"column":54}},"text":"t"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":88,"column":54},"end":{"row":88,"column":55}},"text":"i"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":88,"column":55},"end":{"row":88,"column":56}},"text":"o"}]},{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":88,"column":56},"end":{"row":88,"column":57}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":87,"column":16},"end":{"row":87,"column":19}},"text":"// "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":21,"column":0},"end":{"row":21,"column":12}},"text":"            "},{"action":"removeLines","range":{"start":{"row":14,"column":0},"end":{"row":21,"column":0}},"nl":"\r\n","lines":["            // function status(response) {","            //   if (response.status >= 200 && response.status < 300) {  ","            //     return Promise.resolve(response)  ","            //   } else {  ","            //     return Promise.reject(new Error(response.statusText))  ","            //   }  ","            // }"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":65,"column":23},"end":{"row":65,"column":25}},"text":"  "}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":66,"column":0},"end":{"row":76,"column":0}},"nl":"\r\n","lines":["            // .then(function(data) {","            //     console.log('HTTP fetch request succeeded with JSON response', data);","            //     if(cb != null) cb(data); else doneFunc();","            // }).catch(function(error) {","            //     console.log('HTTP fetch request failed', error);","            //     console.log(error.stack);","            //     if(cb != null) cb(error); else doneFunc();","            //     // throw error;","            // });",""]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":64,"column":0},"end":{"row":65,"column":0}},"nl":"\r\n","lines":["            // .then(status)  "]}]}]],"redo":[]},"/www/templates/questActivity.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":13,"column":11},"end":{"row":13,"column":11}},"lastUse":1468318706116,"undo":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":13,"column":11},"end":{"row":14,"column":0}},"text":"\r\n"}]}]],"redo":[]},"/www/templates/wall_mayowa.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":20,"column":33},"end":{"row":20,"column":33}},"lastUse":1468251147951,"undo":[],"redo":[]},"/www_ionic_creator/templates/quest.html":{"scrollTop":0,"scrollLeft":0,"selection":{"start":{"row":24,"column":11},"end":{"row":24,"column":11}},"lastUse":1468248113012,"undo":[],"redo":[]}},"window":{"width":1382,"height":744,"top":-8,"left":-8,"isMaximized":true},"recent.commands":{"File:Copy":1469537220656,"Edit:Delete":1469741303143,"File:Delete":1473399436870}}